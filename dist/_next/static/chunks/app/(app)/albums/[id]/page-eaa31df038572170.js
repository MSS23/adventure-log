(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3070],{6259:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>o,_2:()=>c,lp:()=>d,mB:()=>m,rI:()=>l,ty:()=>n});var s=a(95155);a(12115);var r=a(47971),i=a(64269);function l(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"dropdown-menu",...t})}function n(e){let{...t}=e;return(0,s.jsx)(r.l9,{"data-slot":"dropdown-menu-trigger",...t})}function o(e){let{className:t,sideOffset:a=4,...l}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsx)(r.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...l})})}function c(e){let{className:t,inset:a,variant:l="default",...n}=e;return(0,s.jsx)(r.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":l,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function d(e){let{className:t,inset:a,...l}=e;return(0,s.jsx)(r.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,i.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...l})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(r.wv,{"data-slot":"dropdown-menu-separator",className:(0,i.cn)("bg-border -mx-1 my-1 h-px",t),...a})}},18383:(e,t,a)=>{"use strict";a.d(t,{OT:()=>x,c2:()=>u});var s=a(95155),r=a(12115),i=a(58415),l=a(83457),n=a(3998),o=a(11647),c=a(56517),d=a(64269),m=a(18720);function h(e){let{targetId:t,targetType:a,metadata:h,variant:u="ghost",size:x="default",showCount:g=!1,showLabel:p=!1,className:f,disabled:v=!1,onToggle:j}=e,{isFavorited:w,toggleFavorite:b,getFavoritesCount:y,loading:N,checkOwnership:k}=(0,c.rB)({targetType:a,autoFetch:!0}),[_,A]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),M=w(t,a),D=g?y(a):0;(0,r.useEffect)(()=>{(async()=>{try{let e=await k(t,a);C(e)}catch(e){console.error("Error checking content ownership:",e),C(!1)}})()},[t,a,k]);let E=v||S,F=async()=>{if(!E&&!_){A(!0);try{let e=await b(t,a,h);null==j||j(e),m.oR.success(e?"Added to ".concat(a," favorites"):"Removed from ".concat(a," favorites"),{duration:2e3,position:"bottom-center"})}catch(e){m.oR.error(e instanceof Error?e.message:"Failed to update ".concat(a," favorite"),{duration:3e3,position:"bottom-center"})}finally{setTimeout(()=>A(!1),300)}}};return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(n.$,{variant:u,size:x,onClick:F,disabled:E||N||_,title:S?"Cannot favorite your own content":void 0,className:(0,d.cn)("relative overflow-hidden transition-colors",M&&"ghost"===u&&"text-red-600 hover:text-red-700 hover:bg-red-50",M&&"outline"===u&&"border-red-300 text-red-600 hover:bg-red-50",M&&"default"===u&&"bg-red-600 hover:bg-red-700 text-white",S&&"opacity-50 cursor-not-allowed",f),"aria-label":S?"Cannot favorite your own content":"".concat(M?"Remove from":"Add to"," ").concat(a," favorites"),children:[(0,s.jsxs)(i.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.2},className:"flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:(0,d.cn)("h-4 w-4 transition-all duration-200",M&&"fill-current",_&&"scale-125")}),p&&(0,s.jsx)("span",{className:"text-sm font-medium",children:(()=>{if(!p)return null;if(S)return"Cannot favorite own content";switch(a){case"photo":return M?"Favorited":"Add to favorites";case"album":return"Favorite album";case"location":return M?"Favorite place":"Add to wishlist";default:return M?"Favorited":"Favorite"}})()})]},M?"filled":"empty"),_&&M&&(0,s.jsx)(i.P.div,{initial:{scale:0,opacity:.7},animate:{scale:2,opacity:0},transition:{duration:.4},className:"absolute inset-0 bg-red-400 rounded-full"})]}),g&&D>0&&(0,s.jsx)(o.E,{variant:"secondary",className:"text-sm bg-gray-100 text-gray-800",children:D})]})}function u(e){return(0,s.jsx)(h,{...e,targetType:"location"})}function x(e){let{targetId:t,targetType:a,metadata:r,className:i,...l}=e;return(0,s.jsx)(h,{targetId:t,targetType:a,metadata:r,variant:"ghost",size:"sm",showCount:!1,showLabel:!1,className:(0,d.cn)("h-8 w-8 p-0",i),...l})}},22369:(e,t,a)=>{Promise.resolve().then(a.bind(a,91946))},56517:(e,t,a)=>{"use strict";a.d(t,{rB:()=>n});var s=a(12115),r=a(96648),i=a(43691),l=a(82466);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{targetType:t,targetId:a,autoFetch:n=!0}=e,{user:o}=(0,i.A)(),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)(!1),[u,x]=(0,s.useState)(null),g=(0,r.U)(),p=(0,s.useCallback)(async(e,t)=>{if(!(null==o?void 0:o.id))return!1;try{let a;switch(t){case"photo":a=g.from("photos").select("user_id").eq("id",e).single();break;case"album":a=g.from("albums").select("user_id").eq("id",e).single();break;default:return!1}let{data:s}=await a;return(null==s?void 0:s.user_id)===o.id}catch(a){return l.Rm.error("Error checking content ownership",{itemId:e,itemType:t,error:a}),!1}},[null==o?void 0:o.id,g]),f=(0,s.useCallback)(async()=>{if(!o)return void d([]);h(!0),x(null);try{let e=g.from("favorites").select("\n          id,\n          user_id,\n          target_id,\n          target_type,\n          created_at,\n          metadata\n        ").eq("user_id",o.id).order("created_at",{ascending:!1});t&&(e=e.eq("target_type",t)),a&&(e=e.eq("target_id",a));let{data:s,error:r}=await e;if(r)throw r;d(s||[]),l.Rm.debug("Favorites fetched successfully",{component:"useFavorites",action:"fetchFavorites",count:(null==s?void 0:s.length)||0,targetType:t,targetId:a})}catch(e){x(e instanceof Error?e.message:"Failed to fetch favorites"),l.Rm.error("Failed to fetch favorites",{error:e})}finally{h(!1)}},[o,t,a,g]),v=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photo";return c.some(a=>a.target_id===e&&a.target_type===t)},[c]),j=(0,s.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photo",a=arguments.length>2?arguments[2]:void 0;if(!o)throw Error("Must be logged in to add favorites");if(await p(e,t))throw Error("You cannot favorite your own content");if(!v(e,t))try{let{data:s,error:r}=await g.from("favorites").insert({user_id:o.id,target_id:e,target_type:t,metadata:a||{}}).select().single();if(r)throw r;return d(e=>[s,...e]),l.Rm.info("Added favorite successfully",{component:"useFavorites",action:"addFavorite",targetId:e,targetType:t}),s}catch(e){throw x(e instanceof Error?e.message:"Failed to add favorite"),l.Rm.error("Failed to add favorite",{error:e}),e}},[o,v,g]),w=(0,s.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photo";if(!o)throw Error("Must be logged in to remove favorites");try{let{error:a}=await g.from("favorites").delete().eq("user_id",o.id).eq("target_id",e).eq("target_type",t);if(a)throw a;d(a=>a.filter(a=>a.target_id!==e||a.target_type!==t)),l.Rm.info("Removed favorite successfully",{component:"useFavorites",action:"removeFavorite",targetId:e,targetType:t})}catch(e){throw x(e instanceof Error?e.message:"Failed to remove favorite"),l.Rm.error("Failed to remove favorite",{error:e}),e}},[o,g]),b=(0,s.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photo",a=arguments.length>2?arguments[2]:void 0;return v(e,t)?(await w(e,t),!1):(await j(e,t,a),!0)},[v,w,j]),y=(0,s.useCallback)(e=>e?c.filter(t=>t.target_type===e).length:c.length,[c]),N=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,a=c;return t&&(a=c.filter(e=>e.target_type===t)),a.slice(0,e)},[c]);return(0,s.useEffect)(()=>{n&&o&&f()},[n,f,o]),(0,s.useEffect)(()=>{o||(d([]),x(null))},[o]),{favorites:c,loading:m,error:u,fetchFavorites:f,isFavorited:v,addFavorite:j,removeFavorite:w,toggleFavorite:b,getFavoritesCount:y,getRecentFavorites:N,checkOwnership:p,photoFavorites:c.filter(e=>"photo"===e.target_type),albumFavorites:c.filter(e=>"album"===e.target_type),locationFavorites:c.filter(e=>"location"===e.target_type)}}},58941:(e,t,a)=>{"use strict";a.d(t,{OD:()=>r});var s=a(32587);class r{static getInfo(){if(!this.info){let e=s.Ii.getPlatform();this.info={isWeb:"web"===e,isNative:"web"!==e,isAndroid:"android"===e,isIOS:"ios"===e,platform:e}}return this.info}static isWeb(){return this.getInfo().isWeb}static isNative(){return this.getInfo().isNative}static isAndroid(){return this.getInfo().isAndroid}static isIOS(){return this.getInfo().isIOS}static getPlatform(){return this.getInfo().platform}static isCapabilityAvailable(e){let{isNative:t,isWeb:a}=this.getInfo();switch(e){case"camera":return t||a&&"MediaDevices"in window&&"getUserMedia"in navigator.mediaDevices;case"geolocation":return t||a&&"geolocation"in navigator;case"filesystem":return t||a&&"File"in window;case"share":return t||a&&"share"in navigator;case"toast":return!0;default:return!1}}static getUserAgent(){return"undefined"!=typeof navigator?navigator.userAgent:""}static isDevelopment(){return!1}static isStandalone(){let{isNative:e}=this.getInfo();return!!e||window.matchMedia("(display-mode: standalone)").matches||"standalone"in navigator&&!0===navigator.standalone}static getDeviceInfo(){var e;let t=this.getInfo(),a=this.getUserAgent();return{...t,userAgent:a,isStandalone:this.isStandalone(),isDevelopment:this.isDevelopment(),hasTouch:"ontouchstart"in window,screen:{width:window.screen.width,height:window.screen.height,orientation:null==(e=window.screen.orientation)?void 0:e.type}}}}r.info=null},72625:(e,t,a)=>{"use strict";a.d(t,{w:()=>c});var s=a(71223),r=a(36486),i=a(47376),l=a(68974),n=a(93902),o=a(58941);class c{static async takePhoto(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{quality:t=90,allowEditing:a=!1,resultType:r="uri",source:i="prompt"}=e;if(!o.OD.isNative())return new Promise((e,t)=>{let a=document.createElement("input");a.type="file",a.accept="image/*","camera"===i&&(a.capture="environment"),a.onchange=a=>{var s;let i=null==(s=a.target.files)?void 0:s[0];if(i)if("base64"===r){let a=new FileReader;a.onload=()=>e(a.result),a.onerror=()=>t(Error("Failed to read file")),a.readAsDataURL(i)}else e(URL.createObjectURL(i));else t(Error("No file selected"))},a.click()});try{let e=await s.i7.getPhoto({quality:t,allowEditing:a,resultType:"base64"===r?s.LK.Base64:s.LK.Uri,source:"camera"===i?s.ru.Camera:"photos"===i?s.ru.Photos:s.ru.Prompt});if("base64"===r)return"data:image/jpeg;base64,".concat(e.base64String);return e.webPath||e.path||""}catch(e){throw console.error("Native camera error:",e),Error("Failed to take photo: ".concat(e instanceof Error?e.message:"Unknown error"))}}static async getCurrentLocation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;if(!o.OD.isNative())return new Promise((t,a)=>{if(!("geolocation"in navigator))return void a(Error("Geolocation not supported"));let s=setTimeout(()=>{a(Error("Location request timeout"))},e);navigator.geolocation.getCurrentPosition(e=>{clearTimeout(s),t({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,altitude:e.coords.altitude||void 0,speed:e.coords.speed||void 0,heading:e.coords.heading||void 0})},e=>{clearTimeout(s),a(Error("Geolocation error: ".concat(e.message)))},{enableHighAccuracy:!0,timeout:e,maximumAge:3e5})});try{let t=await r.L.getCurrentPosition({timeout:e,enableHighAccuracy:!0});return{latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude||void 0,speed:t.coords.speed||void 0,heading:t.coords.heading||void 0}}catch(e){throw console.error("Native geolocation error:",e),Error("Failed to get location")}}static async share(e){let{title:t,text:a,url:s,files:r}=e;if(o.OD.isNative())try{let e={title:t,text:a,url:s};r&&r.length>0?await l.S.share({...e,files:r}):await l.S.share(e)}catch(e){throw console.error("Native share error:",e),Error("Failed to share content")}else if("share"in navigator&&navigator.share)try{await navigator.share({title:t,text:a,url:s,files:null==r?void 0:r.map(e=>new File([],e))})}catch(e){throw Error("Failed to share content")}else{let e=[t,a,s].filter(Boolean).join(" - ");if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e),await c.showToast("Copied to clipboard");else{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),await c.showToast("Copied to clipboard")}}}static async showToast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";if(o.OD.isNative())try{await n.y.show({text:e,duration:"short"===t?"short":"long"})}catch(t){console.error("Native toast error:",t),alert(e)}else{console.info("Toast:",e);let a=document.createElement("div");a.textContent=e,a.style.cssText="\n        position: fixed;\n        bottom: 20px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: rgba(0, 0, 0, 0.8);\n        color: white;\n        padding: 12px 24px;\n        border-radius: 24px;\n        z-index: 10000;\n        font-family: -apple-system, BlinkMacSystemFont, sans-serif;\n        font-size: 14px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        transition: opacity 0.3s ease;\n      ",document.body.appendChild(a),setTimeout(()=>{a.style.opacity="0",setTimeout(()=>{a.parentNode&&document.body.removeChild(a)},300)},"short"===t?2e3:3500)}}static async saveFile(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{directory:s=i.__.Documents,encoding:r=i.Wi.UTF8}=a;if(o.OD.isNative())try{return(await i.YA.writeFile({path:e,data:t,directory:s,encoding:r})).uri}catch(e){throw console.error("Native filesystem error:",e),Error("Failed to save file")}{let a=new Blob([t],{type:"text/plain"}),s=URL.createObjectURL(a),r=document.createElement("a");return r.href=s,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),e}}static async readFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{directory:a=i.__.Documents,encoding:s=i.Wi.UTF8}=t;if(o.OD.isNative())try{return(await i.YA.readFile({path:e,directory:a,encoding:s})).data}catch(e){throw console.error("Native filesystem read error:",e),Error("Failed to read file")}throw Error("File reading not supported on web platform")}static async requestPermissions(e){let t={};if(o.OD.isNative())for(let a of e)try{if("camera"===a){let e=await s.i7.requestPermissions();t.camera="granted"===e.camera||"granted"===e.photos}else if("geolocation"===a){let e=await r.L.requestPermissions();t.geolocation="granted"===e.location}}catch(e){console.error("Permission request failed for ".concat(a,":"),e),t[a]=!1}else for(let a of e)t[a]=o.OD.isCapabilityAvailable(a);return t}}},91946:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eF});var s=a(95155),r=a(12115),i=a(20063),l=a(15239),n=a(43691),o=a(62890),c=a(86948),d=a(3998),m=a(11647),h=a(39068),u=a(91169),x=a(99708),g=a(35626),p=a(21873),f=a(16485),v=a(95664),j=a(35022),w=a(11010),b=a(39347),y=a(6191),N=a(37772),k=a(39867),_=a(71360),A=a(49476),S=a(5917),C=a(6259),M=a(52619),D=a.n(M),E=a(47650),F=a(65229),T=a(90368),P=a(27937),I=a(71629),W=a(34904),z=a(93141),L=a(21397),R=a(83457),O=a(95704);class U{async getCurrentWeather(e){try{if("demo_key"===this.apiKey)return this.getMockCurrentWeather();let t="".concat(this.baseUrl,"/weather?lat=").concat(e.latitude,"&lon=").concat(e.longitude,"&appid=").concat(this.apiKey,"&units=metric"),a=await fetch(t);if(!a.ok)throw Error("Weather API error: ".concat(a.status));let s=await a.json();return this.parseCurrentWeatherData(s)}catch(e){return console.error("Failed to fetch current weather:",e),this.getMockCurrentWeather()}}async getWeatherForecast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{if("demo_key"===this.apiKey)return this.getMockWeatherForecast(e,t);let a="".concat(this.baseUrl,"/forecast?lat=").concat(e.latitude,"&lon=").concat(e.longitude,"&appid=").concat(this.apiKey,"&units=metric&cnt=").concat(Math.min(8*t,40)),s=await fetch(a);if(!s.ok)throw Error("Weather forecast API error: ".concat(s.status));let r=await s.json();return this.parseWeatherForecastData(r,t)}catch(a){return console.error("Failed to fetch weather forecast:",a),this.getMockWeatherForecast(e,t)}}async getHistoricalWeather(e,t){try{if("demo_key"===this.apiKey)return this.getMockHistoricalWeather(e,t);let a=Math.floor(t.getTime()/1e3),s="".concat(this.oneCallUrl,"/timemachine?lat=").concat(e.latitude,"&lon=").concat(e.longitude,"&dt=").concat(a,"&appid=").concat(this.apiKey,"&units=metric"),r=await fetch(s);if(!r.ok)throw Error("Historical weather API error: ".concat(r.status));let i=await r.json();return this.parseHistoricalWeatherData(i,t)}catch(a){return console.error("Failed to fetch historical weather:",a),this.getMockHistoricalWeather(e,t)}}async getLocationCoordinates(e){try{if("demo_key"===this.apiKey)return this.getMockLocationCoordinates(e);let t="".concat(this.geoUrl,"/direct?q=").concat(encodeURIComponent(e),"&limit=1&appid=").concat(this.apiKey),a=await fetch(t);if(!a.ok)throw Error("Geocoding API error: ".concat(a.status));let s=await a.json();if(0===s.length)return null;let r=s[0];return{latitude:r.lat,longitude:r.lon,name:r.name,country:r.country}}catch(t){return console.error("Failed to get location coordinates:",t),this.getMockLocationCoordinates(e)}}getWeatherIconUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2x";return"https://openweathermap.org/img/wn/".concat(e,"@").concat(t,".png")}getWeatherEmoji(e){return({Clear:"☀️",Clouds:"☁️",Rain:"\uD83C\uDF27️",Drizzle:"\uD83C\uDF26️",Thunderstorm:"⛈️",Snow:"❄️",Mist:"\uD83C\uDF2B️",Fog:"\uD83C\uDF2B️",Haze:"\uD83C\uDF2B️",Dust:"\uD83D\uDCA8",Sand:"\uD83D\uDCA8",Smoke:"\uD83D\uDCA8",Squall:"\uD83C\uDF2C️",Tornado:"\uD83C\uDF2A️"})[e]||"\uD83C\uDF24️"}formatTemperature(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"C";return"".concat(Math.round(e),"\xb0").concat(t)}getWeatherDescription(e){let{temperature:t,condition:a,windSpeed:s,humidity:r}=e,i=a.description;return t>25?i+=" (Great for outdoor activities)":t<5&&(i+=" (Pack warm clothes)"),s>10&&(i+=" - Windy conditions"),r>80&&(i+=" - High humidity"),i.charAt(0).toUpperCase()+i.slice(1)}parseCurrentWeatherData(e){let t=e.main,a=e.wind,s=e.clouds,r=e.weather;return{temperature:t.temp,feelsLike:t.feels_like,humidity:t.humidity,pressure:t.pressure,windSpeed:(null==a?void 0:a.speed)||0,windDirection:(null==a?void 0:a.deg)||0,visibility:e.visibility||1e4,cloudCover:s.all,condition:r[0],timestamp:new Date().toISOString()}}parseWeatherForecastData(e,t){let a=[],s=new Map;return e.list.forEach(e=>{let t=new Date(1e3*e.dt),a=t.toISOString().split("T")[0],r=t.getHours();(!s.has(a)||Math.abs(r-12)<Math.abs(s.get(a).hour-12))&&s.set(a,{...e,hour:r})}),Array.from(s.values()).slice(0,t).forEach(e=>{var t,s,r,i;a.push({date:new Date(1e3*e.dt).toISOString().split("T")[0],temperature:e.main.temp,feelsLike:e.main.feels_like,humidity:e.main.humidity,pressure:e.main.pressure,windSpeed:(null==(t=e.wind)?void 0:t.speed)||0,windDirection:(null==(s=e.wind)?void 0:s.deg)||0,visibility:e.visibility||1e4,cloudCover:e.clouds.all,condition:e.weather[0],timestamp:new Date(1e3*e.dt).toISOString(),precipitationProbability:100*(e.pop||0),precipitationAmount:(null==(r=e.rain)?void 0:r["3h"])||(null==(i=e.snow)?void 0:i["3h"])||0})}),a}parseHistoricalWeatherData(e,t){let a=e.data[0];return{date:t.toISOString().split("T")[0],weather:{temperature:a.temp,feelsLike:a.feels_like,humidity:a.humidity,pressure:a.pressure,windSpeed:a.wind_speed,windDirection:a.wind_deg,visibility:a.visibility,cloudCover:a.clouds,uvIndex:a.uvi,condition:a.weather[0],timestamp:new Date(1e3*a.dt).toISOString()},sunrise:new Date(1e3*e.data[0].sunrise).toISOString(),sunset:new Date(1e3*e.data[0].sunset).toISOString()}}getMockCurrentWeather(){let e=["Clear","Clouds","Rain","Snow"],t=e[Math.floor(Math.random()*e.length)];return{temperature:Math.round(15+15*Math.random()),feelsLike:Math.round(15+15*Math.random()),humidity:Math.round(40+40*Math.random()),pressure:Math.round(1e3+50*Math.random()),windSpeed:Math.round(20*Math.random()),windDirection:Math.round(360*Math.random()),visibility:1e4,cloudCover:Math.round(100*Math.random()),uvIndex:Math.round(10*Math.random()),condition:{id:800,main:t,description:t.toLowerCase(),icon:"01d"},timestamp:new Date().toISOString()}}getMockWeatherForecast(e,t){let a=[],s=["Clear","Clouds","Rain","Snow"];for(let e=0;e<t;e++){let t=new Date;t.setDate(t.getDate()+e);let r=s[Math.floor(Math.random()*s.length)];a.push({date:t.toISOString().split("T")[0],temperature:Math.round(15+15*Math.random()),feelsLike:Math.round(15+15*Math.random()),humidity:Math.round(40+40*Math.random()),pressure:Math.round(1e3+50*Math.random()),windSpeed:Math.round(20*Math.random()),windDirection:Math.round(360*Math.random()),visibility:1e4,cloudCover:Math.round(100*Math.random()),condition:{id:800,main:r,description:r.toLowerCase(),icon:"01d"},timestamp:t.toISOString(),precipitationProbability:Math.round(100*Math.random()),precipitationAmount:Math.round(10*Math.random())})}return a}getMockHistoricalWeather(e,t){let a=["Clear","Clouds","Rain","Snow"],s=a[Math.floor(Math.random()*a.length)];return{date:t.toISOString().split("T")[0],weather:{temperature:Math.round(15+15*Math.random()),feelsLike:Math.round(15+15*Math.random()),humidity:Math.round(40+40*Math.random()),pressure:Math.round(1e3+50*Math.random()),windSpeed:Math.round(20*Math.random()),windDirection:Math.round(360*Math.random()),visibility:1e4,cloudCover:Math.round(100*Math.random()),uvIndex:Math.round(10*Math.random()),condition:{id:800,main:s,description:s.toLowerCase(),icon:"01d"},timestamp:t.toISOString()},sunrise:new Date(t.getTime()+216e5).toISOString(),sunset:new Date(t.getTime()+648e5).toISOString()}}getMockLocationCoordinates(e){return({paris:{latitude:48.8566,longitude:2.3522,name:"Paris",country:"FR"},london:{latitude:51.5074,longitude:-.1278,name:"London",country:"GB"},tokyo:{latitude:35.6762,longitude:139.6503,name:"Tokyo",country:"JP"},"new york":{latitude:40.7128,longitude:-74.006,name:"New York",country:"US"},sydney:{latitude:-33.8688,longitude:151.2093,name:"Sydney",country:"AU"}})[e.toLowerCase()]||{latitude:40.7128+(Math.random()-.5)*20,longitude:-74.006+(Math.random()-.5)*40,name:e,country:"Unknown"}}constructor(){this.baseUrl="https://api.openweathermap.org/data/2.5",this.geoUrl="https://api.openweathermap.org/geo/1.0",this.oneCallUrl="https://api.openweathermap.org/data/3.0/onecall",this.apiKey=O.env.NEXT_PUBLIC_OPENWEATHER_API_KEY||"demo_key"}}let q=new U;var H=a(51834),$=a(59427),B=a(32320),Z=a(35733),K=a(16253),G=a(23327),V=a(32893),Y=a(70968),X=a(34157),J=a(57828),Q=a(64269),ee=a(58415);function et(e){var t;let{latitude:a,longitude:i,takenAt:l,location:n,showInline:o=!1,compact:h=!0,className:u}=e,[x,g]=(0,r.useState)(null),[p,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(null),b=async()=>{if(a&&i&&l){v(!0),w(null);try{let e=new Date(l),t=await q.getHistoricalWeather({latitude:a,longitude:i,name:n},e);if(t){let s=y(e,a);g({weather:t.weather,sunrise:t.sunrise,sunset:t.sunset,seasonInfo:s})}}catch(e){w("Failed to fetch weather context"),console.error("Weather context error:",e)}finally{v(!1)}}};(0,r.useEffect)(()=>{a&&i&&l&&b()},[a,i,l]);let y=(e,t)=>{let a,s,r=e.getMonth();return t>0?r>=2&&r<=4?(a="Spring",s="Mild temperatures and blooming nature"):r>=5&&r<=7?(a="Summer",s="Warm weather perfect for outdoor activities"):r>=8&&r<=10?(a="Autumn",s="Cool temperatures with beautiful fall colors"):(a="Winter",s="Cold weather, cozy indoor moments"):r>=2&&r<=4?(a="Autumn",s="Cool temperatures with changing seasons"):r>=5&&r<=7?(a="Winter",s="Cooler weather, perfect for warm drinks"):r>=8&&r<=10?(a="Spring",s="Mild temperatures and new beginnings"):(a="Summer",s="Warm weather for beach and outdoor fun"),{season:a,description:s}},N=e=>{switch(e.toLowerCase()){case"clear":default:return(0,s.jsx)($.A,{className:"h-4 w-4 text-yellow-500"});case"clouds":return(0,s.jsx)(B.A,{className:"h-4 w-4 text-gray-800"});case"rain":case"drizzle":return(0,s.jsx)(Z.A,{className:"h-4 w-4 text-blue-500"});case"snow":return(0,s.jsx)(K.A,{className:"h-4 w-4 text-blue-200"})}};if(!a||!i||!l)return null;if(p)return(0,s.jsxs)(m.E,{variant:"outline",className:(0,Q.cn)("animate-pulse",u),children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded mr-1"}),"Loading weather..."]});if(j||!x)return(0,s.jsxs)(m.E,{variant:"outline",className:(0,Q.cn)("text-gray-800",u),children:[(0,s.jsx)(B.A,{className:"w-3 h-3 mr-1"}),"Weather unavailable"]});let{weather:k,sunrise:_,sunset:A,seasonInfo:S}=x,C=(t=k.temperature)>=30?{label:"Hot",color:"text-red-600"}:t>=20?{label:"Warm",color:"text-orange-600"}:t>=10?{label:"Mild",color:"text-green-600"}:t>=0?{label:"Cool",color:"text-blue-600"}:{label:"Cold",color:"text-blue-800"};return h&&!o?(0,s.jsxs)(H.lG,{children:[(0,s.jsx)(H.zM,{asChild:!0,children:(0,s.jsxs)(m.E,{variant:"outline",className:(0,Q.cn)("cursor-pointer hover:bg-gray-50",u),children:[N(k.condition.main),(0,s.jsx)("span",{className:"ml-1",children:q.formatTemperature(k.temperature)}),(0,s.jsx)("span",{className:"ml-1 text-sm opacity-75",children:q.getWeatherEmoji(k.condition.main)})]})}),(0,s.jsxs)(H.Cf,{className:"max-w-md",children:[(0,s.jsxs)(H.c7,{children:[(0,s.jsxs)(H.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"h-5 w-5"}),"Weather Context"]}),(0,s.jsx)(H.rr,{children:"Weather conditions when this photo was taken"})]}),(0,s.jsx)(ea,{weather:k,sunrise:_,sunset:A,seasonInfo:S,location:n,date:l})]})]}):o?(0,s.jsx)(c.Zp,{className:u,children:(0,s.jsx)(c.Wu,{className:"p-4",children:(0,s.jsx)(ea,{weather:k,sunrise:_,sunset:A,seasonInfo:S,location:n,date:l})})}):(0,s.jsxs)(ee.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:(0,Q.cn)("flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",u),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[N(k.condition.main),(0,s.jsx)("span",{className:(0,Q.cn)("font-medium",C.color),children:q.formatTemperature(k.temperature)})]}),(0,s.jsx)(m.E,{variant:"secondary",className:"text-sm",children:C.label}),S&&(0,s.jsxs)(m.E,{variant:"outline",className:"text-sm",children:[(e=>{switch(e.toLowerCase()){case"spring":return"\uD83C\uDF38";case"summer":return"☀️";case"autumn":case"fall":return"\uD83C\uDF42";case"winter":return"❄️";default:return"\uD83C\uDF24️"}})(S.season)," ",S.season]}),(0,s.jsxs)(H.lG,{children:[(0,s.jsx)(H.zM,{asChild:!0,children:(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,s.jsx)(G.A,{className:"h-3 w-3"})})}),(0,s.jsxs)(H.Cf,{className:"max-w-md",children:[(0,s.jsxs)(H.c7,{children:[(0,s.jsxs)(H.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"h-5 w-5"}),"Weather Context"]}),(0,s.jsx)(H.rr,{children:"Weather conditions when this photo was taken"})]}),(0,s.jsx)(ea,{weather:k,sunrise:_,sunset:A,seasonInfo:S,location:n,date:l})]})]})]})}function ea(e){let{weather:t,sunrise:a,sunset:r,seasonInfo:i,location:l,date:n}=e,o=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(e=>{switch(e.toLowerCase()){case"clear":default:return(0,s.jsx)($.A,{className:"h-8 w-8 text-yellow-500"});case"clouds":return(0,s.jsx)(B.A,{className:"h-8 w-8 text-gray-800"});case"rain":case"drizzle":return(0,s.jsx)(Z.A,{className:"h-8 w-8 text-blue-500"});case"snow":return(0,s.jsx)(K.A,{className:"h-8 w-8 text-blue-200"})}})(t.condition.main),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:q.formatTemperature(t.temperature)}),(0,s.jsx)("div",{className:"text-sm text-gray-800 capitalize",children:t.condition.description})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-800",children:[l&&(0,s.jsxs)("span",{children:[l," • "]}),new Date(n).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(V.A,{className:"h-4 w-4 text-red-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Feels like"}),(0,s.jsx)("div",{className:"text-sm text-gray-800",children:q.formatTemperature(t.feelsLike)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Y.A,{className:"h-4 w-4 text-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Humidity"}),(0,s.jsxs)("div",{className:"text-sm text-gray-800",children:[t.humidity,"%"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(X.A,{className:"h-4 w-4 text-gray-800"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Wind"}),(0,s.jsxs)("div",{className:"text-sm text-gray-800",children:[Math.round(t.windSpeed)," m/s"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(J.A,{className:"h-4 w-4 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Visibility"}),(0,s.jsxs)("div",{className:"text-sm text-gray-800",children:[Math.round(t.visibility/1e3)," km"]})]})]})]}),i&&(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-lg",children:"Spring"===i.season?"\uD83C\uDF38":"Summer"===i.season?"☀️":"Autumn"===i.season?"\uD83C\uDF42":"❄️"}),(0,s.jsx)("span",{className:"font-medium text-blue-900",children:i.season})]}),(0,s.jsx)("p",{className:"text-sm text-blue-800",children:i.description})]}),(a||r)&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[a&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)($.A,{className:"h-4 w-4 text-orange-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:"Sunrise"}),(0,s.jsx)("div",{className:"text-gray-800",children:o(a)})]})]}),r&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)($.A,{className:"h-4 w-4 text-red-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:"Sunset"}),(0,s.jsx)("div",{className:"text-gray-800",children:o(r)})]})]})]}),(0,s.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-700",children:q.getWeatherDescription(t)})})]})}var es=a(53350),er=a(18344),ei=a(99770),el=a(24342);function en(e){var t,a;let{photos:i,initialPhotoId:n,isOpen:o,onClose:c,onPhotoChange:m}=e,[h,u]=(0,r.useState)(0),[x,g]=(0,r.useState)(1),[w,b]=(0,r.useState)(0),[y,N]=(0,r.useState)(!1),[_,A]=(0,r.useState)(!0),[S,C]=(0,r.useState)(!1),[M,D]=(0,r.useState)(0),[O,U]=(0,r.useState)(null),[q,H]=(0,r.useState)(null),[$,B]=(0,r.useState)(!1),[Z,K]=(0,r.useState)(!1),G=(0,es.d)(0),V=(0,es.d)(0),Y=(0,es.d)(1),X=(0,er.s)(),J=(0,er.s)(),ea=(0,ei.G)(G,e=>{let t=Math.max(0,(Y.get()-1)*200);return Math.max(-t,Math.min(t,e))}),en=(0,ei.G)(V,e=>{let t=Math.max(0,(Y.get()-1)*150);return Math.max(-t,Math.min(t,e))}),eo=i[h];(0,r.useEffect)(()=>{if(n&&i.length>0){let e=i.findIndex(e=>e.id===n);-1!==e&&u(e)}},[n,i]),(0,r.useEffect)(()=>{g(1),b(0),A(!0),C(!1),D(0),B(!1),K(!1),G.set(0),V.set(0),Y.set(1),eo&&m&&m(eo)},[h,eo,m,G,V,Y]);let ec=(0,r.useCallback)(()=>{u(e=>(e+1)%i.length)},[i.length]),ed=(0,r.useCallback)(()=>{u(e=>(e-1+i.length)%i.length)},[i.length]),em=(0,r.useCallback)(()=>{let e=Math.min(x+.5,3);g(e),Y.set(e),X.start({scale:e,transition:{duration:.3}})},[x,Y,X]),eh=(0,r.useCallback)(()=>{let e=Math.max(x-.5,.25);g(e),Y.set(e),X.start({scale:e,transition:{duration:.3}})},[x,Y,X]),eu=(0,r.useCallback)(()=>{g(1),b(0),Y.set(1),G.set(0),V.set(0),X.start({scale:1,x:0,y:0,rotate:0,transition:{duration:.4,ease:"easeInOut"}})},[Y,G,V,X]),ex=(0,r.useCallback)(()=>{B(!0),K(x>1)},[x]),eg=(0,r.useCallback)((e,t)=>{Z&&(G.set(G.get()+t.delta.x),V.set(V.get()+t.delta.y))},[Z,G,V]),ep=(0,r.useCallback)((e,t)=>{B(!1),!Z&&(Math.abs(t.offset.x)>50||Math.abs(t.velocity.x)>300)&&(t.offset.x>0&&i.length>1?ed():t.offset.x<0&&i.length>1&&ec()),K(!1)},[Z,i.length,ec,ed]),ef=(0,r.useCallback)(()=>{1===x?(g(2),Y.set(2),X.start({scale:2,transition:{duration:.3}})):eu()},[x,Y,X,eu]);(0,r.useEffect)(()=>{if(!o)return;let e=e=>{switch(e.key){case"Escape":c();break;case"ArrowLeft":ed();break;case"ArrowRight":ec();break;case"i":case"I":N(!y);break;case"+":case"=":em();break;case"-":eh();break;case"0":eu();break;case"r":case"R":b(e=>(e+90)%360)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,c,y,ec,ed,em,eh,eu]),(0,r.useEffect)(()=>{o?J.start({opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}}):J.start({opacity:0,scale:.95,transition:{duration:.2,ease:"easeIn"}})},[o,J]);let ev=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});if(!o||!eo)return null;let ej=(0,s.jsxs)(ee.P.div,{className:"fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center",initial:{opacity:0,scale:.95},animate:J,exit:{opacity:0,scale:.95},children:[(0,s.jsx)("div",{className:"absolute inset-0 cursor-pointer",onClick:c}),(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 bg-gradient-to-b from-black/50 to-transparent",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 text-white",children:[(0,s.jsxs)("span",{className:"text-sm",children:[h+1," of ",i.length]}),eo.caption&&(0,s.jsx)("span",{className:"text-sm font-medium line-clamp-1",children:eo.caption})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",onClick:()=>N(!y),children:(0,s.jsx)(v.A,{className:"h-4 w-4"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",onClick:c,children:(0,s.jsx)(F.A,{className:"h-4 w-4"})})]})]})}),i.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.$,{variant:"ghost",size:"lg",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 w-12 h-12",onClick:ed,children:(0,s.jsx)(T.A,{className:"h-6 w-6"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"lg",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 w-12 h-12",onClick:ec,children:(0,s.jsx)(P.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)(ee.P.div,{className:"relative max-w-full max-h-full flex items-center justify-center p-16",onTouchStart:e=>{H(null),U({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchMove:e=>{H({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchEnd:()=>{if(!O||!q)return;let e=O.x-q.x,t=O.y-q.y;Math.abs(e)>Math.abs(t)?e>50&&i.length>1?ec():e<-50&&i.length>1&&ed():t>50?N(!0):t<-50&&N(!1),U(null),H(null)},animate:X,children:[_&&!S&&(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mb-4"}),(0,s.jsx)("p",{className:"text-white text-sm opacity-75",children:"Loading photo..."})]}),S?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-96 h-96 bg-gray-800 rounded-lg text-center p-8",children:[(0,s.jsx)(v.A,{className:"h-16 w-16 text-gray-700 mb-4"}),(0,s.jsx)("h3",{className:"text-white font-medium mb-2",children:"Failed to load photo"}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mb-4",children:M>0?"Still having trouble loading this image.":"This image could not be displayed."}),(0,s.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>{A(!0),C(!1),D(e=>e+1)},className:"text-white border-white hover:bg-white hover:text-black",children:"Try Again"})]}):eo.file_path?(0,s.jsx)(ee.P.div,{className:"relative w-full h-full flex items-center justify-center",drag:x>1,dragConstraints:{left:-200,right:200,top:-150,bottom:150},dragElastic:.1,onDragStart:ex,onDrag:eg,onDragEnd:ep,whileTap:{cursor:"grabbing"},style:{x:ea,y:en},children:(0,s.jsx)(ee.P.div,{className:"relative w-full h-full",onDoubleClick:ef,animate:{scale:x,rotate:w},transition:{type:"spring",stiffness:300,damping:30},children:(0,s.jsx)(l.default,{src:eo.file_path,alt:eo.caption||"Photo",fill:!0,className:(0,Q.cn)("object-contain select-none",_&&"opacity-0",x>1?"cursor-grab":"cursor-pointer",$&&"cursor-grabbing"),onLoad:()=>{A(!1),C(!1)},onError:()=>{A(!1),C(!0)},draggable:!1,priority:!0},"".concat(eo.id,"-").concat(M))})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-96 h-96 bg-gray-800 rounded-lg text-center p-8",children:[(0,s.jsx)(v.A,{className:"h-16 w-16 text-gray-700 mb-4"}),(0,s.jsx)("h3",{className:"text-white font-medium mb-2",children:"No image available"}),(0,s.jsx)("p",{className:"text-gray-700 text-sm",children:"This photo doesn't have a valid image file."})]})]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-10 p-4 bg-gradient-to-t from-black/50 to-transparent",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ee.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 transition-colors",onClick:eh,disabled:x<=.25,children:(0,s.jsx)(I.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(ee.P.span,{className:"text-white text-sm w-12 text-center font-medium",animate:{scale:[1,1.1,1]},transition:{duration:.3},children:[Math.round(100*x),"%"]},x),(0,s.jsx)(ee.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 transition-colors",onClick:em,disabled:x>=3,children:(0,s.jsx)(W.A,{className:"h-4 w-4"})})}),(0,s.jsx)(ee.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 transition-colors",onClick:()=>b(e=>(e+90)%360),children:(0,s.jsx)(ee.P.div,{animate:{rotate:w},transition:{duration:.3,ease:"easeInOut"},children:(0,s.jsx)(z.A,{className:"h-4 w-4"})})})}),(0,s.jsx)(ee.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 transition-colors",onClick:eu,children:(0,s.jsx)(L.A,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:(0,s.jsx)(R.A,{className:"h-4 w-4"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:(0,s.jsx)(j.A,{className:"h-4 w-4"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})]})}),y&&(0,s.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-80 bg-black/90 backdrop-blur-sm p-6 overflow-y-auto",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Photo Details"}),eo.caption&&(0,s.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:eo.caption})]}),(eo.taken_at||eo.camera_make||eo.camera_model)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-medium mb-3",children:"Camera Info"}),(0,s.jsxs)("div",{className:"space-y-2",children:[eo.taken_at&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-gray-700"}),(0,s.jsxs)("span",{className:"text-gray-300",children:[ev(eo.taken_at)," at ",new Date(eo.taken_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),(eo.camera_make||eo.camera_model)&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(v.A,{className:"h-4 w-4 text-gray-700"}),(0,s.jsx)("span",{className:"text-gray-300",children:[eo.camera_make,eo.camera_model].filter(Boolean).join(" ")})]}),eo.iso&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["ISO: ",eo.iso]}),eo.aperture&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["Aperture: f/",eo.aperture]}),eo.shutter_speed&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["Shutter: 1/",eo.shutter_speed,"s"]})]})]}),eo.latitude&&eo.longitude&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-medium mb-3",children:"Location"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 text-gray-700"}),(0,s.jsxs)("span",{className:"text-gray-300",children:[null==(t=eo.latitude)?void 0:t.toFixed(6),", ",null==(a=eo.longitude)?void 0:a.toFixed(6)]})]}),eo.location_name&&(0,s.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:eo.location_name})]}),eo.latitude&&eo.longitude&&eo.taken_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-medium mb-3",children:"Weather Context"}),(0,s.jsx)(et,{latitude:eo.latitude,longitude:eo.longitude,takenAt:eo.taken_at,location:eo.location_name,showInline:!0,compact:!1,className:"bg-white/10 backdrop-blur-sm border-white/20 text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-medium mb-3",children:"File Info"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-gray-300",children:[(0,s.jsxs)("div",{children:["Created: ",ev(eo.created_at)]}),eo.file_size&&(0,s.jsxs)("div",{children:["Size: ",(eo.file_size/1024/1024).toFixed(1)," MB"]})]})]})]})}),(0,s.jsx)("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 md:hidden",children:(0,s.jsx)("div",{className:"bg-black/50 backdrop-blur-sm px-3 py-1 rounded-full",children:(0,s.jsx)("span",{className:"text-white text-sm",children:"Swipe to navigate • Tap to close"})})})]});return(0,E.createPortal)((0,s.jsx)(el.N,{mode:"wait",children:o&&ej}),document.body)}var eo=a(18383),ec=a(5937),ed=a(82466);function em(e){let{photos:t,columns:a=4,showCaptions:i=!1,className:l,albumId:n,isOwner:c=!1,currentCoverPhotoUrl:d,onCoverPhotoSet:m,onPhotosReorder:h,allowReordering:u=!1}=e,[x,g]=(0,r.useState)(!1),[p,f]=(0,r.useState)(),[j,w]=(0,r.useState)(null),[b,y]=(0,r.useState)(null),[N,k]=(0,r.useState)(!1),_=(0,o.UU)(),A=e=>{e.currentTarget.style.opacity="1",w(null),y(null)},S=()=>{y(null)},C=(0,r.useCallback)(async(e,a)=>{if(e.preventDefault(),!u||!c||!j||!n||!h)return;let s=t.findIndex(e=>e.id===j.id);if(-1===s||s===a)return void y(null);k(!0);try{let e=[...t],[r]=e.splice(s,1);e.splice(a,0,r);let i=e.map((e,t)=>_.from("photos").update({order_index:t}).eq("id",e.id));await Promise.all(i);let l=e.map((e,t)=>({...e,order_index:t}));h(l)}catch(e){ed.Rm.error("Error reordering photos",{error:e})}finally{k(!1),y(null)}},[u,c,j,n,h,t,_]);return 0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-800",children:[(0,s.jsx)(v.A,{className:"h-12 w-12 mb-4 opacity-50"}),(0,s.jsx)("p",{className:"text-lg font-medium mb-2",children:"No photos yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Photos will appear here once uploaded"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:(0,Q.cn)("grid gap-4 md:gap-6",(()=>{switch(a){case 2:return"grid-cols-2";case 3:return"grid-cols-2 md:grid-cols-3";case 4:default:return"grid-cols-2 md:grid-cols-3 lg:grid-cols-4";case 5:return"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}})(),l),children:t.map((e,t)=>(0,s.jsx)(eh,{photo:e,index:t,showCaption:i,isOwner:c,isCover:d===e.file_path,allowReordering:u&&c,isReordering:N,isDraggedOver:b===t,onPhotoClick:()=>{f(e.id),g(!0)},onSetCover:m?()=>m(e.file_path):void 0,onDragStart:t=>{u&&c&&(w(e),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",t.currentTarget.outerHTML),t.currentTarget.style.opacity="0.5")},onDragEnd:A,onDragOver:e=>{u&&c&&j&&(e.preventDefault(),e.dataTransfer.dropEffect="move",y(t))},onDragLeave:S,onDrop:e=>C(e,t)},e.id))}),(0,s.jsx)(en,{photos:t,initialPhotoId:p,isOpen:x,onClose:()=>{g(!1),f(void 0)}})]})}function eh(e){let{photo:t,index:a,showCaption:i,isOwner:n,isCover:o,allowReordering:c,isReordering:d,isDraggedOver:m,onPhotoClick:h,onSetCover:u,onDragStart:x,onDragEnd:g,onDragOver:j,onDragLeave:w,onDrop:b}=e,[y,N]=(0,r.useState)(!0),[k,_]=(0,r.useState)(!1),[S,C]=(0,r.useState)(0);return(0,s.jsxs)("div",{className:(0,Q.cn)("group relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all duration-300",c&&n?"cursor-grab active:cursor-grabbing":"cursor-pointer",m&&"ring-2 ring-blue-500 ring-offset-2",d&&"pointer-events-none opacity-75",!d&&"hover:shadow-lg"),draggable:c&&n,onDragStart:x,onDragEnd:g,onDragOver:j,onDragLeave:w,onDrop:b,children:[y&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-400"})}),k?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",onClick:h,children:[(0,s.jsx)(v.A,{className:"h-8 w-8 text-gray-700 mb-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-800 mb-2",children:"Failed to load"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),N(!0),_(!1),C(e=>e+1)},className:"text-sm bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700 transition-colors",children:"Retry"})]}):t.file_path?(0,s.jsx)(l.default,{src:t.file_path,alt:t.caption||"Photo ".concat(a+1),fill:!0,className:(0,Q.cn)("w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",y&&"opacity-0"),onLoad:()=>{N(!1),_(!1)},onError:()=>{N(!1),_(!0)},onClick:h},"".concat(t.id,"-").concat(S)):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",onClick:h,children:[(0,s.jsx)(v.A,{className:"h-8 w-8 text-gray-700 mb-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-800",children:"No image"})]}),o&&(0,s.jsx)("div",{className:"absolute top-1 left-1 bg-yellow-500 text-white px-2 py-1 rounded text-sm font-medium z-20 shadow-sm",children:"Cover"}),c&&n&&!o&&(0,s.jsx)("div",{className:"absolute top-1 left-1 bg-black/80 backdrop-blur-sm text-white p-2 rounded opacity-0 group-hover:opacity-100 md:group-hover:opacity-100 hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing z-10 shadow-lg min-h-[32px] min-w-[32px] touch-manipulation",children:(0,s.jsx)(A.A,{className:"h-4 w-4"})}),c&&n&&o&&(0,s.jsx)("div",{className:"absolute top-1 left-16 bg-black/80 backdrop-blur-sm text-white p-2 rounded opacity-0 group-hover:opacity-100 md:group-hover:opacity-100 hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing z-10 shadow-lg min-h-[32px] min-w-[32px] touch-manipulation",children:(0,s.jsx)(A.A,{className:"h-4 w-4"})}),n&&u&&!o&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),u()},className:"absolute top-1 right-1 bg-blue-600 text-white px-3 py-2 rounded text-sm opacity-0 group-hover:opacity-100 md:group-hover:opacity-100 hover:opacity-100 focus:opacity-100 transition-all hover:bg-blue-700 focus:bg-blue-700 z-20 shadow-lg font-medium min-h-[32px] min-w-[70px] touch-manipulation",children:"Set Cover"}),(0,s.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-5",children:[(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-3 text-white z-10",children:[i&&t.caption&&(0,s.jsx)("p",{className:"text-sm font-medium line-clamp-2 mb-2 text-shadow-sm",children:t.caption}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[t.latitude&&t.longitude&&(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded backdrop-blur-sm",children:[(0,s.jsx)(p.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Location"})]}),t.taken_at&&(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded backdrop-blur-sm",children:[(0,s.jsx)(f.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Date"})]}),t.latitude&&t.longitude&&t.taken_at&&(0,s.jsx)(et,{latitude:t.latitude,longitude:t.longitude,takenAt:t.taken_at,compact:!0,className:"bg-black/30 backdrop-blur-sm"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eo.OT,{targetId:t.id,targetType:"photo",metadata:{photo_url:t.file_path,title:t.caption||"Photo ".concat(a+1),description:t.caption,tags:[]},className:"bg-black/30 backdrop-blur-sm hover:bg-black/50 h-7 w-7"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 opacity-75 bg-black/30 px-2 py-1 rounded backdrop-blur-sm text-sm",children:[(0,s.jsx)(ec.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"0"})]})]})]})]}),(0,s.jsxs)("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity delay-100 z-10",children:[!(n&&u&&!o)&&(0,s.jsxs)(s.Fragment,{children:[t.latitude&&t.longitude&&(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full shadow-sm",title:"Has location data"}),t.taken_at&&(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full shadow-sm",title:"Has timestamp"})]}),n&&u&&!o&&(0,s.jsxs)("div",{className:"absolute top-8 right-0 flex gap-1",children:[t.latitude&&t.longitude&&(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full shadow-sm",title:"Has location data"}),t.taken_at&&(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full shadow-sm",title:"Has timestamp"})]})]})]}),(0,s.jsx)("div",{className:"absolute bottom-2 left-2 bg-black/70 backdrop-blur-sm text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:a+1})]})}function eu(e){let{albumId:t,photoId:a,showCount:i=!0,size:l="md",className:c}=e,{isLiked:m,likesCount:h,loading:u,toggleLike:x}=function(e,t){let[a,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),{user:m}=(0,n.A)(),h=(0,o.UU)(),u=(0,r.useCallback)(async()=>{try{let a=h.from("likes").select("\n          id,\n          user_id,\n          album_id,\n          photo_id,\n          created_at\n        ").order("created_at",{ascending:!1});e&&(a=a.eq("album_id",e)),t&&(a=a.eq("photo_id",t));let{data:r,error:i}=await a;if(i)throw i;let l=await Promise.all((r||[]).map(async e=>{try{let{data:t}=await h.from("profiles").select("username, display_name, avatar_url").eq("id",e.user_id).single();return{...e,profiles:t||void 0}}catch(t){return{...e,profiles:void 0}}}));s(l)}catch(e){ed.Rm.error("Error fetching likes",{error:e})}},[h,e,t]),x=(0,r.useCallback)(async()=>{if(m)try{let a=h.from("likes").select("id").eq("user_id",m.id);e&&(a=a.eq("album_id",e)),t&&(a=a.eq("photo_id",t));let{data:s,error:r}=await a.maybeSingle();if(r)throw r;l(!!s)}catch(e){ed.Rm.error("Error checking if liked",{},e)}},[m,h,e,t]);(0,r.useEffect)(()=>{(e||t)&&(u(),x())},[e,t,m,u,x]);let g=async()=>{if(m&&!c){d(!0);try{if(i){let a=h.from("likes").delete().eq("user_id",m.id);e&&(a=a.eq("album_id",e)),t&&(a=a.eq("photo_id",t));let{error:s}=await a;if(s)throw s;l(!1)}else{let a={user_id:m.id};e&&(a.album_id=e),t&&(a.photo_id=t);let{error:s}=await h.from("likes").insert(a);if(s)throw s;l(!0)}await u()}catch(e){ed.Rm.error("Error toggling like",{},e)}finally{d(!1)}}};return{likes:a,isLiked:i,loading:c,toggleLike:g,likesCount:a.length}}(t,a),g=async e=>{e.preventDefault(),e.stopPropagation(),await x()};return(0,s.jsxs)(d.$,{variant:m?"default":"outline",size:"sm",className:(0,Q.cn)({sm:"h-8 px-2 text-sm",md:"h-9 px-3 text-sm",lg:"h-10 px-4 text-base"}[l],m?"bg-red-500 hover:bg-red-600 text-white":"hover:bg-red-50 hover:text-red-600",c),onClick:g,disabled:u,children:[(0,s.jsx)(R.A,{className:(0,Q.cn)({sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"}[l],i&&"mr-1",m&&"fill-current")}),i&&(0,s.jsx)("span",{children:h})]})}var ex=a(85897),eg=a(16522),ep=a(12181),ef=a(26983),ev=a(80501),ej=a(96583);function ew(e){let{userId:t,className:a="",size:i="default",variant:l="default",showText:n=!0}=e,{followStatus:o,follow:c,unfollow:m,loading:h}=(0,eg.k)(t),[u,x]=(0,r.useState)(!1),g=async()=>{x(!0);try{"following"===o||"pending"===o?await m(t):await c(t)}finally{x(!1)}},p=h||u,f=(()=>{switch(o){case"following":return{icon:(0,s.jsx)(ep.A,{className:"h-4 w-4"}),text:"Following",variant:"outline"};case"pending":return{icon:(0,s.jsx)(ef.A,{className:"h-4 w-4"}),text:"Pending",variant:"secondary"};case"blocked":return{icon:(0,s.jsx)(ev.A,{className:"h-4 w-4"}),text:"Blocked",variant:"secondary"};default:return{icon:(0,s.jsx)(ej.A,{className:"h-4 w-4"}),text:"Follow",variant:l}}})();return"blocked"===o?null:(0,s.jsxs)(d.$,{onClick:g,disabled:p,size:i,variant:f.variant,className:a,children:[p?(0,s.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):f.icon,n&&(0,s.jsx)("span",{className:"ml-2",children:p?"Loading...":f.text})]})}var eb=a(20508);function ey(e){var t,a;let{profile:r,showFollowButton:i=!0}=e;return(0,s.jsx)(c.Zp,{className:"max-w-md mx-auto",children:(0,s.jsxs)(c.Wu,{className:"py-12 text-center",children:[(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsxs)(ex.eu,{className:"h-20 w-20 mx-auto",children:[(0,s.jsx)(ex.BK,{src:r.avatar_url}),(0,s.jsx)(ex.q5,{className:"text-xl",children:(null==(t=r.display_name)?void 0:t[0])||(null==(a=r.username)?void 0:a[0])||(0,s.jsx)(eb.A,{})})]}),(0,s.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-gray-100 rounded-full p-2",children:(0,s.jsx)(x.A,{className:"h-4 w-4 text-gray-800"})})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.display_name||r.username}),r.display_name&&(0,s.jsxs)("p",{className:"text-gray-800 mb-4",children:["@",r.username]}),(0,s.jsxs)("div",{className:"space-y-3 text-sm text-gray-800",children:[(0,s.jsx)("p",{className:"font-medium",children:"This account is private"}),(0,s.jsxs)("p",{children:["Follow ",r.display_name||r.username," to see their adventures and travel photos"]})]}),i&&(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(ew,{userId:r.id})})]})})}var eN=a(89559),ek=a(80598);function e_(e){let{location:t,showDetails:a=!1,compact:i=!1,className:l,date:n,onRefresh:o}=e,[h,u]=(0,r.useState)(null),[x,g]=(0,r.useState)(!0),[v,j]=(0,r.useState)(null),[w,b]=(0,r.useState)(null),y=async()=>{g(!0),j(null);try{let e=null;if(n){let a=await q.getHistoricalWeather(t,n);e=(null==a?void 0:a.weather)||null}else e=await q.getCurrentWeather(t);u(e),b(new Date)}catch(e){j("Failed to fetch weather data"),console.error("Weather fetch error:",e)}finally{g(!1)}};(0,r.useEffect)(()=>{t.latitude&&t.longitude&&y()},[t,n]);let N=()=>{y(),null==o||o()},k=e=>{switch(e.toLowerCase()){case"clear":default:return(0,s.jsx)($.A,{className:"h-5 w-5 text-yellow-500"});case"clouds":return(0,s.jsx)(B.A,{className:"h-5 w-5 text-gray-800"});case"rain":case"drizzle":return(0,s.jsx)(Z.A,{className:"h-5 w-5 text-blue-500"});case"snow":return(0,s.jsx)(K.A,{className:"h-5 w-5 text-blue-200"})}},_=e=>e>=30?"text-red-500":e>=20?"text-orange-500":e>=10?"text-green-500":e>=0?"text-blue-500":"text-blue-700";return x?(0,s.jsx)(c.Zp,{className:(0,Q.cn)("animate-pulse",l),children:(0,s.jsx)(c.Wu,{className:(0,Q.cn)("p-4",i&&"p-3"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})})}):v?(0,s.jsx)(c.Zp,{className:(0,Q.cn)("border-red-200 bg-red-50",l),children:(0,s.jsx)(c.Wu,{className:(0,Q.cn)("p-4",i&&"p-3"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-red-600 text-sm",children:v}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",onClick:N,children:(0,s.jsx)(eN.A,{className:"h-4 w-4"})})]})})}):h?i?(0,s.jsxs)(ee.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:(0,Q.cn)("flex items-center gap-2 p-2 bg-white rounded-lg shadow-sm border",l),children:[k(h.condition.main),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:(0,Q.cn)("font-semibold",_(h.temperature)),children:q.formatTemperature(h.temperature)}),(0,s.jsx)("span",{className:"text-gray-800 ml-1 hidden sm:inline",children:h.condition.description})]}),q.getWeatherEmoji(h.condition.main)&&(0,s.jsx)("span",{className:"text-lg",children:q.getWeatherEmoji(h.condition.main)})]}):(0,s.jsxs)(c.Zp,{className:l,children:[(0,s.jsxs)(c.aR,{className:"pb-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(c.ZB,{className:"flex items-center gap-2 text-sm font-medium",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),t.name||"".concat(t.latitude.toFixed(2),", ").concat(t.longitude.toFixed(2)),n&&(0,s.jsxs)(m.E,{variant:"outline",className:"ml-2",children:[(0,s.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Historical"]})]}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",onClick:N,children:(0,s.jsx)(eN.A,{className:"h-4 w-4"})})]}),w&&!n&&(0,s.jsxs)("p",{className:"text-sm text-gray-800",children:["Updated ",w.toLocaleTimeString()]})]}),(0,s.jsxs)(c.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl",children:k(h.condition.main)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:(0,Q.cn)("text-2xl font-bold",_(h.temperature)),children:q.formatTemperature(h.temperature)}),(0,s.jsx)("div",{className:"text-sm text-gray-800 capitalize",children:h.condition.description}),(0,s.jsxs)("div",{className:"text-sm text-gray-800",children:["Feels like ",q.formatTemperature(h.feelsLike)]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-3xl mb-1",children:q.getWeatherEmoji(h.condition.main)}),(0,s.jsx)(m.E,{variant:"secondary",className:"text-sm",children:h.condition.main})]})]}),a&&(0,s.jsxs)(ee.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Y.A,{className:"h-4 w-4 text-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:[h.humidity,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-800",children:"Humidity"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(X.A,{className:"h-4 w-4 text-gray-800"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:[Math.round(h.windSpeed)," m/s"]}),(0,s.jsx)("div",{className:"text-sm text-gray-800",children:"Wind Speed"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ek.A,{className:"h-4 w-4 text-purple-500"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:[h.pressure," hPa"]}),(0,s.jsx)("div",{className:"text-sm text-gray-800",children:"Pressure"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(J.A,{className:"h-4 w-4 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:[Math.round(h.visibility/1e3)," km"]}),(0,s.jsx)("div",{className:"text-sm text-gray-800",children:"Visibility"})]})]}),void 0!==h.uvIndex&&(0,s.jsxs)("div",{className:"flex items-center gap-2 col-span-2",children:[(0,s.jsx)($.A,{className:"h-4 w-4 text-yellow-500"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:["UV Index: ",h.uvIndex]}),(0,s.jsx)("div",{className:"text-sm text-gray-800",children:h.uvIndex<=2?"Low":h.uvIndex<=5?"Moderate":h.uvIndex<=7?"High":h.uvIndex<=10?"Very High":"Extreme"})]})]})]}),(0,s.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,s.jsx)("p",{className:"text-sm text-blue-800",children:q.getWeatherDescription(h)})})]})]}):(0,s.jsx)(c.Zp,{className:(0,Q.cn)("border-gray-200",l),children:(0,s.jsx)(c.Wu,{className:(0,Q.cn)("p-4",i&&"p-3"),children:(0,s.jsx)("div",{className:"text-center text-gray-800 text-sm",children:"No weather data available"})})})}var eA=a(57268);let eS=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:i=!0,...l}=e;return(0,s.jsx)(eA.b,{ref:t,decorative:i,orientation:r,className:(0,Q.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...l})});eS.displayName=eA.b.displayName;var eC=a(52056),eM=a(1524);function eD(e){let{location:t,days:a=5,detailed:i=!1,className:l,onDaySelect:n}=e,[o,m]=(0,r.useState)([]),[h,u]=(0,r.useState)(!0),[x,g]=(0,r.useState)(null),[p,v]=(0,r.useState)(null),j=async()=>{u(!0),g(null);try{let e=await q.getWeatherForecast(t,a);m(e)}catch(e){g("Failed to fetch weather forecast"),console.error("Weather forecast error:",e)}finally{u(!1)}};(0,r.useEffect)(()=>{t.latitude&&t.longitude&&j()},[t,a]);let w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"md",a={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"}[t];switch(e.toLowerCase()){case"clear":default:return(0,s.jsx)($.A,{className:(0,Q.cn)(a,"text-yellow-500")});case"clouds":return(0,s.jsx)(B.A,{className:(0,Q.cn)(a,"text-gray-800")});case"rain":case"drizzle":return(0,s.jsx)(Z.A,{className:(0,Q.cn)(a,"text-blue-500")});case"snow":return(0,s.jsx)(K.A,{className:(0,Q.cn)(a,"text-blue-200")})}},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short",a=new Date(e),s=new Date,r=new Date(s);return(r.setDate(r.getDate()+1),a.toDateString()===s.toDateString())?"Today":a.toDateString()===r.toDateString()?"Tomorrow":"short"===t?a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})};return h?(0,s.jsxs)(c.Zp,{className:l,children:[(0,s.jsx)(c.aR,{children:(0,s.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"h-5 w-5"}),"Weather Forecast"]})}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)("div",{className:"space-y-4",children:[...Array(Math.min(a,5))].map((e,t)=>(0,s.jsxs)("div",{className:"animate-pulse flex items-center gap-4 p-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-12"})]},t))})})]}):x?(0,s.jsxs)(c.Zp,{className:(0,Q.cn)("border-red-200 bg-red-50",l),children:[(0,s.jsx)(c.aR,{children:(0,s.jsxs)(c.ZB,{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2 text-red-600",children:[(0,s.jsx)(eC.A,{className:"h-5 w-5"}),"Weather Forecast"]}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",onClick:j,children:(0,s.jsx)(eN.A,{className:"h-4 w-4"})})]})}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)("p",{className:"text-red-600",children:x})})]}):0===o.length?(0,s.jsx)(c.Zp,{className:l,children:(0,s.jsx)(c.Wu,{className:"p-6 text-center text-gray-800",children:"No forecast data available"})}):(0,s.jsxs)(c.Zp,{className:l,children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"h-5 w-5"}),a,"-Day Weather Forecast"]}),(0,s.jsx)(d.$,{variant:"ghost",size:"sm",onClick:j,children:(0,s.jsx)(eN.A,{className:"h-4 w-4"})})]}),t.name&&(0,s.jsxs)("p",{className:"text-sm text-gray-800",children:[t.name,", ",t.country]})]}),(0,s.jsxs)(c.Wu,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>{let a=(e=>{let{temperature:t,condition:a,precipitationProbability:s,windSpeed:r}=e;return s>70?{level:"warning",message:"High chance of rain - pack an umbrella!"}:t>30?{level:"info",message:"Hot weather - stay hydrated and wear sunscreen"}:t<0?{level:"warning",message:"Freezing temperatures - dress warmly"}:r>15?{level:"caution",message:"Windy conditions expected"}:"clear"===a.main.toLowerCase()&&t>=20&&t<=28?{level:"good",message:"Perfect weather for sightseeing!"}:{level:"neutral",message:"Check conditions before heading out"}})(e),r=p===t;return(0,s.jsxs)(ee.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},className:(0,Q.cn)("p-4 rounded-lg border cursor-pointer transition-all duration-200",r?"border-blue-300 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"),onClick:()=>{v(t),null==n||n(e)},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:w(e.condition.main)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:b(e.date)}),(0,s.jsx)("div",{className:"text-sm text-gray-800 capitalize",children:e.condition.description})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:q.formatTemperature(e.temperature)}),(0,s.jsx)(P.A,{className:"h-4 w-4 text-gray-700"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-800 mt-1",children:[e.precipitationProbability>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Y.A,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[Math.round(e.precipitationProbability),"%"]})]}),e.windSpeed>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(X.A,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[Math.round(e.windSpeed),"m/s"]})]})]})]})]}),(0,s.jsx)("div",{className:(0,Q.cn)("mt-3 p-2 rounded text-sm border",(e=>{switch(e){case"good":return"text-green-700 bg-green-100 border-green-200";case"warning":return"text-red-700 bg-red-100 border-red-200";case"caution":return"text-yellow-700 bg-yellow-100 border-yellow-200";case"info":return"text-blue-700 bg-blue-100 border-blue-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}})(a.level)),children:a.message}),i&&r&&(0,s.jsx)(ee.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-800",children:"Feels like"}),(0,s.jsx)("div",{className:"font-medium",children:q.formatTemperature(e.feelsLike)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-800",children:"Humidity"}),(0,s.jsxs)("div",{className:"font-medium",children:[e.humidity,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-800",children:"Pressure"}),(0,s.jsxs)("div",{className:"font-medium",children:[e.pressure," hPa"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-800",children:"Clouds"}),(0,s.jsxs)("div",{className:"font-medium",children:[e.cloudCover,"%"]})]})]})})]},e.date)})}),(0,s.jsx)(eS,{}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)(eM.A,{className:"h-4 w-4"}),"Travel Summary"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-800 space-y-1",children:[(0,s.jsxs)("p",{children:["Temperature range: ",q.formatTemperature(Math.min(...o.map(e=>e.temperature)))," to ",q.formatTemperature(Math.max(...o.map(e=>e.temperature)))]}),(0,s.jsxs)("p",{children:["Best day for outdoor activities: ",b(o.reduce((e,t)=>t.temperature>e.temperature&&t.precipitationProbability<e.precipitationProbability&&"clear"===t.condition.main.toLowerCase()?t:e).date)]}),o.some(e=>e.precipitationProbability>50)&&(0,s.jsxs)("p",{className:"text-yellow-700",children:["⚠️ Rain expected on ",o.filter(e=>e.precipitationProbability>50).length," day(s)"]})]})]})]})]})}var eE=a(72625);function eF(){var e,t;let a=(0,i.useParams)(),M=(0,i.useRouter)(),{user:E}=(0,n.A)(),[F,T]=(0,r.useState)(null),[P,I]=(0,r.useState)([]),[W,z]=(0,r.useState)(!0),[L,R]=(0,r.useState)(null),[O,U]=(0,r.useState)(!1),[q,H]=(0,r.useState)(0),[$,B]=(0,r.useState)(!1),[Z,K]=(0,r.useState)([]),[G,V]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(!1),J=(0,o.UU)(),{getFollowStatus:Q}=(0,eg.k)(),ee=(0,r.useCallback)(async()=>{try{z(!0),R(null);let{data:e,error:t}=await J.from("albums").select("\n          *,\n          user:profiles(username, display_name, avatar_url)\n        ").eq("id",a.id).single();if(t)throw t;let s=e.user_id===(null==E?void 0:E.id),r=e.user;if(!s){if((null==r?void 0:r.privacy_level)==="private"){let t=await Q(e.user_id);if("following"!==t){X(!0),T(e),z(!1);return}}if("private"===e.visibility)throw Error("You do not have permission to view this album");if("friends"===e.visibility){let t=await Q(e.user_id);if("following"!==t)throw Error("This album is only visible to followers")}if("followers"===e.visibility){let t=await Q(e.user_id);if("following"!==t)throw Error("This album is only visible to followers")}}T(e),X(!1),e.favorite_photo_urls&&K(e.favorite_photo_urls);let{data:i,error:l}=await J.from("photos").select("*").eq("album_id",a.id).order("order_index",{ascending:!0});if(l)throw l;I(i||[])}catch(t){ed.Rm.error("Failed to fetch album details",{component:"AlbumViewPage",action:"fetchAlbum",albumId:Array.isArray(a.id)?a.id[0]:a.id,userId:null==E?void 0:E.id},t instanceof Error?t:Error(String(t)));let e="Failed to fetch album";t instanceof Error&&(e=t.message.includes("permission")?"You do not have permission to view this album":t.message.includes("network")||t.message.includes("fetch")?"Network error. Please check your connection and try again.":t.message),R(e)}finally{z(!1)}},[a.id,null==E?void 0:E.id,J]);(0,r.useEffect)(()=>{a.id&&E&&ee()},[a.id,E,ee]);let et=async()=>{if(F&&window.confirm("Are you sure you want to delete this album? This action cannot be undone."))try{U(!0);let{error:e}=await J.from("albums").delete().eq("id",F.id);if(e)throw e;M.push("/albums")}catch(e){ed.Rm.error("Failed to delete album",{component:"AlbumViewPage",action:"deleteAlbum",albumId:F.id,userId:null==E?void 0:E.id},e instanceof Error?e:Error(String(e))),R(e instanceof Error?e.message:"Failed to delete album")}finally{U(!1)}},ea=async e=>{if(F)try{let{error:t}=await J.from("albums").update({cover_photo_url:e}).eq("id",F.id);if(t)throw t;T(t=>t?{...t,cover_photo_url:e}:null)}catch(a){ed.Rm.error("Failed to set cover photo",{component:"AlbumViewPage",action:"setCoverPhoto",albumId:F.id,photoUrl:e,userId:null==E?void 0:E.id},a instanceof Error?a:Error(String(a)));let t=a instanceof Error?a.message:"Failed to set cover photo";R("Cover photo update failed: ".concat(t)),setTimeout(()=>{R(null)},5e3)}},es=async()=>{if(F)try{V(!0);let{error:e}=await J.from("albums").update({favorite_photo_urls:Z}).eq("id",F.id);if(e)throw e;T(e=>e?{...e,favorite_photo_urls:Z}:null),B(!1)}catch(e){ed.Rm.error("Failed to save favorite photos",{component:"AlbumViewPage",action:"saveFavorites",albumId:F.id,userId:null==E?void 0:E.id},e instanceof Error?e:Error(String(e))),R(e instanceof Error?e.message:"Failed to save favorite photos")}finally{V(!1)}},er=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ei=(null==F?void 0:F.user_id)===(null==E?void 0:E.id);return W?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-4"}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-48"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(8)].map((e,t)=>(0,s.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},t))})]}):L?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)(D(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"Back to Albums"]}),(0,s.jsx)(c.Zp,{className:"border-red-200 bg-red-50",children:(0,s.jsx)(c.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-red-600 font-medium",children:"Failed to load album"}),(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:L}),(0,s.jsxs)("div",{className:"mt-4 space-x-2",children:[(0,s.jsx)(d.$,{variant:"outline",onClick:()=>{H(e=>e+1),ee()},disabled:W,children:W?"Retrying...":q>0?"Try Again (".concat(q+1,")"):"Try Again"}),(0,s.jsx)(D(),{href:"/albums",children:(0,s.jsx)(d.$,{variant:"outline",children:"Back to Albums"})})]})]})})})]}):F?Y&&F.user?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)(D(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,s.jsx)(ey,{profile:F.user,showFollowButton:!0})]}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(D(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"Back to Albums"]}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 leading-tight break-words",children:F.title}),(0,s.jsxs)(m.E,{variant:"public"===F.visibility?"default":"secondary",className:"flex items-center gap-1 w-fit",children:[(e=>{switch(e){case"public":return(0,s.jsx)(h.A,{className:"h-4 w-4 text-green-600"});case"followers":return(0,s.jsx)(u.A,{className:"h-4 w-4 text-purple-600"});case"friends":return(0,s.jsx)(u.A,{className:"h-4 w-4 text-blue-600"});case"private":return(0,s.jsx)(x.A,{className:"h-4 w-4 text-gray-800"});default:return(0,s.jsx)(h.A,{className:"h-4 w-4 text-gray-800"})}})(F.visibility),(0,s.jsx)("span",{className:"capitalize",children:F.visibility})]})]}),F.description&&(0,s.jsx)("p",{className:"text-gray-800 text-base md:text-lg mb-6 leading-relaxed",children:F.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-800 mb-6",children:[F.location_name&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:F.location_name})]}),(F.start_date||F.end_date)&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(f.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:F.start_date&&F.end_date?(e=F.start_date)===(t=F.end_date)?er(e):"".concat(er(e)," - ").concat(er(t)):F.start_date?er(F.start_date):F.end_date&&er(F.end_date)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[P.length," photo",1===P.length?"":"s"]})]})]}),F.tags&&F.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:F.tags.map((e,t)=>(0,s.jsx)(m.E,{variant:"outline",children:e},t))}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-6 pt-4 border-t border-gray-200",children:[(0,s.jsx)(eu,{albumId:F.id}),(0,s.jsxs)(d.$,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm",onClick:async()=>{try{await eE.w.share({title:F.title,text:F.description||"Check out this album: ".concat(F.title),url:window.location.href})}catch(e){console.error("Share failed:",e)}},children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-1"}),"Share"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[ei&&(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)(D(),{href:"/albums/".concat(F.id,"/edit"),children:(0,s.jsxs)(d.$,{variant:"outline",size:"sm",className:"min-h-[44px] w-full sm:w-auto",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Edit Album"]})}),P.length>0&&(0,s.jsxs)(d.$,{variant:"outline",size:"sm",className:"min-h-[44px] w-full sm:w-auto",onClick:()=>B(!0),disabled:$,children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Select Favorites"]}),(0,s.jsx)(D(),{href:"/albums/".concat(F.id,"/upload"),children:(0,s.jsxs)(d.$,{size:"sm",className:"min-h-[44px] w-full sm:w-auto",children:[(0,s.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Add Photos"]})})]}),(0,s.jsxs)(C.rI,{children:[(0,s.jsx)(C.ty,{asChild:!0,children:(0,s.jsxs)(d.$,{variant:"outline",size:"sm",className:"min-h-[44px] w-full sm:w-auto",children:[(0,s.jsx)(N.A,{className:"h-4 w-4 mr-2 sm:mr-0"}),(0,s.jsx)("span",{className:"sm:hidden",children:"More Options"})]})}),(0,s.jsxs)(C.SQ,{align:"end",children:[(0,s.jsxs)(C._2,{children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Share Album"})]}),(0,s.jsxs)(C._2,{children:[(0,s.jsx)(k.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Download All"})]}),ei&&(0,s.jsxs)(C._2,{className:"text-red-600",onClick:et,disabled:O,children:[(0,s.jsx)(_.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:O?"Deleting...":"Delete Album"})]})]})]})]})]})]}),F.latitude&&F.longitude&&(0,s.jsxs)("div",{className:"space-y-6",children:[F.start_date&&(0,s.jsx)(e_,{location:{latitude:F.latitude,longitude:F.longitude,name:F.location_name||void 0},date:new Date(F.start_date),showDetails:!0,className:"bg-gradient-to-br from-blue-50 to-indigo-100 border-blue-200"}),F.start_date&&new Date(F.start_date)>new Date&&(0,s.jsx)(eD,{location:{latitude:F.latitude,longitude:F.longitude,name:F.location_name||void 0},days:7,detailed:!0,className:"bg-gradient-to-br from-green-50 to-emerald-100 border-green-200"})]}),P.length>1&&ei&&!$&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 md:p-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"h-5 w-5 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-blue-900",children:"Reorder Photos"})]}),(0,s.jsx)("span",{className:"text-sm text-blue-700 leading-relaxed",children:"Drag and drop photos to reorder them in your album"})]})}),$&&(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 md:p-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"h-5 w-5 text-yellow-600"}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-yellow-900",children:["Select Favorites (",Z.length,"/3)"]})]}),(0,s.jsx)("span",{className:"text-sm text-yellow-700 leading-relaxed",children:"Choose up to 3 photos to show in your globe pin tooltip"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>{K((null==F?void 0:F.favorite_photo_urls)||[]),B(!1)},disabled:G,children:"Cancel"}),(0,s.jsx)(d.$,{size:"sm",onClick:es,disabled:G||0===Z.length,children:G?"Saving...":"Save Favorites"})]})]})}),0===P.length?(0,s.jsx)(c.Zp,{children:(0,s.jsx)(c.Wu,{className:"py-16",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(v.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-700"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No photos yet"}),(0,s.jsx)("p",{className:"text-gray-800 mb-6",children:ei?"Start uploading photos to bring your album to life.":"This album doesn't have any photos yet."}),ei&&(0,s.jsx)(D(),{href:"/albums/".concat(F.id,"/upload"),children:(0,s.jsxs)(d.$,{children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Upload Photos"]})})]})})}):$?(0,s.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:P.map(e=>(0,s.jsxs)("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>{var t;return t=e.file_path,void(Z.includes(t)?K(e=>e.filter(e=>e!==t)):Z.length<3&&K(e=>[...e,t]))},children:[(0,s.jsx)(l.default,{src:e.file_path,alt:e.caption||"Photo",fill:!0,className:"object-cover rounded-lg transition-all duration-200 ".concat(Z.includes(e.file_path)?"ring-4 ring-yellow-500 opacity-75":Z.length>=3?"opacity-40 cursor-not-allowed":"hover:opacity-80")}),Z.includes(e.file_path)&&(0,s.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(S.A,{className:"h-4 w-4 text-white"})}),Z.includes(e.file_path)&&(0,s.jsx)("div",{className:"absolute top-2 left-2 w-6 h-6 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:Z.indexOf(e.file_path)+1}),!Z.includes(e.file_path)&&Z.length>=3&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-50 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:"Max 3 selected"})})]},e.id))})}):(0,s.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,s.jsx)(em,{photos:P,columns:5,showCaptions:!0,albumId:F.id,isOwner:ei,currentCoverPhotoUrl:F.cover_photo_url,onCoverPhotoSet:ea,onPhotosReorder:e=>{I(e)},allowReordering:!0})}),(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(c.ZB,{className:"text-lg",children:"Album Details"})}),(0,s.jsxs)(c.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Created:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-800",children:er(F.created_at)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Last updated:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-800",children:er(F.updated_at)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Photos:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-800",children:P.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Visibility:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-800 capitalize",children:F.visibility})]})]}),F.user&&(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Created by:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-800",children:F.user.display_name||F.user.username})]})]})]})]}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)(D(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"Back to Albums"]}),(0,s.jsx)(c.Zp,{children:(0,s.jsx)(c.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-gray-800",children:"Album not found"}),(0,s.jsx)(D(),{href:"/albums",className:"mt-4 inline-block",children:(0,s.jsx)(d.$,{variant:"outline",children:"Back to Albums"})})]})})})]})}}},e=>{e.O(0,[4545,7559,2619,2738,8415,306,264,8868,6769,7064,6980,9953,6869,9409,8441,1255,7358],()=>e(e.s=22369)),_N_E=e.O()}]);