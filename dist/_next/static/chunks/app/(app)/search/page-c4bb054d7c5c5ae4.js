(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7712],{3534:(e,t,a)=>{Promise.resolve().then(a.bind(a,41478))},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>p,gC:()=>f,l6:()=>d,yv:()=>u});var s=a(95155),l=a(12115),i=a(94304),r=a(24033),n=a(12108),c=a(5917),o=a(64269);let d=i.bL;i.YJ;let u=i.WT,m=l.forwardRef((e,t)=>{let{className:a,children:l,...n}=e;return(0,s.jsxs)(i.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[l,(0,s.jsx)(i.In,{asChild:!0,children:(0,s.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=i.l9.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=i.PP.displayName;let x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(r.A,{className:"h-4 w-4"})})});x.displayName=i.wn.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,position:r="popper",...n}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsxs)(i.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...n,children:[(0,s.jsx)(h,{}),(0,s.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(x,{})]})})});f.displayName=i.UC.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=i.JU.displayName;let p=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(i.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})}),(0,s.jsx)(i.p4,{children:l})]})});p.displayName=i.q7.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=i.wv.displayName},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155);a(12115);var l=a(83101),i=a(64269);let r=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...l}=e;return(0,s.jsx)("div",{className:(0,i.cn)(r({variant:a}),t),...l})}},13406:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>c,av:()=>o,j7:()=>n,tU:()=>r});var s=a(95155);a(12115);var l=a(25667),i=a(64269);function r(e){let{className:t,...a}=e;return(0,s.jsx)(l.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)(l.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(l.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(l.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...a})}},41478:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var s=a(95155),l=a(12115),i=a(96648),r=a(43691),n=a(86948),c=a(3998),o=a(65142),d=a(11647),u=a(13406),m=a(11186),h=a(51834),x=a(86651),f=a(66630),p=a(19402),g=a(71360),j=a(21873),y=a(65229),v=a(16485),b=a(54485),N=a(95664),w=a(1524),C=a(39068),S=a(95740),k=a(64269),A=a(24342),q=a(58415),R=a(82466),L=a(15239);let _={query:"",dateRange:{},locations:[],tags:[],albumIds:[],photoTypes:[],sortBy:"relevance",hasLocation:null,hasPhotos:null,visibility:"all"};function z(e){let{onResultSelect:t,initialQuery:a="",className:C}=e,{user:S}=(0,r.A)(),L=(0,i.U)(),[z,P]=(0,l.useState)({..._,query:a}),[D,O]=(0,l.useState)([]),[B,E]=(0,l.useState)(!1),[I,T]=(0,l.useState)([]),[$,F]=(0,l.useState)([]),[Z,J]=(0,l.useState)([]),[V,M]=(0,l.useState)(!1),[W,G]=(0,l.useState)(!1),[X,Q]=(0,l.useState)(""),Y=["Paris","Summer 2024","Beach","Mountains","Food","Sunset","Architecture"];(0,l.useEffect)(()=>{(async()=>{if(S)try{let e=localStorage.getItem("search-history-".concat(S.id));e&&T(JSON.parse(e));let t="saved-searches-".concat(S.id),a=localStorage.getItem(t);a&&F(JSON.parse(a))}catch(e){R.Rm.error("Failed to load search data",{error:e})}})()},[S]),(0,l.useEffect)(()=>{z.query.length>1?J([...Y.filter(e=>e.toLowerCase().includes(z.query.toLowerCase())),...I.filter(e=>e.toLowerCase().includes(z.query.toLowerCase())&&e!==z.query)].slice(0,5)):J([])},[z.query,I]);let H=(0,l.useCallback)(async()=>{if(!z.query.trim()&&Object.values(z).every(e=>""===e||null===e||Array.isArray(e)&&0===e.length||"all"===e||"relevance"===e))return void O([]);E(!0);try{if(z.query.trim()){let e=[z.query,...I.filter(e=>e!==z.query)].slice(0,10);T(e),localStorage.setItem("search-history-".concat(null==S?void 0:S.id),JSON.stringify(e))}let e=await K(z),t=await ee(z),a=[...e,...t].sort((e,t)=>"relevance"===z.sortBy?t.relevanceScore-e.relevanceScore:"date-desc"===z.sortBy?new Date(t.date||"").getTime()-new Date(e.date||"").getTime():"date-asc"===z.sortBy?new Date(e.date||"").getTime()-new Date(t.date||"").getTime():"name-asc"===z.sortBy?e.title.localeCompare(t.title):t.title.localeCompare(e.title));O(a)}catch(e){R.Rm.error("Search failed",{error:e,filters:z})}finally{E(!1)}},[z,I,S]),K=async e=>{let t=L.from("albums").select("\n        id, title, description, cover_photo_url, location_name,\n        created_at, start_date, end_date, visibility, tags\n      ").eq("user_id",null==S?void 0:S.id);if(e.query&&(t=t.or("title.ilike.%".concat(e.query,"%,description.ilike.%").concat(e.query,"%,location_name.ilike.%").concat(e.query,"%"))),e.dateRange.from&&(t=t.gte("start_date",e.dateRange.from)),e.dateRange.to&&(t=t.lte("end_date",e.dateRange.to)),e.locations.length>0){let a=e.locations.map(e=>"location_name.ilike.%".concat(e,"%")).join(",");t=t.or(a)}"all"!==e.visibility&&(t=t.eq("visibility",e.visibility));let{data:a}=await t.limit(20);return(a||[]).map(t=>({id:t.id,type:"album",title:t.title,description:t.description,imageUrl:t.cover_photo_url,location:t.location_name,date:t.start_date||t.created_at,matchReason:et(t,e),relevanceScore:es(t,e)}))},ee=async e=>{let t=L.from("photos").select("\n        id, caption, file_path, city, country, taken_at, created_at,\n        album_id, albums!inner(title, user_id)\n      ").eq("albums.user_id",null==S?void 0:S.id);e.query&&(t=t.or("caption.ilike.%".concat(e.query,"%,city.ilike.%").concat(e.query,"%,country.ilike.%").concat(e.query,"%"))),e.hasLocation&&(t=t.not("latitude","is",null));let{data:a}=await t.limit(20);return(a||[]).map(t=>{var a;return{id:t.id,type:"photo",title:t.caption||"Untitled Photo",description:"From album: ".concat((null==(a=t.albums[0])?void 0:a.title)||"Unknown Album"),imageUrl:t.file_path,location:t.city&&t.country?"".concat(t.city,", ").concat(t.country):t.city||t.country,date:t.taken_at||t.created_at,matchReason:ea(t,e),relevanceScore:el(t,e)}})},et=(e,t)=>{var a,s;let l=[],i=t.query.toLowerCase();return e.title.toLowerCase().includes(i)&&l.push("Title match"),(null==(a=e.description)?void 0:a.toLowerCase().includes(i))&&l.push("Description match"),(null==(s=e.location_name)?void 0:s.toLowerCase().includes(i))&&l.push("Location match"),l},ea=(e,t)=>{var a,s,l;let i=[],r=t.query.toLowerCase();return(null==(a=e.caption)?void 0:a.toLowerCase().includes(r))&&i.push("Caption match"),(null==(s=e.city)?void 0:s.toLowerCase().includes(r))&&i.push("City match"),(null==(l=e.country)?void 0:l.toLowerCase().includes(r))&&i.push("Country match"),i},es=(e,t)=>{var a,s;let l=0,i=t.query.toLowerCase();return e.title.toLowerCase().includes(i)&&(l+=10),e.title.toLowerCase().startsWith(i)&&(l+=5),(null==(a=e.description)?void 0:a.toLowerCase().includes(i))&&(l+=5),(null==(s=e.location_name)?void 0:s.toLowerCase().includes(i))&&(l+=7),l+=.1*Math.max(0,30-(Date.now()-new Date(e.created_at).getTime())/864e5)},el=(e,t)=>{var a,s,l;let i=0,r=t.query.toLowerCase();return(null==(a=e.caption)?void 0:a.toLowerCase().includes(r))&&(i+=8),(null==(s=e.city)?void 0:s.toLowerCase().includes(r))&&(i+=6),(null==(l=e.country)?void 0:l.toLowerCase().includes(r))&&(i+=4),i};(0,l.useEffect)(()=>{let e=setTimeout(()=>{(z.query||Object.values(z).some(e=>e!==_[e]&&!(Array.isArray(e)&&0===e.length)))&&H()},300);return()=>clearTimeout(e)},[z,H]);let ei=(e,t)=>{P(a=>({...a,[e]:t}))},er=async()=>{if(!X.trim()||!S)return;let e=[...$,{id:Date.now().toString(),name:X.trim(),filters:z,createdAt:new Date().toISOString(),lastUsed:new Date().toISOString(),useCount:1}];F(e),localStorage.setItem("saved-searches-".concat(S.id),JSON.stringify(e)),Q(""),G(!1)};return(0,s.jsxs)("div",{className:(0,k.cn)("space-y-6",C),children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-5 w-5"}),"Advanced Search"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>M(!V),className:(0,k.cn)(V&&"bg-blue-50 border-blue-200"),children:[(0,s.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Filters"]}),$.length>0&&(0,s.jsxs)(h.lG,{children:[(0,s.jsx)(h.zM,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Saved"]})}),(0,s.jsxs)(h.Cf,{children:[(0,s.jsxs)(h.c7,{children:[(0,s.jsx)(h.L3,{children:"Saved Searches"}),(0,s.jsx)(h.rr,{children:"Quickly access your frequently used searches"})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:$.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-800",children:["Used ",e.useCount," times, last used ",new Date(e.lastUsed).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>(e=>{P(e.filters);let t=$.map(t=>t.id===e.id?{...t,lastUsed:new Date().toISOString(),useCount:t.useCount+1}:t);F(t),localStorage.setItem("saved-searches-".concat(null==S?void 0:S.id),JSON.stringify(t))})(e),children:"Load"}),(0,s.jsx)(c.$,{size:"sm",variant:"ghost",onClick:()=>(e=>{let t=$.filter(t=>t.id!==e);F(t),localStorage.setItem("saved-searches-".concat(null==S?void 0:S.id),JSON.stringify(t))})(e.id),children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})]})]},e.id))})]})]})]})]})}),(0,s.jsxs)(n.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-700"}),(0,s.jsx)(o.p,{value:z.query,onChange:e=>ei("query",e.target.value),placeholder:"Search albums, photos, locations...",className:"pl-10 pr-4"}),z.query&&Z.length>0&&(0,s.jsx)(n.Zp,{className:"absolute top-full left-0 right-0 z-50 mt-1",children:(0,s.jsx)(n.Wu,{className:"p-2",children:Z.map(e=>(0,s.jsxs)("button",{className:"w-full text-left p-2 hover:bg-gray-100 rounded text-sm",onClick:()=>ei("query",e),children:[(0,s.jsx)(x.A,{className:"h-3 w-3 inline mr-2"}),e]},e))})})]}),(z.locations.length>0||z.tags.length>0||z.dateRange.from)&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[z.locations.map(e=>(0,s.jsxs)(d.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,s.jsx)(j.A,{className:"h-3 w-3"}),e,(0,s.jsx)("button",{onClick:()=>{ei("locations",z.locations.filter(t=>t!==e))},children:(0,s.jsx)(y.A,{className:"h-3 w-3"})})]},e)),z.dateRange.from&&(0,s.jsxs)(d.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,s.jsx)(v.A,{className:"h-3 w-3"}),z.dateRange.from," - ",z.dateRange.to||"now",(0,s.jsx)("button",{onClick:()=>ei("dateRange",{}),children:(0,s.jsx)(y.A,{className:"h-3 w-3"})})]}),(0,s.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{P(_)},children:"Clear all"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-800",children:"Quick searches:"}),Y.slice(0,4).map(e=>(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>ei("query",e),children:e},e))]}),I.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 text-gray-700"}),(0,s.jsx)("span",{className:"text-sm text-gray-800",children:"Recent:"}),I.slice(0,3).map(e=>(0,s.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>ei("query",e),className:"text-sm",children:e},e))]})]})]})]}),(0,s.jsx)(A.N,{children:V&&(0,s.jsx)(q.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{className:"text-lg",children:"Advanced Filters"})}),(0,s.jsxs)(n.Wu,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Date Range"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(o.p,{type:"date",value:z.dateRange.from||"",onChange:e=>ei("dateRange",{...z.dateRange,from:e.target.value}),placeholder:"From"}),(0,s.jsx)(o.p,{type:"date",value:z.dateRange.to||"",onChange:e=>ei("dateRange",{...z.dateRange,to:e.target.value}),placeholder:"To"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Sort By"}),(0,s.jsxs)(m.l6,{value:z.sortBy,onValueChange:e=>ei("sortBy",e),children:[(0,s.jsx)(m.bq,{children:(0,s.jsx)(m.yv,{})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"relevance",children:"Relevance"}),(0,s.jsx)(m.eb,{value:"date-desc",children:"Date (Newest)"}),(0,s.jsx)(m.eb,{value:"date-asc",children:"Date (Oldest)"}),(0,s.jsx)(m.eb,{value:"name-asc",children:"Name (A-Z)"}),(0,s.jsx)(m.eb,{value:"name-desc",children:"Name (Z-A)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Visibility"}),(0,s.jsxs)(m.l6,{value:z.visibility,onValueChange:e=>ei("visibility",e),children:[(0,s.jsx)(m.bq,{children:(0,s.jsx)(m.yv,{})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"all",children:"All"}),(0,s.jsx)(m.eb,{value:"public",children:"Public"}),(0,s.jsx)(m.eb,{value:"private",children:"Private"}),(0,s.jsx)(m.eb,{value:"friends",children:"Friends Only"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2 lg:col-span-3",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Quick Filters"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(c.$,{variant:z.hasLocation?"default":"outline",size:"sm",onClick:()=>ei("hasLocation",!z.hasLocation||null),children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-1"}),"Has Location"]}),(0,s.jsxs)(c.$,{variant:z.hasPhotos?"default":"outline",size:"sm",onClick:()=>ei("hasPhotos",!z.hasPhotos||null),children:[(0,s.jsx)(N.A,{className:"h-4 w-4 mr-1"}),"Has Photos"]})]})]})]})]})})}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)(n.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(w.A,{className:"h-5 w-5"}),"Results ",D.length>0&&"(".concat(D.length,")")]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:z.query&&(0,s.jsxs)(h.lG,{open:W,onOpenChange:G,children:[(0,s.jsx)(h.zM,{asChild:!0,children:(0,s.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Save Search"]})}),(0,s.jsxs)(h.Cf,{children:[(0,s.jsxs)(h.c7,{children:[(0,s.jsx)(h.L3,{children:"Save Search"}),(0,s.jsx)(h.rr,{children:"Give this search a name to save it for later"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(o.p,{value:X,onChange:e=>Q(e.target.value),placeholder:"Search name..."}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(c.$,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,s.jsx)(c.$,{onClick:er,disabled:!X.trim(),children:"Save"})]})]})]})]})})]})}),(0,s.jsx)(n.Wu,{children:B?(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-800",children:"Searching..."})]}):0===D.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-800",children:[(0,s.jsx)(x.A,{className:"h-12 w-12 mb-4 opacity-50"}),(0,s.jsx)("p",{className:"text-lg font-medium mb-2",children:z.query||Object.values(z).some(e=>e!==_[e]&&!(Array.isArray(e)&&0===e.length))?"No results found":"Start searching"}),(0,s.jsx)("p",{className:"text-sm",children:z.query?"Try adjusting your search terms or filters":"Enter a search term or use filters to find your content"})]}):(0,s.jsxs)(u.tU,{defaultValue:"all",className:"w-full",children:[(0,s.jsxs)(u.j7,{children:[(0,s.jsxs)(u.Xi,{value:"all",children:["All (",D.length,")"]}),(0,s.jsxs)(u.Xi,{value:"albums",children:["Albums (",D.filter(e=>"album"===e.type).length,")"]}),(0,s.jsxs)(u.Xi,{value:"photos",children:["Photos (",D.filter(e=>"photo"===e.type).length,")"]})]}),(0,s.jsx)(u.av,{value:"all",className:"mt-4",children:(0,s.jsx)(U,{results:D,onResultSelect:t})}),(0,s.jsx)(u.av,{value:"albums",className:"mt-4",children:(0,s.jsx)(U,{results:D.filter(e=>"album"===e.type),onResultSelect:t})}),(0,s.jsx)(u.av,{value:"photos",className:"mt-4",children:(0,s.jsx)(U,{results:D.filter(e=>"photo"===e.type),onResultSelect:t})})]})})]})]})}function U(e){let{results:t,onResultSelect:a}=e;return 0===t.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-800",children:(0,s.jsx)("p",{children:"No results in this category"})}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsx)(P,{result:e,onSelect:a},"".concat(e.type,"-").concat(e.id)))})}function P(e){let{result:t,onSelect:a}=e;return(0,s.jsxs)(q.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex gap-4 p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{if(a)a(t);else{let e="album"===t.type?"/albums/".concat(t.id):"/albums/".concat(t.id,"?photo=").concat(t.id);window.location.href=e}},children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-200 rounded-lg overflow-hidden",children:t.imageUrl?(0,s.jsx)(L.default,{src:t.imageUrl,alt:t.title,width:64,height:64,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"album"===t.type?(0,s.jsx)(N.A,{className:"h-6 w-6 text-gray-700"}):(0,s.jsx)(C.A,{className:"h-6 w-6 text-gray-700"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:t.title}),t.description&&(0,s.jsx)("p",{className:"text-sm text-gray-800 line-clamp-2 mt-1",children:t.description})]}),(0,s.jsx)(d.E,{variant:"secondary",className:"ml-2 flex-shrink-0",children:t.type})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-800",children:[t.location&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(j.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:t.location})]}),t.date&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(v.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:new Date(t.date).toLocaleDateString()})]}),t.matchReason.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(S.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:t.matchReason.join(", ")})]})]})]})]})}function D(){return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(q.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Search Your Adventures"}),(0,s.jsx)("p",{className:"text-gray-800 mt-2",children:"Find albums, photos, and locations with powerful search and filtering"})]})})}),(0,s.jsx)(q.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,s.jsx)(z,{onResultSelect:e=>{let t="album"===e.type||"photo"===e.type?"/albums/".concat(e.id):"/search?location=".concat(encodeURIComponent(e.title));window.location.href=t}})})]})}},51834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>h,L3:()=>x,c7:()=>m,lG:()=>n,rr:()=>f,zM:()=>c});var s=a(95155);a(12115);var l=a(89511),i=a(65229),r=a(64269);function n(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"dialog",...t})}function c(e){let{...t}=e;return(0,s.jsx)(l.l9,{"data-slot":"dialog-trigger",...t})}function o(e){let{...t}=e;return(0,s.jsx)(l.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(l.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,showCloseButton:n=!0,...c}=e;return(0,s.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,s.jsx)(d,{}),(0,s.jsxs)(l.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...c,children:[a,n&&(0,s.jsxs)(l.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(l.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(l.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(95155);a(12115);var l=a(64269);function i(e){let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}}},e=>{e.O(0,[4545,7559,2738,8415,306,264,8868,5667,9197,6935,6869,8441,1255,7358],()=>e(e.s=3534)),_N_E=e.O()}]);