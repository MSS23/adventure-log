(()=>{var a={};a.id=3070,a.ids=[3070],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8294:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},8343:(a,b,c)=>{Promise.resolve().then(c.bind(c,64787))},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:a=>{"use strict";a.exports=require("punycode")},15303:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25345:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31851:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])},33872:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},48095:(a,b,c)=>{Promise.resolve().then(c.bind(c,83383))},52463:(a,b,c)=>{"use strict";c.d(b,{OT:()=>o,c2:()=>n});var d=c(21124),e=c(38301),f=c(55169),g=c(23673),h=c(35284),i=c(99187),j=c(67817),k=c(44943),l=c(42830);function m({targetId:a,targetType:b,metadata:c,variant:m="ghost",size:n="default",showCount:o=!1,showLabel:p=!1,className:q,disabled:r=!1,onToggle:s}){let{isFavorited:t,toggleFavorite:u,getFavoritesCount:v,loading:w,checkOwnership:x}=(0,j.rB)({targetType:b,autoFetch:!0}),[y,z]=(0,e.useState)(!1),[A,B]=(0,e.useState)(!1),C=t(a,b),D=o?v(b):0,E=r||A,F=async()=>{if(!E&&!y){z(!0);try{let d=await u(a,b,c);s?.(d),l.oR.success(d?`Added to ${b} favorites`:`Removed from ${b} favorites`,{duration:2e3,position:"bottom-center"})}catch(a){l.oR.error(a instanceof Error?a.message:`Failed to update ${b} favorite`,{duration:3e3,position:"bottom-center"})}finally{setTimeout(()=>z(!1),300)}}};return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(h.$,{variant:m,size:n,onClick:F,disabled:E||w||y,title:A?"Cannot favorite your own content":void 0,className:(0,k.cn)("relative overflow-hidden transition-colors",C&&"ghost"===m&&"text-red-600 hover:text-red-700 hover:bg-red-50",C&&"outline"===m&&"border-red-300 text-red-600 hover:bg-red-50",C&&"default"===m&&"bg-red-600 hover:bg-red-700 text-white",A&&"opacity-50 cursor-not-allowed",q),"aria-label":A?"Cannot favorite your own content":`${C?"Remove from":"Add to"} ${b} favorites`,children:[(0,d.jsxs)(f.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.2},className:"flex items-center gap-2",children:[(0,d.jsx)(g.A,{className:(0,k.cn)("h-4 w-4 transition-all duration-200",C&&"fill-current",y&&"scale-125")}),p&&(0,d.jsx)("span",{className:"text-sm font-medium",children:(()=>{if(!p)return null;if(A)return"Cannot favorite own content";switch(b){case"photo":return C?"Favorited":"Add to favorites";case"album":return"Favorite album";case"location":return C?"Favorite place":"Add to wishlist";default:return C?"Favorited":"Favorite"}})()})]},C?"filled":"empty"),y&&C&&(0,d.jsx)(f.P.div,{initial:{scale:0,opacity:.7},animate:{scale:2,opacity:0},transition:{duration:.4},className:"absolute inset-0 bg-red-400 rounded-full"})]}),o&&D>0&&(0,d.jsx)(i.E,{variant:"secondary",className:"text-sm bg-gray-100 text-gray-800",children:D})]})}function n(a){return(0,d.jsx)(m,{...a,targetType:"location"})}function o({targetId:a,targetType:b,metadata:c,className:e,...f}){return(0,d.jsx)(m,{targetId:a,targetType:b,metadata:c,variant:"ghost",size:"sm",showCount:!1,showLabel:!1,className:(0,k.cn)("h-8 w-8 p-0",e),...f})}},55591:a=>{"use strict";a.exports=require("https")},59405:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64787:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>aS});var d=c(21124),e=c(38301),f=c(42378),g=c(24515),h=c(69773),i=c(70798),j=c(62186),k=c(35284),l=c(99187),m=c(80196),n=c(65893),o=c(22842),p=c(79944),q=c(69957),r=c(72567),s=c(36734),t=c(23339);let u=(0,t.A)("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]);var v=c(76180),w=c(30733),x=c(8849);let y=(0,t.A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var z=c(49269),A=c(40284);let B=(0,t.A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var C=c(71613),D=c(11563),E=c(3991),F=c.n(E);c(23312);var G=c(47089),H=c(8294),I=c(59405),J=c(31851),K=c(33872);(0,t.A)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),(0,t.A)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);var L=c(23673);class M{async getCurrentWeather(a){try{if("demo_key"===this.apiKey)return this.getMockCurrentWeather();let b=`${this.baseUrl}/weather?lat=${a.latitude}&lon=${a.longitude}&appid=${this.apiKey}&units=metric`,c=await fetch(b);if(!c.ok)throw Error(`Weather API error: ${c.status}`);let d=await c.json();return this.parseCurrentWeatherData(d)}catch(a){return console.error("Failed to fetch current weather:",a),this.getMockCurrentWeather()}}async getWeatherForecast(a,b=5){try{if("demo_key"===this.apiKey)return this.getMockWeatherForecast(a,b);let c=`${this.baseUrl}/forecast?lat=${a.latitude}&lon=${a.longitude}&appid=${this.apiKey}&units=metric&cnt=${Math.min(8*b,40)}`,d=await fetch(c);if(!d.ok)throw Error(`Weather forecast API error: ${d.status}`);let e=await d.json();return this.parseWeatherForecastData(e,b)}catch(c){return console.error("Failed to fetch weather forecast:",c),this.getMockWeatherForecast(a,b)}}async getHistoricalWeather(a,b){try{if("demo_key"===this.apiKey)return this.getMockHistoricalWeather(a,b);let c=Math.floor(b.getTime()/1e3),d=`${this.oneCallUrl}/timemachine?lat=${a.latitude}&lon=${a.longitude}&dt=${c}&appid=${this.apiKey}&units=metric`,e=await fetch(d);if(!e.ok)throw Error(`Historical weather API error: ${e.status}`);let f=await e.json();return this.parseHistoricalWeatherData(f,b)}catch(c){return console.error("Failed to fetch historical weather:",c),this.getMockHistoricalWeather(a,b)}}async getLocationCoordinates(a){try{if("demo_key"===this.apiKey)return this.getMockLocationCoordinates(a);let b=`${this.geoUrl}/direct?q=${encodeURIComponent(a)}&limit=1&appid=${this.apiKey}`,c=await fetch(b);if(!c.ok)throw Error(`Geocoding API error: ${c.status}`);let d=await c.json();if(0===d.length)return null;let e=d[0];return{latitude:e.lat,longitude:e.lon,name:e.name,country:e.country}}catch(b){return console.error("Failed to get location coordinates:",b),this.getMockLocationCoordinates(a)}}getWeatherIconUrl(a,b="2x"){return`https://openweathermap.org/img/wn/${a}@${b}.png`}getWeatherEmoji(a){return({Clear:"☀️",Clouds:"☁️",Rain:"\uD83C\uDF27️",Drizzle:"\uD83C\uDF26️",Thunderstorm:"⛈️",Snow:"❄️",Mist:"\uD83C\uDF2B️",Fog:"\uD83C\uDF2B️",Haze:"\uD83C\uDF2B️",Dust:"\uD83D\uDCA8",Sand:"\uD83D\uDCA8",Smoke:"\uD83D\uDCA8",Squall:"\uD83C\uDF2C️",Tornado:"\uD83C\uDF2A️"})[a]||"\uD83C\uDF24️"}formatTemperature(a,b="C"){return`${Math.round(a)}\xb0${b}`}getWeatherDescription(a){let{temperature:b,condition:c,windSpeed:d,humidity:e}=a,f=c.description;return b>25?f+=" (Great for outdoor activities)":b<5&&(f+=" (Pack warm clothes)"),d>10&&(f+=" - Windy conditions"),e>80&&(f+=" - High humidity"),f.charAt(0).toUpperCase()+f.slice(1)}parseCurrentWeatherData(a){let b=a.main,c=a.wind,d=a.clouds,e=a.weather;return{temperature:b.temp,feelsLike:b.feels_like,humidity:b.humidity,pressure:b.pressure,windSpeed:c?.speed||0,windDirection:c?.deg||0,visibility:a.visibility||1e4,cloudCover:d.all,condition:e[0],timestamp:new Date().toISOString()}}parseWeatherForecastData(a,b){let c=[],d=new Map;return a.list.forEach(a=>{let b=new Date(1e3*a.dt),c=b.toISOString().split("T")[0],e=b.getHours();(!d.has(c)||Math.abs(e-12)<Math.abs(d.get(c).hour-12))&&d.set(c,{...a,hour:e})}),Array.from(d.values()).slice(0,b).forEach(a=>{c.push({date:new Date(1e3*a.dt).toISOString().split("T")[0],temperature:a.main.temp,feelsLike:a.main.feels_like,humidity:a.main.humidity,pressure:a.main.pressure,windSpeed:a.wind?.speed||0,windDirection:a.wind?.deg||0,visibility:a.visibility||1e4,cloudCover:a.clouds.all,condition:a.weather[0],timestamp:new Date(1e3*a.dt).toISOString(),precipitationProbability:100*(a.pop||0),precipitationAmount:a.rain?.["3h"]||a.snow?.["3h"]||0})}),c}parseHistoricalWeatherData(a,b){let c=a.data[0];return{date:b.toISOString().split("T")[0],weather:{temperature:c.temp,feelsLike:c.feels_like,humidity:c.humidity,pressure:c.pressure,windSpeed:c.wind_speed,windDirection:c.wind_deg,visibility:c.visibility,cloudCover:c.clouds,uvIndex:c.uvi,condition:c.weather[0],timestamp:new Date(1e3*c.dt).toISOString()},sunrise:new Date(1e3*a.data[0].sunrise).toISOString(),sunset:new Date(1e3*a.data[0].sunset).toISOString()}}getMockCurrentWeather(){let a=["Clear","Clouds","Rain","Snow"],b=a[Math.floor(Math.random()*a.length)];return{temperature:Math.round(15+15*Math.random()),feelsLike:Math.round(15+15*Math.random()),humidity:Math.round(40+40*Math.random()),pressure:Math.round(1e3+50*Math.random()),windSpeed:Math.round(20*Math.random()),windDirection:Math.round(360*Math.random()),visibility:1e4,cloudCover:Math.round(100*Math.random()),uvIndex:Math.round(10*Math.random()),condition:{id:800,main:b,description:b.toLowerCase(),icon:"01d"},timestamp:new Date().toISOString()}}getMockWeatherForecast(a,b){let c=[],d=["Clear","Clouds","Rain","Snow"];for(let a=0;a<b;a++){let b=new Date;b.setDate(b.getDate()+a);let e=d[Math.floor(Math.random()*d.length)];c.push({date:b.toISOString().split("T")[0],temperature:Math.round(15+15*Math.random()),feelsLike:Math.round(15+15*Math.random()),humidity:Math.round(40+40*Math.random()),pressure:Math.round(1e3+50*Math.random()),windSpeed:Math.round(20*Math.random()),windDirection:Math.round(360*Math.random()),visibility:1e4,cloudCover:Math.round(100*Math.random()),condition:{id:800,main:e,description:e.toLowerCase(),icon:"01d"},timestamp:b.toISOString(),precipitationProbability:Math.round(100*Math.random()),precipitationAmount:Math.round(10*Math.random())})}return c}getMockHistoricalWeather(a,b){let c=["Clear","Clouds","Rain","Snow"],d=c[Math.floor(Math.random()*c.length)];return{date:b.toISOString().split("T")[0],weather:{temperature:Math.round(15+15*Math.random()),feelsLike:Math.round(15+15*Math.random()),humidity:Math.round(40+40*Math.random()),pressure:Math.round(1e3+50*Math.random()),windSpeed:Math.round(20*Math.random()),windDirection:Math.round(360*Math.random()),visibility:1e4,cloudCover:Math.round(100*Math.random()),uvIndex:Math.round(10*Math.random()),condition:{id:800,main:d,description:d.toLowerCase(),icon:"01d"},timestamp:b.toISOString()},sunrise:new Date(b.getTime()+216e5).toISOString(),sunset:new Date(b.getTime()+648e5).toISOString()}}getMockLocationCoordinates(a){return({paris:{latitude:48.8566,longitude:2.3522,name:"Paris",country:"FR"},london:{latitude:51.5074,longitude:-.1278,name:"London",country:"GB"},tokyo:{latitude:35.6762,longitude:139.6503,name:"Tokyo",country:"JP"},"new york":{latitude:40.7128,longitude:-74.006,name:"New York",country:"US"},sydney:{latitude:-33.8688,longitude:151.2093,name:"Sydney",country:"AU"}})[a.toLowerCase()]||{latitude:40.7128+(Math.random()-.5)*20,longitude:-74.006+(Math.random()-.5)*40,name:a,country:"Unknown"}}constructor(){this.baseUrl="https://api.openweathermap.org/data/2.5",this.geoUrl="https://api.openweathermap.org/geo/1.0",this.oneCallUrl="https://api.openweathermap.org/data/3.0/onecall",this.apiKey=process.env.NEXT_PUBLIC_OPENWEATHER_API_KEY||"demo_key"}}let N=new M;var O=c(91722),P=c(70175);let Q=(0,t.A)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),R=(0,t.A)("cloud-rain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]),S=(0,t.A)("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]),T=(0,t.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var U=c(85265);let V=(0,t.A)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),W=(0,t.A)("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]);var X=c(3368),Y=c(44943),Z=c(55169);function $({latitude:a,longitude:b,takenAt:c,location:f,showInline:g=!1,compact:h=!0,className:i}){var m;let[n,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(!1),[s,t]=(0,e.useState)(null),u=a=>{switch(a.toLowerCase()){case"clear":default:return(0,d.jsx)(P.A,{className:"h-4 w-4 text-yellow-500"});case"clouds":return(0,d.jsx)(Q,{className:"h-4 w-4 text-gray-800"});case"rain":case"drizzle":return(0,d.jsx)(R,{className:"h-4 w-4 text-blue-500"});case"snow":return(0,d.jsx)(S,{className:"h-4 w-4 text-blue-200"})}};if(!a||!b||!c)return null;if(p)return(0,d.jsxs)(l.E,{variant:"outline",className:(0,Y.cn)("animate-pulse",i),children:[(0,d.jsx)("div",{className:"w-4 h-4 bg-gray-200 rounded mr-1"}),"Loading weather..."]});if(s||!n)return(0,d.jsxs)(l.E,{variant:"outline",className:(0,Y.cn)("text-gray-800",i),children:[(0,d.jsx)(Q,{className:"w-3 h-3 mr-1"}),"Weather unavailable"]});let{weather:v,sunrise:w,sunset:x,seasonInfo:y}=n,z=(m=v.temperature)>=30?{label:"Hot",color:"text-red-600"}:m>=20?{label:"Warm",color:"text-orange-600"}:m>=10?{label:"Mild",color:"text-green-600"}:m>=0?{label:"Cool",color:"text-blue-600"}:{label:"Cold",color:"text-blue-800"};return h&&!g?(0,d.jsxs)(O.lG,{children:[(0,d.jsx)(O.zM,{asChild:!0,children:(0,d.jsxs)(l.E,{variant:"outline",className:(0,Y.cn)("cursor-pointer hover:bg-gray-50",i),children:[u(v.condition.main),(0,d.jsx)("span",{className:"ml-1",children:N.formatTemperature(v.temperature)}),(0,d.jsx)("span",{className:"ml-1 text-sm opacity-75",children:N.getWeatherEmoji(v.condition.main)})]})}),(0,d.jsxs)(O.Cf,{className:"max-w-md",children:[(0,d.jsxs)(O.c7,{children:[(0,d.jsxs)(O.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5"}),"Weather Context"]}),(0,d.jsx)(O.rr,{children:"Weather conditions when this photo was taken"})]}),(0,d.jsx)(_,{weather:v,sunrise:w,sunset:x,seasonInfo:y,location:f,date:c})]})]}):g?(0,d.jsx)(j.Zp,{className:i,children:(0,d.jsx)(j.Wu,{className:"p-4",children:(0,d.jsx)(_,{weather:v,sunrise:w,sunset:x,seasonInfo:y,location:f,date:c})})}):(0,d.jsxs)(Z.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:(0,Y.cn)("flex items-center gap-2 p-2 bg-white rounded-lg border border-gray-200 shadow-sm",i),children:[(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[u(v.condition.main),(0,d.jsx)("span",{className:(0,Y.cn)("font-medium",z.color),children:N.formatTemperature(v.temperature)})]}),(0,d.jsx)(l.E,{variant:"secondary",className:"text-sm",children:z.label}),y&&(0,d.jsxs)(l.E,{variant:"outline",className:"text-sm",children:[(a=>{switch(a.toLowerCase()){case"spring":return"\uD83C\uDF38";case"summer":return"☀️";case"autumn":case"fall":return"\uD83C\uDF42";case"winter":return"❄️";default:return"\uD83C\uDF24️"}})(y.season)," ",y.season]}),(0,d.jsxs)(O.lG,{children:[(0,d.jsx)(O.zM,{asChild:!0,children:(0,d.jsx)(k.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,d.jsx)(T,{className:"h-3 w-3"})})}),(0,d.jsxs)(O.Cf,{className:"max-w-md",children:[(0,d.jsxs)(O.c7,{children:[(0,d.jsxs)(O.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5"}),"Weather Context"]}),(0,d.jsx)(O.rr,{children:"Weather conditions when this photo was taken"})]}),(0,d.jsx)(_,{weather:v,sunrise:w,sunset:x,seasonInfo:y,location:f,date:c})]})]})]})}function _({weather:a,sunrise:b,sunset:c,seasonInfo:e,location:f,date:g}){let h=a=>new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(a=>{switch(a.toLowerCase()){case"clear":default:return(0,d.jsx)(P.A,{className:"h-8 w-8 text-yellow-500"});case"clouds":return(0,d.jsx)(Q,{className:"h-8 w-8 text-gray-800"});case"rain":case"drizzle":return(0,d.jsx)(R,{className:"h-8 w-8 text-blue-500"});case"snow":return(0,d.jsx)(S,{className:"h-8 w-8 text-blue-200"})}})(a.condition.main),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-2xl font-bold",children:N.formatTemperature(a.temperature)}),(0,d.jsx)("div",{className:"text-sm text-gray-800 capitalize",children:a.condition.description})]})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-800",children:[f&&(0,d.jsxs)("span",{children:[f," • "]}),new Date(g).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(U.A,{className:"h-4 w-4 text-red-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium",children:"Feels like"}),(0,d.jsx)("div",{className:"text-sm text-gray-800",children:N.formatTemperature(a.feelsLike)})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(V,{className:"h-4 w-4 text-blue-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium",children:"Humidity"}),(0,d.jsxs)("div",{className:"text-sm text-gray-800",children:[a.humidity,"%"]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(W,{className:"h-4 w-4 text-gray-800"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium",children:"Wind"}),(0,d.jsxs)("div",{className:"text-sm text-gray-800",children:[Math.round(a.windSpeed)," m/s"]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(X.A,{className:"h-4 w-4 text-green-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium",children:"Visibility"}),(0,d.jsxs)("div",{className:"text-sm text-gray-800",children:[Math.round(a.visibility/1e3)," km"]})]})]})]}),e&&(0,d.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)("span",{className:"text-lg",children:"Spring"===e.season?"\uD83C\uDF38":"Summer"===e.season?"☀️":"Autumn"===e.season?"\uD83C\uDF42":"❄️"}),(0,d.jsx)("span",{className:"font-medium text-blue-900",children:e.season})]}),(0,d.jsx)("p",{className:"text-sm text-blue-800",children:e.description})]}),(b||c)&&(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[b&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(P.A,{className:"h-4 w-4 text-orange-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium",children:"Sunrise"}),(0,d.jsx)("div",{className:"text-gray-800",children:h(b)})]})]}),c&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(P.A,{className:"h-4 w-4 text-red-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium",children:"Sunset"}),(0,d.jsx)("div",{className:"text-gray-800",children:h(c)})]})]})]}),(0,d.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,d.jsx)("p",{className:"text-sm text-gray-700",children:N.getWeatherDescription(a)})})]})}var aa=c(28083),ab=c(22577),ac=c(62312);function ad(a){let b=(0,ac.M)(()=>(0,aa.OQ)(a)),{isStatic:c}=(0,e.useContext)(ab.Q);if(c){let[,b]=(0,e.useState)(a)}return b}var ae=c(49295),af=c(3783),ag=c(8371),ah=c(83416);function ai(a,b){[...b].reverse().forEach(c=>{let d=a.getVariant(c);d&&(0,ag.U)(a,d),a.variantChildren&&a.variantChildren.forEach(a=>{ai(a,b)})})}function aj(){let a=!1,b=new Set,c={subscribe:a=>(b.add(a),()=>void b.delete(a)),start(c,d){(0,af.V)(a,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let e=[];return b.forEach(a=>{e.push((0,ah._)(a,c,{transitionOverride:d}))}),Promise.all(e)},set:c=>((0,af.V)(a,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),b.forEach(a=>{var b,d;b=a,Array.isArray(d=c)?ai(b,d):"string"==typeof d?ai(b,[d]):(0,ag.U)(b,d)})),stop(){b.forEach(a=>{a.values.forEach(a=>a.stop())})},mount:()=>(a=!0,()=>{a=!1,c.stop()})};return c}let ak=function(){let a=(0,ac.M)(aj);return(0,ae.E)(a.mount,[]),a};var al=c(48230),am=c(91362);function an(a,b){let c=ad(b()),d=()=>c.set(b());return d(),(0,ae.E)(()=>{let b=()=>am.Gt.preRender(d,!1,!0),c=a.map(a=>a.on("change",b));return()=>{c.forEach(a=>a()),(0,am.WG)(d)}}),c}function ao(a,b,c,d){if("function"==typeof a){aa.bt.current=[],a();let b=an(aa.bt.current,a);return aa.bt.current=void 0,b}let e="function"==typeof b?b:function(...a){let b=!Array.isArray(a[0]),c=b?0:-1,d=a[0+c],e=a[1+c],f=a[2+c],g=a[3+c],h=(0,al.G)(e,f,g);return b?h(d):h}(b,c,d);return Array.isArray(a)?ap(a,e):ap([a],([a])=>e(a))}function ap(a,b){let c=(0,ac.M)(()=>[]);return an(a,()=>{c.length=0;let d=a.length;for(let b=0;b<d;b++)c[b]=a[b].get();return b(c)})}function aq({photos:a,initialPhotoId:b,isOpen:c,onClose:f,onPhotoChange:h}){let[i,j]=(0,e.useState)(0),[l,m]=(0,e.useState)(1),[n,o]=(0,e.useState)(0),[p,t]=(0,e.useState)(!1),[u,v]=(0,e.useState)(!0),[w,x]=(0,e.useState)(!1),[y,A]=(0,e.useState)(0),[B,C]=(0,e.useState)(null),[D,E]=(0,e.useState)(null),[F,M]=(0,e.useState)(!1),[N,O]=(0,e.useState)(!1),P=ad(0),Q=ad(0),R=ad(1),S=ak(),T=(ak(),ao(P,a=>{let b=Math.max(0,(R.get()-1)*200);return Math.max(-b,Math.min(b,a))}),ao(Q,a=>{let b=Math.max(0,(R.get()-1)*150);return Math.max(-b,Math.min(b,a))}),a[i]),U=(0,e.useCallback)(()=>{j(b=>(b+1)%a.length)},[a.length]),V=(0,e.useCallback)(()=>{j(b=>(b-1+a.length)%a.length)},[a.length]),W=((0,e.useCallback)(()=>{let a=Math.min(l+.5,3);m(a),R.set(a),S.start({scale:a,transition:{duration:.3}})},[l,R,S]),(0,e.useCallback)(()=>{let a=Math.max(l-.5,.25);m(a),R.set(a),S.start({scale:a,transition:{duration:.3}})},[l,R,S]),(0,e.useCallback)(()=>{m(1),o(0),R.set(1),P.set(0),Q.set(0),S.start({scale:1,x:0,y:0,rotate:0,transition:{duration:.4,ease:"easeInOut"}})},[R,P,Q,S])),X=((0,e.useCallback)(()=>{M(!0),O(l>1)},[l]),(0,e.useCallback)((a,b)=>{N&&(P.set(P.get()+b.delta.x),Q.set(Q.get()+b.delta.y))},[N,P,Q]),(0,e.useCallback)((b,c)=>{M(!1),!N&&(Math.abs(c.offset.x)>50||Math.abs(c.velocity.x)>300)&&(c.offset.x>0&&a.length>1?V():c.offset.x<0&&a.length>1&&U()),O(!1)},[N,a.length,U,V]),(0,e.useCallback)(()=>{1===l?(m(2),R.set(2),S.start({scale:2,transition:{duration:.3}})):W()},[l,R,S,W]),a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}));return c&&T?(Z.P.div,a.length,T.caption&&T.caption,k.$,s.A,k.$,G.A,a.length>1&&(d.Fragment,k.$,H.A,k.$,I.A),Z.P.div,w?(s.A,k.$):T.file_path?(Z.P.div,Z.P.div,g.default,T.file_path,T.caption,(0,Y.cn)("object-contain select-none",u&&"opacity-0",l>1?"cursor-grab":"cursor-pointer",F&&"cursor-grabbing"),T.id):s.A,Z.P.div,k.$,J.A,Z.P.span,Z.P.div,k.$,K.A,Z.P.div,k.$,Z.P.div,Z.P.div,k.$,k.$,L.A,k.$,k.$,z.A,p&&(T.caption&&T.caption,(T.taken_at||T.camera_make||T.camera_model)&&(T.taken_at&&(r.A,X(T.taken_at),new Date(T.taken_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})),(T.camera_make||T.camera_model)&&(s.A,[T.camera_make,T.camera_model].filter(Boolean).join(" ")),T.iso&&T.iso,T.aperture&&T.aperture,T.shutter_speed&&T.shutter_speed),T.latitude&&T.longitude&&(q.A,T.latitude?.toFixed(6),T.longitude?.toFixed(6),T.location_name&&T.location_name),T.latitude&&T.longitude&&T.taken_at&&(T.latitude,T.longitude,T.taken_at,T.location_name),X(T.created_at),T.file_size&&(T.file_size/1024/1024).toFixed(1)),null):null}c(5227);var ar=c(52463),as=c(71179),at=c(57618);function au({photos:a,columns:b=4,showCaptions:c=!1,className:f,albumId:g,isOwner:h=!1,currentCoverPhotoUrl:j,onCoverPhotoSet:k,onPhotosReorder:l,allowReordering:m=!1}){let[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(),[r,t]=(0,e.useState)(null),[u,v]=(0,e.useState)(null),[w,x]=(0,e.useState)(!1),y=(0,i.UU)(),z=a=>{a.currentTarget.style.opacity="1",t(null),v(null)},A=()=>{v(null)},B=(0,e.useCallback)(async(b,c)=>{if(b.preventDefault(),!m||!h||!r||!g||!l)return;let d=a.findIndex(a=>a.id===r.id);if(-1===d||d===c)return void v(null);x(!0);try{let b=[...a],[e]=b.splice(d,1);b.splice(c,0,e);let f=b.map((a,b)=>y.from("photos").update({order_index:b}).eq("id",a.id));await Promise.all(f);let g=b.map((a,b)=>({...a,order_index:b}));l(g)}catch(a){at.Rm.error("Error reordering photos",{error:a})}finally{x(!1),v(null)}},[m,h,r,g,l,a,y]);return 0===a.length?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-800",children:[(0,d.jsx)(s.A,{className:"h-12 w-12 mb-4 opacity-50"}),(0,d.jsx)("p",{className:"text-lg font-medium mb-2",children:"No photos yet"}),(0,d.jsx)("p",{className:"text-sm",children:"Photos will appear here once uploaded"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:(0,Y.cn)("grid gap-4 md:gap-6",(()=>{switch(b){case 2:return"grid-cols-2";case 3:return"grid-cols-2 md:grid-cols-3";case 4:default:return"grid-cols-2 md:grid-cols-3 lg:grid-cols-4";case 5:return"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}})(),f),children:a.map((a,b)=>(0,d.jsx)(av,{photo:a,index:b,showCaption:c,isOwner:h,isCover:j===a.file_path,allowReordering:m&&h,isReordering:w,isDraggedOver:u===b,onPhotoClick:()=>{q(a.id),o(!0)},onSetCover:k?()=>k(a.file_path):void 0,onDragStart:b=>{m&&h&&(t(a),b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/html",b.currentTarget.outerHTML),b.currentTarget.style.opacity="0.5")},onDragEnd:z,onDragOver:a=>{m&&h&&r&&(a.preventDefault(),a.dataTransfer.dropEffect="move",v(b))},onDragLeave:A,onDrop:a=>B(a,b)},a.id))}),(0,d.jsx)(aq,{photos:a,initialPhotoId:p,isOpen:n,onClose:()=>{o(!1),q(void 0)}})]})}function av({photo:a,index:b,showCaption:c,isOwner:f,isCover:h,allowReordering:i,isReordering:j,isDraggedOver:k,onPhotoClick:l,onSetCover:m,onDragStart:n,onDragEnd:o,onDragOver:p,onDragLeave:t,onDrop:u}){let[v,w]=(0,e.useState)(!0),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(0);return(0,d.jsxs)("div",{className:(0,Y.cn)("group relative aspect-square bg-gray-100 rounded-lg overflow-hidden transition-all duration-300",i&&f?"cursor-grab active:cursor-grabbing":"cursor-pointer",k&&"ring-2 ring-blue-500 ring-offset-2",j&&"pointer-events-none opacity-75",!j&&"hover:shadow-lg"),draggable:i&&f,onDragStart:n,onDragEnd:o,onDragOver:p,onDragLeave:t,onDrop:u,children:[v&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-400"})}),x?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",onClick:l,children:[(0,d.jsx)(s.A,{className:"h-8 w-8 text-gray-700 mb-2"}),(0,d.jsx)("p",{className:"text-sm text-gray-800 mb-2",children:"Failed to load"}),(0,d.jsx)("button",{onClick:a=>{a.stopPropagation(),w(!0),y(!1),A(a=>a+1)},className:"text-sm bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700 transition-colors",children:"Retry"})]}):a.file_path?(0,d.jsx)(g.default,{src:a.file_path,alt:a.caption||`Photo ${b+1}`,fill:!0,className:(0,Y.cn)("w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",v&&"opacity-0"),onLoad:()=>{w(!1),y(!1)},onError:()=>{w(!1),y(!0)},onClick:l},`${a.id}-${z}`):(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",onClick:l,children:[(0,d.jsx)(s.A,{className:"h-8 w-8 text-gray-700 mb-2"}),(0,d.jsx)("p",{className:"text-sm text-gray-800",children:"No image"})]}),h&&(0,d.jsx)("div",{className:"absolute top-1 left-1 bg-yellow-500 text-white px-2 py-1 rounded text-sm font-medium z-20 shadow-sm",children:"Cover"}),i&&f&&!h&&(0,d.jsx)("div",{className:"absolute top-1 left-1 bg-black/80 backdrop-blur-sm text-white p-2 rounded opacity-0 group-hover:opacity-100 md:group-hover:opacity-100 hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing z-10 shadow-lg min-h-[32px] min-w-[32px] touch-manipulation",children:(0,d.jsx)(B,{className:"h-4 w-4"})}),i&&f&&h&&(0,d.jsx)("div",{className:"absolute top-1 left-16 bg-black/80 backdrop-blur-sm text-white p-2 rounded opacity-0 group-hover:opacity-100 md:group-hover:opacity-100 hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing z-10 shadow-lg min-h-[32px] min-w-[32px] touch-manipulation",children:(0,d.jsx)(B,{className:"h-4 w-4"})}),f&&m&&!h&&(0,d.jsx)("button",{onClick:a=>{a.stopPropagation(),m()},className:"absolute top-1 right-1 bg-blue-600 text-white px-3 py-2 rounded text-sm opacity-0 group-hover:opacity-100 md:group-hover:opacity-100 hover:opacity-100 focus:opacity-100 transition-all hover:bg-blue-700 focus:bg-blue-700 z-20 shadow-lg font-medium min-h-[32px] min-w-[70px] touch-manipulation",children:"Set Cover"}),(0,d.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-5",children:[(0,d.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-3 text-white z-10",children:[c&&a.caption&&(0,d.jsx)("p",{className:"text-sm font-medium line-clamp-2 mb-2 text-shadow-sm",children:a.caption}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.latitude&&a.longitude&&(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded backdrop-blur-sm",children:[(0,d.jsx)(q.A,{className:"h-3 w-3"}),(0,d.jsx)("span",{children:"Location"})]}),a.taken_at&&(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded backdrop-blur-sm",children:[(0,d.jsx)(r.A,{className:"h-3 w-3"}),(0,d.jsx)("span",{children:"Date"})]}),a.latitude&&a.longitude&&a.taken_at&&(0,d.jsx)($,{latitude:a.latitude,longitude:a.longitude,takenAt:a.taken_at,compact:!0,className:"bg-black/30 backdrop-blur-sm"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(ar.OT,{targetId:a.id,targetType:"photo",metadata:{photo_url:a.file_path,title:a.caption||`Photo ${b+1}`,description:a.caption,tags:[]},className:"bg-black/30 backdrop-blur-sm hover:bg-black/50 h-7 w-7"}),(0,d.jsxs)("div",{className:"flex items-center gap-1 opacity-75 bg-black/30 px-2 py-1 rounded backdrop-blur-sm text-sm",children:[(0,d.jsx)(as.A,{className:"h-3 w-3"}),(0,d.jsx)("span",{children:"0"})]})]})]})]}),(0,d.jsxs)("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity delay-100 z-10",children:[!(f&&m&&!h)&&(0,d.jsxs)(d.Fragment,{children:[a.latitude&&a.longitude&&(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full shadow-sm",title:"Has location data"}),a.taken_at&&(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full shadow-sm",title:"Has timestamp"})]}),f&&m&&!h&&(0,d.jsxs)("div",{className:"absolute top-8 right-0 flex gap-1",children:[a.latitude&&a.longitude&&(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full shadow-sm",title:"Has location data"}),a.taken_at&&(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full shadow-sm",title:"Has timestamp"})]})]})]}),(0,d.jsx)("div",{className:"absolute bottom-2 left-2 bg-black/70 backdrop-blur-sm text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:b+1})]})}function aw({albumId:a,photoId:b,showCount:c=!0,size:f="md",className:g}){let{isLiked:j,likesCount:l,loading:m,toggleLike:n}=function(a,b){let[c,d]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1),[j,k]=(0,e.useState)(!1),{user:l}=(0,h.A)(),m=(0,i.UU)(),n=(0,e.useCallback)(async()=>{try{let c=m.from("likes").select(`
          id,
          user_id,
          album_id,
          photo_id,
          created_at
        `).order("created_at",{ascending:!1});a&&(c=c.eq("album_id",a)),b&&(c=c.eq("photo_id",b));let{data:e,error:f}=await c;if(f)throw f;let g=await Promise.all((e||[]).map(async a=>{try{let{data:b}=await m.from("profiles").select("username, display_name, avatar_url").eq("id",a.user_id).single();return{...a,profiles:b||void 0}}catch{return{...a,profiles:void 0}}}));d(g)}catch(a){at.Rm.error("Error fetching likes",{error:a})}},[m,a,b]);(0,e.useCallback)(async()=>{if(l)try{let c=m.from("likes").select("id").eq("user_id",l.id);a&&(c=c.eq("album_id",a)),b&&(c=c.eq("photo_id",b));let{data:d,error:e}=await c.maybeSingle();if(e)throw e;g(!!d)}catch(a){at.Rm.error("Error checking if liked",{},a)}},[l,m,a,b]);let o=async()=>{if(l&&!j){k(!0);try{if(f){let c=m.from("likes").delete().eq("user_id",l.id);a&&(c=c.eq("album_id",a)),b&&(c=c.eq("photo_id",b));let{error:d}=await c;if(d)throw d;g(!1)}else{let c={user_id:l.id};a&&(c.album_id=a),b&&(c.photo_id=b);let{error:d}=await m.from("likes").insert(c);if(d)throw d;g(!0)}await n()}catch(a){at.Rm.error("Error toggling like",{},a)}finally{k(!1)}}};return{likes:c,isLiked:f,loading:j,toggleLike:o,likesCount:c.length}}(a,b),o=async a=>{a.preventDefault(),a.stopPropagation(),await n()};return(0,d.jsxs)(k.$,{variant:j?"default":"outline",size:"sm",className:(0,Y.cn)({sm:"h-8 px-2 text-sm",md:"h-9 px-3 text-sm",lg:"h-10 px-4 text-base"}[f],j?"bg-red-500 hover:bg-red-600 text-white":"hover:bg-red-50 hover:text-red-600",g),onClick:o,disabled:m,children:[(0,d.jsx)(L.A,{className:(0,Y.cn)({sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"}[f],c&&"mr-1",j&&"fill-current")}),c&&(0,d.jsx)("span",{children:l})]})}var ax=c(23727),ay=c(49330),az=c(63091),aA=c(15303);let aB=(0,t.A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var aC=c(74331);function aD({userId:a,className:b="",size:c="default",variant:f="default",showText:g=!0}){let{followStatus:h,follow:i,unfollow:j,loading:l}=(0,ay.k)(a),[m,n]=(0,e.useState)(!1),o=async()=>{n(!0);try{"following"===h||"pending"===h?await j(a):await i(a)}finally{n(!1)}},p=l||m,q=(()=>{switch(h){case"following":return{icon:(0,d.jsx)(az.A,{className:"h-4 w-4"}),text:"Following",variant:"outline"};case"pending":return{icon:(0,d.jsx)(aA.A,{className:"h-4 w-4"}),text:"Pending",variant:"secondary"};case"blocked":return{icon:(0,d.jsx)(aB,{className:"h-4 w-4"}),text:"Blocked",variant:"secondary"};default:return{icon:(0,d.jsx)(aC.A,{className:"h-4 w-4"}),text:"Follow",variant:f}}})();return"blocked"===h?null:(0,d.jsxs)(k.$,{onClick:o,disabled:p,size:c,variant:q.variant,className:b,children:[p?(0,d.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):q.icon,g&&(0,d.jsx)("span",{className:"ml-2",children:p?"Loading...":q.text})]})}var aE=c(10578);function aF({profile:a,showFollowButton:b=!0}){return(0,d.jsx)(j.Zp,{className:"max-w-md mx-auto",children:(0,d.jsxs)(j.Wu,{className:"py-12 text-center",children:[(0,d.jsxs)("div",{className:"relative mb-6",children:[(0,d.jsxs)(ax.eu,{className:"h-20 w-20 mx-auto",children:[(0,d.jsx)(ax.BK,{src:a.avatar_url}),(0,d.jsx)(ax.q5,{className:"text-xl",children:a.display_name?.[0]||a.username?.[0]||(0,d.jsx)(aE.A,{})})]}),(0,d.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-gray-100 rounded-full p-2",children:(0,d.jsx)(o.A,{className:"h-4 w-4 text-gray-800"})})]}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a.display_name||a.username}),a.display_name&&(0,d.jsxs)("p",{className:"text-gray-800 mb-4",children:["@",a.username]}),(0,d.jsxs)("div",{className:"space-y-3 text-sm text-gray-800",children:[(0,d.jsx)("p",{className:"font-medium",children:"This account is private"}),(0,d.jsxs)("p",{children:["Follow ",a.display_name||a.username," to see their adventures and travel photos"]})]}),b&&(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)(aD,{userId:a.id})})]})})}var aG=c(25345);let aH=(0,t.A)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);function aI({location:a,showDetails:b=!1,compact:c=!1,className:f,date:g,onRefresh:h}){let[i,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(!0),[p,s]=(0,e.useState)(null),[t,u]=(0,e.useState)(null),v=async()=>{o(!0),s(null);try{let b=null;if(g){let c=await N.getHistoricalWeather(a,g);b=c?.weather||null}else b=await N.getCurrentWeather(a);m(b),u(new Date)}catch(a){s("Failed to fetch weather data"),console.error("Weather fetch error:",a)}finally{o(!1)}},w=()=>{v(),h?.()},x=a=>{switch(a.toLowerCase()){case"clear":default:return(0,d.jsx)(P.A,{className:"h-5 w-5 text-yellow-500"});case"clouds":return(0,d.jsx)(Q,{className:"h-5 w-5 text-gray-800"});case"rain":case"drizzle":return(0,d.jsx)(R,{className:"h-5 w-5 text-blue-500"});case"snow":return(0,d.jsx)(S,{className:"h-5 w-5 text-blue-200"})}},y=a=>a>=30?"text-red-500":a>=20?"text-orange-500":a>=10?"text-green-500":a>=0?"text-blue-500":"text-blue-700";return n?(0,d.jsx)(j.Zp,{className:(0,Y.cn)("animate-pulse",f),children:(0,d.jsx)(j.Wu,{className:(0,Y.cn)("p-4",c&&"p-3"),children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),(0,d.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})})}):p?(0,d.jsx)(j.Zp,{className:(0,Y.cn)("border-red-200 bg-red-50",f),children:(0,d.jsx)(j.Wu,{className:(0,Y.cn)("p-4",c&&"p-3"),children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-red-600 text-sm",children:p}),(0,d.jsx)(k.$,{variant:"ghost",size:"sm",onClick:w,children:(0,d.jsx)(aG.A,{className:"h-4 w-4"})})]})})}):i?c?(0,d.jsxs)(Z.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:(0,Y.cn)("flex items-center gap-2 p-2 bg-white rounded-lg shadow-sm border",f),children:[x(i.condition.main),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("span",{className:(0,Y.cn)("font-semibold",y(i.temperature)),children:N.formatTemperature(i.temperature)}),(0,d.jsx)("span",{className:"text-gray-800 ml-1 hidden sm:inline",children:i.condition.description})]}),N.getWeatherEmoji(i.condition.main)&&(0,d.jsx)("span",{className:"text-lg",children:N.getWeatherEmoji(i.condition.main)})]}):(0,d.jsxs)(j.Zp,{className:f,children:[(0,d.jsxs)(j.aR,{className:"pb-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(j.ZB,{className:"flex items-center gap-2 text-sm font-medium",children:[(0,d.jsx)(q.A,{className:"h-4 w-4"}),a.name||`${a.latitude.toFixed(2)}, ${a.longitude.toFixed(2)}`,g&&(0,d.jsxs)(l.E,{variant:"outline",className:"ml-2",children:[(0,d.jsx)(r.A,{className:"h-3 w-3 mr-1"}),"Historical"]})]}),(0,d.jsx)(k.$,{variant:"ghost",size:"sm",onClick:w,children:(0,d.jsx)(aG.A,{className:"h-4 w-4"})})]}),t&&!g&&(0,d.jsxs)("p",{className:"text-sm text-gray-800",children:["Updated ",t.toLocaleTimeString()]})]}),(0,d.jsxs)(j.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl",children:x(i.condition.main)}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:(0,Y.cn)("text-2xl font-bold",y(i.temperature)),children:N.formatTemperature(i.temperature)}),(0,d.jsx)("div",{className:"text-sm text-gray-800 capitalize",children:i.condition.description}),(0,d.jsxs)("div",{className:"text-sm text-gray-800",children:["Feels like ",N.formatTemperature(i.feelsLike)]})]})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("div",{className:"text-3xl mb-1",children:N.getWeatherEmoji(i.condition.main)}),(0,d.jsx)(l.E,{variant:"secondary",className:"text-sm",children:i.condition.main})]})]}),b&&(0,d.jsxs)(Z.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(V,{className:"h-4 w-4 text-blue-500"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"text-sm font-medium",children:[i.humidity,"%"]}),(0,d.jsx)("div",{className:"text-sm text-gray-800",children:"Humidity"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(W,{className:"h-4 w-4 text-gray-800"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"text-sm font-medium",children:[Math.round(i.windSpeed)," m/s"]}),(0,d.jsx)("div",{className:"text-sm text-gray-800",children:"Wind Speed"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(aH,{className:"h-4 w-4 text-purple-500"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"text-sm font-medium",children:[i.pressure," hPa"]}),(0,d.jsx)("div",{className:"text-sm text-gray-800",children:"Pressure"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(X.A,{className:"h-4 w-4 text-green-500"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"text-sm font-medium",children:[Math.round(i.visibility/1e3)," km"]}),(0,d.jsx)("div",{className:"text-sm text-gray-800",children:"Visibility"})]})]}),void 0!==i.uvIndex&&(0,d.jsxs)("div",{className:"flex items-center gap-2 col-span-2",children:[(0,d.jsx)(P.A,{className:"h-4 w-4 text-yellow-500"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"text-sm font-medium",children:["UV Index: ",i.uvIndex]}),(0,d.jsx)("div",{className:"text-sm text-gray-800",children:i.uvIndex<=2?"Low":i.uvIndex<=5?"Moderate":i.uvIndex<=7?"High":i.uvIndex<=10?"Very High":"Extreme"})]})]})]}),(0,d.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,d.jsx)("p",{className:"text-sm text-blue-800",children:N.getWeatherDescription(i)})})]})]}):(0,d.jsx)(j.Zp,{className:(0,Y.cn)("border-gray-200",f),children:(0,d.jsx)(j.Wu,{className:(0,Y.cn)("p-4",c&&"p-3"),children:(0,d.jsx)("div",{className:"text-center text-gray-800 text-sm",children:"No weather data available"})})})}var aJ=c(6406),aK="horizontal",aL=["horizontal","vertical"],aM=e.forwardRef((a,b)=>{var c;let{decorative:e,orientation:f=aK,...g}=a,h=(c=f,aL.includes(c))?f:aK;return(0,d.jsx)(aJ.sG.div,{"data-orientation":h,...e?{role:"none"}:{"aria-orientation":"vertical"===h?h:void 0,role:"separator"},...g,ref:b})});aM.displayName="Separator";let aN=e.forwardRef(({className:a,orientation:b="horizontal",decorative:c=!0,...e},f)=>(0,d.jsx)(aM,{ref:f,decorative:c,orientation:b,className:(0,Y.cn)("shrink-0 bg-border","horizontal"===b?"h-[1px] w-full":"h-full w-[1px]",a),...e}));aN.displayName=aM.displayName;let aO=(0,t.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var aP=c(67748);function aQ({location:a,days:b=5,detailed:c=!1,className:f,onDaySelect:g}){let[h,i]=(0,e.useState)([]),[l,m]=(0,e.useState)(!0),[n,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(null),s=async()=>{m(!0),o(null);try{let c=await N.getWeatherForecast(a,b);i(c)}catch(a){o("Failed to fetch weather forecast"),console.error("Weather forecast error:",a)}finally{m(!1)}},t=(a,b="short")=>{let c=new Date(a),d=new Date,e=new Date(d);return(e.setDate(e.getDate()+1),c.toDateString()===d.toDateString())?"Today":c.toDateString()===e.toDateString()?"Tomorrow":"short"===b?c.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):c.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})};return l?(0,d.jsxs)(j.Zp,{className:f,children:[(0,d.jsx)(j.aR,{children:(0,d.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5"}),"Weather Forecast"]})}),(0,d.jsx)(j.Wu,{children:(0,d.jsx)("div",{className:"space-y-4",children:[...Array(Math.min(b,5))].map((a,b)=>(0,d.jsxs)("div",{className:"animate-pulse flex items-center gap-4 p-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),(0,d.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),(0,d.jsx)("div",{className:"h-6 bg-gray-200 rounded w-12"})]},b))})})]}):n?(0,d.jsxs)(j.Zp,{className:(0,Y.cn)("border-red-200 bg-red-50",f),children:[(0,d.jsx)(j.aR,{children:(0,d.jsxs)(j.ZB,{className:"flex items-center justify-between",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2 text-red-600",children:[(0,d.jsx)(aO,{className:"h-5 w-5"}),"Weather Forecast"]}),(0,d.jsx)(k.$,{variant:"ghost",size:"sm",onClick:s,children:(0,d.jsx)(aG.A,{className:"h-4 w-4"})})]})}),(0,d.jsx)(j.Wu,{children:(0,d.jsx)("p",{className:"text-red-600",children:n})})]}):0===h.length?(0,d.jsx)(j.Zp,{className:f,children:(0,d.jsx)(j.Wu,{className:"p-6 text-center text-gray-800",children:"No forecast data available"})}):(0,d.jsxs)(j.Zp,{className:f,children:[(0,d.jsxs)(j.aR,{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5"}),b,"-Day Weather Forecast"]}),(0,d.jsx)(k.$,{variant:"ghost",size:"sm",onClick:s,children:(0,d.jsx)(aG.A,{className:"h-4 w-4"})})]}),a.name&&(0,d.jsxs)("p",{className:"text-sm text-gray-800",children:[a.name,", ",a.country]})]}),(0,d.jsxs)(j.Wu,{className:"space-y-4",children:[(0,d.jsx)("div",{className:"space-y-3",children:h.map((a,b)=>{let e=(a=>{let{temperature:b,condition:c,precipitationProbability:d,windSpeed:e}=a;return d>70?{level:"warning",message:"High chance of rain - pack an umbrella!"}:b>30?{level:"info",message:"Hot weather - stay hydrated and wear sunscreen"}:b<0?{level:"warning",message:"Freezing temperatures - dress warmly"}:e>15?{level:"caution",message:"Windy conditions expected"}:"clear"===c.main.toLowerCase()&&b>=20&&b<=28?{level:"good",message:"Perfect weather for sightseeing!"}:{level:"neutral",message:"Check conditions before heading out"}})(a),f=p===b;return(0,d.jsxs)(Z.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*b},className:(0,Y.cn)("p-4 rounded-lg border cursor-pointer transition-all duration-200",f?"border-blue-300 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"),onClick:()=>{q(b),g?.(a)},children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:((a,b="md")=>{let c={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"}[b];switch(a.toLowerCase()){case"clear":default:return(0,d.jsx)(P.A,{className:(0,Y.cn)(c,"text-yellow-500")});case"clouds":return(0,d.jsx)(Q,{className:(0,Y.cn)(c,"text-gray-800")});case"rain":case"drizzle":return(0,d.jsx)(R,{className:(0,Y.cn)(c,"text-blue-500")});case"snow":return(0,d.jsx)(S,{className:(0,Y.cn)(c,"text-blue-200")})}})(a.condition.main)}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-gray-900",children:t(a.date)}),(0,d.jsx)("div",{className:"text-sm text-gray-800 capitalize",children:a.condition.description})]})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:N.formatTemperature(a.temperature)}),(0,d.jsx)(I.A,{className:"h-4 w-4 text-gray-700"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-800 mt-1",children:[a.precipitationProbability>0&&(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(V,{className:"h-3 w-3"}),(0,d.jsxs)("span",{children:[Math.round(a.precipitationProbability),"%"]})]}),a.windSpeed>0&&(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(W,{className:"h-3 w-3"}),(0,d.jsxs)("span",{children:[Math.round(a.windSpeed),"m/s"]})]})]})]})]}),(0,d.jsx)("div",{className:(0,Y.cn)("mt-3 p-2 rounded text-sm border",(a=>{switch(a){case"good":return"text-green-700 bg-green-100 border-green-200";case"warning":return"text-red-700 bg-red-100 border-red-200";case"caution":return"text-yellow-700 bg-yellow-100 border-yellow-200";case"info":return"text-blue-700 bg-blue-100 border-blue-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}})(e.level)),children:e.message}),c&&f&&(0,d.jsx)(Z.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t border-gray-200",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-gray-800",children:"Feels like"}),(0,d.jsx)("div",{className:"font-medium",children:N.formatTemperature(a.feelsLike)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-gray-800",children:"Humidity"}),(0,d.jsxs)("div",{className:"font-medium",children:[a.humidity,"%"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-gray-800",children:"Pressure"}),(0,d.jsxs)("div",{className:"font-medium",children:[a.pressure," hPa"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-gray-800",children:"Clouds"}),(0,d.jsxs)("div",{className:"font-medium",children:[a.cloudCover,"%"]})]})]})})]},a.date)})}),(0,d.jsx)(aN,{}),(0,d.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("h4",{className:"font-medium text-gray-900 mb-2 flex items-center gap-2",children:[(0,d.jsx)(aP.A,{className:"h-4 w-4"}),"Travel Summary"]}),(0,d.jsxs)("div",{className:"text-sm text-gray-800 space-y-1",children:[(0,d.jsxs)("p",{children:["Temperature range: ",N.formatTemperature(Math.min(...h.map(a=>a.temperature)))," to ",N.formatTemperature(Math.max(...h.map(a=>a.temperature)))]}),(0,d.jsxs)("p",{children:["Best day for outdoor activities: ",t(h.reduce((a,b)=>b.temperature>a.temperature&&b.precipitationProbability<a.precipitationProbability&&"clear"===b.condition.main.toLowerCase()?b:a).date)]}),h.some(a=>a.precipitationProbability>50)&&(0,d.jsxs)("p",{className:"text-yellow-700",children:["⚠️ Rain expected on ",h.filter(a=>a.precipitationProbability>50).length," day(s)"]})]})]})]})]})}var aR=c(63082);function aS(){var a,b;let c=(0,f.useParams)(),t=(0,f.useRouter)(),{user:E}=(0,h.A)(),[G,H]=(0,e.useState)(null),[I,J]=(0,e.useState)([]),[K,L]=(0,e.useState)(!0),[M,N]=(0,e.useState)(null),[O,P]=(0,e.useState)(!1),[Q,R]=(0,e.useState)(0),[S,T]=(0,e.useState)(!1),[U,V]=(0,e.useState)([]),[W,X]=(0,e.useState)(!1),[Y,Z]=(0,e.useState)(!1),$=(0,i.UU)(),{getFollowStatus:_}=(0,ay.k)(),aa=(0,e.useCallback)(async()=>{try{L(!0),N(null);let{data:a,error:b}=await $.from("albums").select(`
          *,
          user:profiles(username, display_name, avatar_url)
        `).eq("id",c.id).single();if(b)throw b;let d=a.user_id===E?.id,e=a.user;if(!d){if(e?.privacy_level==="private"){let b=await _(a.user_id);if("following"!==b){Z(!0),H(a),L(!1);return}}if("private"===a.visibility)throw Error("You do not have permission to view this album");if("friends"===a.visibility){let b=await _(a.user_id);if("following"!==b)throw Error("This album is only visible to followers")}if("followers"===a.visibility){let b=await _(a.user_id);if("following"!==b)throw Error("This album is only visible to followers")}}H(a),Z(!1),a.favorite_photo_urls&&V(a.favorite_photo_urls);let{data:f,error:g}=await $.from("photos").select("*").eq("album_id",c.id).order("order_index",{ascending:!0});if(g)throw g;J(f||[])}catch(b){at.Rm.error("Failed to fetch album details",{component:"AlbumViewPage",action:"fetchAlbum",albumId:Array.isArray(c.id)?c.id[0]:c.id,userId:E?.id},b instanceof Error?b:Error(String(b)));let a="Failed to fetch album";b instanceof Error&&(a=b.message.includes("permission")?"You do not have permission to view this album":b.message.includes("network")||b.message.includes("fetch")?"Network error. Please check your connection and try again.":b.message),N(a)}finally{L(!1)}},[c.id,E?.id,$]),ab=async()=>{if(G&&window.confirm("Are you sure you want to delete this album? This action cannot be undone."))try{P(!0);let{error:a}=await $.from("albums").delete().eq("id",G.id);if(a)throw a;t.push("/albums")}catch(a){at.Rm.error("Failed to delete album",{component:"AlbumViewPage",action:"deleteAlbum",albumId:G.id,userId:E?.id},a instanceof Error?a:Error(String(a))),N(a instanceof Error?a.message:"Failed to delete album")}finally{P(!1)}},ac=async a=>{if(G)try{let{error:b}=await $.from("albums").update({cover_photo_url:a}).eq("id",G.id);if(b)throw b;H(b=>b?{...b,cover_photo_url:a}:null)}catch(c){at.Rm.error("Failed to set cover photo",{component:"AlbumViewPage",action:"setCoverPhoto",albumId:G.id,photoUrl:a,userId:E?.id},c instanceof Error?c:Error(String(c)));let b=c instanceof Error?c.message:"Failed to set cover photo";N(`Cover photo update failed: ${b}`),setTimeout(()=>{N(null)},5e3)}},ad=async()=>{if(G)try{X(!0);let{error:a}=await $.from("albums").update({favorite_photo_urls:U}).eq("id",G.id);if(a)throw a;H(a=>a?{...a,favorite_photo_urls:U}:null),T(!1)}catch(a){at.Rm.error("Failed to save favorite photos",{component:"AlbumViewPage",action:"saveFavorites",albumId:G.id,userId:E?.id},a instanceof Error?a:Error(String(a))),N(a instanceof Error?a.message:"Failed to save favorite photos")}finally{X(!1)}},ae=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),af=G?.user_id===E?.id;return K?(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-4"}),(0,d.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2"}),(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-48"})]}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(8)].map((a,b)=>(0,d.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},b))})]}):M?(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsxs)(F(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,d.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Back to Albums"]}),(0,d.jsx)(j.Zp,{className:"border-red-200 bg-red-50",children:(0,d.jsx)(j.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-red-600 font-medium",children:"Failed to load album"}),(0,d.jsx)("p",{className:"text-red-500 text-sm mt-1",children:M}),(0,d.jsxs)("div",{className:"mt-4 space-x-2",children:[(0,d.jsx)(k.$,{variant:"outline",onClick:()=>{R(a=>a+1),aa()},disabled:K,children:K?"Retrying...":Q>0?`Try Again (${Q+1})`:"Try Again"}),(0,d.jsx)(F(),{href:"/albums",children:(0,d.jsx)(k.$,{variant:"outline",children:"Back to Albums"})})]})]})})})]}):G?Y&&G.user?(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsxs)(F(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,d.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,d.jsx)(aF,{profile:G.user,showFollowButton:!0})]}):(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)(F(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,d.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Back to Albums"]}),(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,d.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 leading-tight break-words",children:G.title}),(0,d.jsxs)(l.E,{variant:"public"===G.visibility?"default":"secondary",className:"flex items-center gap-1 w-fit",children:[(a=>{switch(a){case"public":return(0,d.jsx)(m.A,{className:"h-4 w-4 text-green-600"});case"followers":return(0,d.jsx)(n.A,{className:"h-4 w-4 text-purple-600"});case"friends":return(0,d.jsx)(n.A,{className:"h-4 w-4 text-blue-600"});case"private":return(0,d.jsx)(o.A,{className:"h-4 w-4 text-gray-800"});default:return(0,d.jsx)(m.A,{className:"h-4 w-4 text-gray-800"})}})(G.visibility),(0,d.jsx)("span",{className:"capitalize",children:G.visibility})]})]}),G.description&&(0,d.jsx)("p",{className:"text-gray-800 text-base md:text-lg mb-6 leading-relaxed",children:G.description}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-800 mb-6",children:[G.location_name&&(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(q.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:G.location_name})]}),(G.start_date||G.end_date)&&(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(r.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:G.start_date&&G.end_date?(a=G.start_date)===(b=G.end_date)?ae(a):`${ae(a)} - ${ae(b)}`:G.start_date?ae(G.start_date):G.end_date&&ae(G.end_date)})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(s.A,{className:"h-4 w-4"}),(0,d.jsxs)("span",{children:[I.length," photo",1===I.length?"":"s"]})]})]}),G.tags&&G.tags.length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:G.tags.map((a,b)=>(0,d.jsx)(l.E,{variant:"outline",children:a},b))}),(0,d.jsxs)("div",{className:"flex items-center gap-4 mt-6 pt-4 border-t border-gray-200",children:[(0,d.jsx)(aw,{albumId:G.id}),(0,d.jsxs)(k.$,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm",onClick:async()=>{try{await aR.w.share({title:G.title,text:G.description||`Check out this album: ${G.title}`,url:window.location.href})}catch(a){console.error("Share failed:",a)}},children:[(0,d.jsx)(u,{className:"h-4 w-4 mr-1"}),"Share"]})]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[af&&(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,d.jsx)(F(),{href:`/albums/${G.id}/edit`,children:(0,d.jsxs)(k.$,{variant:"outline",size:"sm",className:"min-h-[44px] w-full sm:w-auto",children:[(0,d.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Edit Album"]})}),I.length>0&&(0,d.jsxs)(k.$,{variant:"outline",size:"sm",className:"min-h-[44px] w-full sm:w-auto",onClick:()=>T(!0),disabled:S,children:[(0,d.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Select Favorites"]}),(0,d.jsx)(F(),{href:`/albums/${G.id}/upload`,children:(0,d.jsxs)(k.$,{size:"sm",className:"min-h-[44px] w-full sm:w-auto",children:[(0,d.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Add Photos"]})})]}),(0,d.jsxs)(D.rI,{children:[(0,d.jsx)(D.ty,{asChild:!0,children:(0,d.jsxs)(k.$,{variant:"outline",size:"sm",className:"min-h-[44px] w-full sm:w-auto",children:[(0,d.jsx)(y,{className:"h-4 w-4 mr-2 sm:mr-0"}),(0,d.jsx)("span",{className:"sm:hidden",children:"More Options"})]})}),(0,d.jsxs)(D.SQ,{align:"end",children:[(0,d.jsxs)(D._2,{children:[(0,d.jsx)(u,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"Share Album"})]}),(0,d.jsxs)(D._2,{children:[(0,d.jsx)(z.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"Download All"})]}),af&&(0,d.jsxs)(D._2,{className:"text-red-600",onClick:ab,disabled:O,children:[(0,d.jsx)(A.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:O?"Deleting...":"Delete Album"})]})]})]})]})]})]}),G.latitude&&G.longitude&&(0,d.jsxs)("div",{className:"space-y-6",children:[G.start_date&&(0,d.jsx)(aI,{location:{latitude:G.latitude,longitude:G.longitude,name:G.location_name||void 0},date:new Date(G.start_date),showDetails:!0,className:"bg-gradient-to-br from-blue-50 to-indigo-100 border-blue-200"}),G.start_date&&new Date(G.start_date)>new Date&&(0,d.jsx)(aQ,{location:{latitude:G.latitude,longitude:G.longitude,name:G.location_name||void 0},days:7,detailed:!0,className:"bg-gradient-to-br from-green-50 to-emerald-100 border-green-200"})]}),I.length>1&&af&&!S&&(0,d.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 md:p-6",children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(B,{className:"h-5 w-5 text-blue-600"}),(0,d.jsx)("span",{className:"text-sm font-semibold text-blue-900",children:"Reorder Photos"})]}),(0,d.jsx)("span",{className:"text-sm text-blue-700 leading-relaxed",children:"Drag and drop photos to reorder them in your album"})]})}),S&&(0,d.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 md:p-6",children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(w.A,{className:"h-5 w-5 text-yellow-600"}),(0,d.jsxs)("span",{className:"text-sm font-semibold text-yellow-900",children:["Select Favorites (",U.length,"/3)"]})]}),(0,d.jsx)("span",{className:"text-sm text-yellow-700 leading-relaxed",children:"Choose up to 3 photos to show in your globe pin tooltip"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(k.$,{variant:"outline",size:"sm",onClick:()=>{V(G?.favorite_photo_urls||[]),T(!1)},disabled:W,children:"Cancel"}),(0,d.jsx)(k.$,{size:"sm",onClick:ad,disabled:W||0===U.length,children:W?"Saving...":"Save Favorites"})]})]})}),0===I.length?(0,d.jsx)(j.Zp,{children:(0,d.jsx)(j.Wu,{className:"py-16",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(s.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-700"}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No photos yet"}),(0,d.jsx)("p",{className:"text-gray-800 mb-6",children:af?"Start uploading photos to bring your album to life.":"This album doesn't have any photos yet."}),af&&(0,d.jsx)(F(),{href:`/albums/${G.id}/upload`,children:(0,d.jsxs)(k.$,{children:[(0,d.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Upload Photos"]})})]})})}):S?(0,d.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,d.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:I.map(a=>(0,d.jsxs)("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>{var b;return b=a.file_path,void(U.includes(b)?V(a=>a.filter(a=>a!==b)):U.length<3&&V(a=>[...a,b]))},children:[(0,d.jsx)(g.default,{src:a.file_path,alt:a.caption||"Photo",fill:!0,className:`object-cover rounded-lg transition-all duration-200 ${U.includes(a.file_path)?"ring-4 ring-yellow-500 opacity-75":U.length>=3?"opacity-40 cursor-not-allowed":"hover:opacity-80"}`}),U.includes(a.file_path)&&(0,d.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,d.jsx)(C.A,{className:"h-4 w-4 text-white"})}),U.includes(a.file_path)&&(0,d.jsx)("div",{className:"absolute top-2 left-2 w-6 h-6 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:U.indexOf(a.file_path)+1}),!U.includes(a.file_path)&&U.length>=3&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-50 rounded-lg flex items-center justify-center",children:(0,d.jsx)("span",{className:"text-white text-sm font-medium",children:"Max 3 selected"})})]},a.id))})}):(0,d.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,d.jsx)(au,{photos:I,columns:5,showCaptions:!0,albumId:G.id,isOwner:af,currentCoverPhotoUrl:G.cover_photo_url,onCoverPhotoSet:ac,onPhotosReorder:a=>{J(a)},allowReordering:!0})}),(0,d.jsxs)(j.Zp,{children:[(0,d.jsx)(j.aR,{children:(0,d.jsx)(j.ZB,{className:"text-lg",children:"Album Details"})}),(0,d.jsxs)(j.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-gray-900",children:"Created:"}),(0,d.jsx)("span",{className:"ml-2 text-gray-800",children:ae(G.created_at)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-gray-900",children:"Last updated:"}),(0,d.jsx)("span",{className:"ml-2 text-gray-800",children:ae(G.updated_at)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-gray-900",children:"Photos:"}),(0,d.jsx)("span",{className:"ml-2 text-gray-800",children:I.length})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-gray-900",children:"Visibility:"}),(0,d.jsx)("span",{className:"ml-2 text-gray-800 capitalize",children:G.visibility})]})]}),G.user&&(0,d.jsxs)("div",{className:"pt-4 border-t",children:[(0,d.jsx)("span",{className:"font-medium text-gray-900",children:"Created by:"}),(0,d.jsx)("span",{className:"ml-2 text-gray-800",children:G.user.display_name||G.user.username})]})]})]})]}):(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsxs)(F(),{href:"/albums",className:"inline-flex items-center text-sm text-gray-800 hover:text-gray-900",children:[(0,d.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Back to Albums"]}),(0,d.jsx)(j.Zp,{children:(0,d.jsx)(j.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-gray-800",children:"Album not found"}),(0,d.jsx)(F(),{href:"/albums",className:"mt-4 inline-block",children:(0,d.jsx)(k.$,{variant:"outline",children:"Back to Albums"})})]})})})]})}},67748:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},67817:(a,b,c)=>{"use strict";c.d(b,{rB:()=>h});var d=c(38301),e=c(20814),f=c(69773),g=c(57618);function h(a={}){let{targetType:b,targetId:c,autoFetch:i=!0}=a,{user:j}=(0,f.A)(),[k,l]=(0,d.useState)([]),[m,n]=(0,d.useState)(!1),[o,p]=(0,d.useState)(null),q=(0,e.U)(),r=(0,d.useCallback)(async(a,b)=>{if(!j?.id)return!1;try{let c;switch(b){case"photo":c=q.from("photos").select("user_id").eq("id",a).single();break;case"album":c=q.from("albums").select("user_id").eq("id",a).single();break;default:return!1}let{data:d}=await c;return d?.user_id===j.id}catch(c){return g.Rm.error("Error checking content ownership",{itemId:a,itemType:b,error:c}),!1}},[j?.id,q]),s=(0,d.useCallback)(async()=>{if(!j)return void l([]);n(!0),p(null);try{let a=q.from("favorites").select(`
          id,
          user_id,
          target_id,
          target_type,
          created_at,
          metadata
        `).eq("user_id",j.id).order("created_at",{ascending:!1});b&&(a=a.eq("target_type",b)),c&&(a=a.eq("target_id",c));let{data:d,error:e}=await a;if(e)throw e;l(d||[]),g.Rm.debug("Favorites fetched successfully",{component:"useFavorites",action:"fetchFavorites",count:d?.length||0,targetType:b,targetId:c})}catch(a){p(a instanceof Error?a.message:"Failed to fetch favorites"),g.Rm.error("Failed to fetch favorites",{error:a})}finally{n(!1)}},[j,b,c,q]),t=(0,d.useCallback)((a,b="photo")=>k.some(c=>c.target_id===a&&c.target_type===b),[k]),u=(0,d.useCallback)(async(a,b="photo",c)=>{if(!j)throw Error("Must be logged in to add favorites");if(await r(a,b))throw Error("You cannot favorite your own content");if(!t(a,b))try{let{data:d,error:e}=await q.from("favorites").insert({user_id:j.id,target_id:a,target_type:b,metadata:c||{}}).select().single();if(e)throw e;return l(a=>[d,...a]),g.Rm.info("Added favorite successfully",{component:"useFavorites",action:"addFavorite",targetId:a,targetType:b}),d}catch(a){throw p(a instanceof Error?a.message:"Failed to add favorite"),g.Rm.error("Failed to add favorite",{error:a}),a}},[j,t,q]),v=(0,d.useCallback)(async(a,b="photo")=>{if(!j)throw Error("Must be logged in to remove favorites");try{let{error:c}=await q.from("favorites").delete().eq("user_id",j.id).eq("target_id",a).eq("target_type",b);if(c)throw c;l(c=>c.filter(c=>c.target_id!==a||c.target_type!==b)),g.Rm.info("Removed favorite successfully",{component:"useFavorites",action:"removeFavorite",targetId:a,targetType:b})}catch(a){throw p(a instanceof Error?a.message:"Failed to remove favorite"),g.Rm.error("Failed to remove favorite",{error:a}),a}},[j,q]),w=(0,d.useCallback)(async(a,b="photo",c)=>t(a,b)?(await v(a,b),!1):(await u(a,b,c),!0),[t,v,u]),x=(0,d.useCallback)(a=>a?k.filter(b=>b.target_type===a).length:k.length,[k]),y=(0,d.useCallback)((a=10,b)=>{let c=k;return b&&(c=k.filter(a=>a.target_type===b)),c.slice(0,a)},[k]);return{favorites:k,loading:m,error:o,fetchFavorites:s,isFavorited:t,addFavorite:u,removeFavorite:v,toggleFavorite:w,getFavoritesCount:x,getRecentFavorites:y,checkOwnership:r,photoFavorites:k.filter(a=>"photo"===a.target_type),albumFavorites:k.filter(a=>"album"===a.target_type),locationFavorites:k.filter(a=>"location"===a.target_type)}}},71179:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},71613:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},74075:a=>{"use strict";a.exports=require("zlib")},76180:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},79551:a=>{"use strict";a.exports=require("url")},79944:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},81630:a=>{"use strict";a.exports=require("http")},83383:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\msidh\\\\Documents\\\\Adventure Log Application\\\\src\\\\app\\\\(app)\\\\albums\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\msidh\\Documents\\Adventure Log Application\\src\\app\\(app)\\albums\\[id]\\page.tsx","default")},85265:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]])},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},93769:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["(app)",{children:["albums",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,83383)),"C:\\Users\\msidh\\Documents\\Adventure Log Application\\src\\app\\(app)\\albums\\[id]\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,37792)),"C:\\Users\\msidh\\Documents\\Adventure Log Application\\src\\app\\(app)\\albums\\[id]\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,46553)),"C:\\Users\\msidh\\Documents\\Adventure Log Application\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,51472)),"C:\\Users\\msidh\\Documents\\Adventure Log Application\\src\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,I=["C:\\Users\\msidh\\Documents\\Adventure Log Application\\src\\app\\(app)\\albums\\[id]\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/(app)/albums/[id]/page",pathname:"/albums/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:"dist",relativeProjectDir:""});async function L(a,b,d){var C;let G="/(app)/albums/[id]/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw aF||b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}}};var b=require("../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[4586,1121,517,3991,1223,959,6803,5309,6426,1691,6883],()=>b(b.s=93769));module.exports=c})();