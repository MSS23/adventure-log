"use strict";exports.id=1539,exports.ids=[1539],exports.modules={7365:(a,b,c)=>{c.d(b,{f:()=>E});var d=c(21124),e=c(38301),f=c(35284),g=c(93758),h=c(62186),i=c(99187),j=c(30733),k=c(80196),l=c(69957),m=c(88285),n=c(47089),o=c(14263),p=c(8635),q=c(52647),r=c(44943),s=c(70798);function t(a,b){let c=[];return(a<-90||a>90)&&c.push("Latitude must be between -90 and 90 degrees"),(b<-180||b>180)&&c.push("Longitude must be between -180 and 180 degrees"),0===a&&0===b&&c.push("Coordinates cannot be at null island (0, 0)"),{isValid:0===c.length,errors:c}}function u(a){if(!a)return{isValid:!1,errors:["Location data is required"]};let b=[];return a.display_name&&0!==a.display_name.trim().length||b.push("Location name is required"),b.push(...t(a.latitude,a.longitude).errors),a.display_name&&a.display_name.length>500&&b.push("Location name is too long (maximum 500 characters)"),{isValid:0===b.length,errors:b}}function v(a,b,c=6){return`${a.toFixed(c)}, ${b.toFixed(c)}`}function w(a){return a.trim().replace(/[<>\"']/g,"").substring(0,500)}var x=c(57618),y=c(71432);class z{static{this.focusableSelectors='button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], [tabindex]:not([tabindex="-1"]), [contenteditable="true"]'}static getFocusableElements(a){return Array.from(a.querySelectorAll(this.focusableSelectors))}static getFirstFocusableElement(a){let b=this.getFocusableElements(a);return b.length>0?b[0]:null}static getLastFocusableElement(a){let b=this.getFocusableElements(a);return b.length>0?b[b.length-1]:null}static trapFocus(a,b){if("Tab"!==b.key)return;let c=this.getFocusableElements(a);if(0===c.length)return;let d=c[0],e=c[c.length-1];b.shiftKey?document.activeElement===d&&(b.preventDefault(),e.focus()):document.activeElement===e&&(b.preventDefault(),d.focus())}static restoreFocus(a){a&&"function"==typeof a.focus&&requestAnimationFrame(()=>{a.focus()})}}class A{static getInstance(){return this.instance||(this.instance=new A),this.instance}ensureRegionsExist(){this.politeRegion||(this.politeRegion=this.createLiveRegion("polite")),this.assertiveRegion||(this.assertiveRegion=this.createLiveRegion("assertive"))}createLiveRegion(a){let b=document.createElement("div");return b.setAttribute("aria-live",a),b.setAttribute("aria-atomic","true"),b.style.cssText=`
      position: absolute;
      left: -10000px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    `,document.body.appendChild(b),b}announce(a,b="polite"){this.ensureRegionsExist();let c="polite"===b?this.politeRegion:this.assertiveRegion;c&&(c.textContent="",setTimeout(()=>{c.textContent=a},100))}constructor(){this.politeRegion=null,this.assertiveRegion=null}}let B=(a,b="polite")=>{A.getInstance().announce(a,b)},C=[{id:1,name:"Paris",country:"France",latitude:48.8566,longitude:2.3522,airport_code:"CDG",city_type:"capital",region:"Europe"},{id:2,name:"Tokyo",country:"Japan",latitude:35.6762,longitude:139.6503,airport_code:"NRT",city_type:"capital",region:"Asia"},{id:3,name:"New York City",country:"United States",latitude:40.7128,longitude:-74.006,airport_code:"JFK",city_type:"city",region:"North America"},{id:4,name:"London",country:"United Kingdom",latitude:51.5074,longitude:-.1278,airport_code:"LHR",city_type:"capital",region:"Europe"},{id:5,name:"Rome",country:"Italy",latitude:41.9028,longitude:12.4964,airport_code:"FCO",city_type:"capital",region:"Europe"},{id:6,name:"Barcelona",country:"Spain",latitude:41.3851,longitude:2.1734,airport_code:"BCN",city_type:"city",region:"Europe"},{id:7,name:"Amsterdam",country:"Netherlands",latitude:52.3676,longitude:4.9041,airport_code:"AMS",city_type:"capital",region:"Europe"},{id:8,name:"Sydney",country:"Australia",latitude:-33.8688,longitude:151.2093,airport_code:"SYD",city_type:"city",region:"Oceania"},{id:9,name:"Dubai",country:"United Arab Emirates",latitude:25.2048,longitude:55.2708,airport_code:"DXB",city_type:"city",region:"Middle East"},{id:10,name:"Singapore",country:"Singapore",latitude:1.3521,longitude:103.8198,airport_code:"SIN",city_type:"capital",region:"Asia"},{id:11,name:"Bangkok",country:"Thailand",latitude:13.7563,longitude:100.5018,airport_code:"BKK",city_type:"capital",region:"Asia"},{id:12,name:"Istanbul",country:"Turkey",latitude:41.0082,longitude:28.9784,airport_code:"IST",city_type:"city",region:"Europe"},{id:13,name:"Los Angeles",country:"United States",latitude:34.0522,longitude:-118.2437,airport_code:"LAX",city_type:"city",region:"North America"},{id:14,name:"Bali",country:"Indonesia",latitude:-8.3405,longitude:115.092,airport_code:"DPS",city_type:"island",region:"Asia"},{id:15,name:"S\xe3o Paulo",country:"Brazil",latitude:-23.5505,longitude:-46.6333,airport_code:"GRU",city_type:"city",region:"South America"},{id:16,name:"Mumbai",country:"India",latitude:19.076,longitude:72.8777,airport_code:"BOM",city_type:"city",region:"Asia"},{id:17,name:"Cairo",country:"Egypt",latitude:30.0444,longitude:31.2357,airport_code:"CAI",city_type:"capital",region:"Africa"},{id:18,name:"Cape Town",country:"South Africa",latitude:-33.9249,longitude:18.4241,airport_code:"CPT",city_type:"city",region:"Africa"}],D=["Europe","Asia","North America","South America","Africa","Oceania","Middle East"];function E({value:a,onChange:b,placeholder:c="Search destinations or pick a popular one...",className:z,allowCurrentLocation:A=!0,showPopularDestinations:E=!0}){let[F,G]=(0,e.useState)(""),[H,I]=(0,e.useState)([]),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),[N,O]=(0,e.useState)(!1),[P,Q]=(0,e.useState)(null),[,R]=(0,e.useState)(0),[S,T]=(0,e.useState)([]),[U,V]=(0,e.useState)(null),[,W]=(0,e.useState)(-1);(0,e.useRef)(null);let X=(0,e.useRef)(null);(0,s.UU)();let{currentIndex:Y}=function(a,b,c=!0){let d=(0,e.useRef)(-1);return(0,e.useCallback)(e=>{if(c&&0!==a.length)switch(e.key){case"ArrowDown":e.preventDefault(),d.current=Math.min(d.current+1,a.length-1);break;case"ArrowUp":e.preventDefault(),d.current=Math.max(d.current-1,0);break;case"Home":e.preventDefault(),d.current=0;break;case"End":e.preventDefault(),d.current=a.length-1;break;case"Enter":case" ":e.preventDefault(),d.current>=0&&b(a[d.current],d.current);break;case"Escape":e.preventDefault(),d.current=-1}},[a,b,c]),{currentIndex:d.current,setCurrentIndex:a=>{d.current=a}}}(L?H.map(a=>a.display_name):S.map(a=>a.name),(a,b)=>{if(L){let a=H[b];a&&Z(a)}else{let a=S[b];a&&$(a)}},L||E&&S.length>0),Z=(0,e.useCallback)(a=>{b({latitude:parseFloat(a.lat),longitude:parseFloat(a.lon),display_name:a.display_name,place_id:a.place_id}),G(a.display_name),M(!1),W(-1),B(`Selected location: ${a.display_name}`)},[b]),$=(0,e.useCallback)(a=>{b({latitude:a.latitude,longitude:a.longitude,display_name:a.name,city_id:a.id}),G(a.name),M(!1),W(-1),B(`Selected location: ${a.name}`)},[b]),_=async a=>{if(a.trim()){K(!0),Q(null);try{let b=await fetch("https://nominatim.openstreetmap.org/search?"+new URLSearchParams({q:a,format:"json",limit:"8",dedupe:"1","accept-language":"en",addressdetails:"1"}));if(!b.ok)throw Error("Failed to search locations");let c=await b.json();I(c),M(!0)}catch(b){Q((0,y.hS)(b,{component:"LocationDropdown",action:"search-location",query:a}).userMessage),I([])}finally{K(!1)}}},aa=U?(S.length>0?S:C).filter(a=>a.region===U):(S.length>0?S:C).slice(0,12);return(0,d.jsxs)("div",{className:(0,r.cn)("relative",z),children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("div",{className:"relative flex-1",children:[(0,d.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-700"}),(0,d.jsx)(g.p,{ref:X,type:"text",value:F,onChange:a=>{let c=w(a.target.value);G(c),c.trim()||(b(null),M(E),Q(null))},onFocus:()=>{0===F.length&&E?M(!0):H.length>0&&M(!0)},placeholder:c,className:"pl-10 pr-10","aria-label":"Location search","aria-expanded":L,"aria-haspopup":"listbox",role:"combobox"}),F&&(0,d.jsx)("button",{type:"button",onClick:()=>{b(null),G(""),M(E),X.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-100 rounded","aria-label":"Clear location",children:(0,d.jsx)(n.A,{className:"h-3 w-3 text-gray-700"})}),J&&(0,d.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,d.jsx)(o.A,{className:"h-4 w-4 animate-spin text-gray-700"})})]}),A&&(0,d.jsx)(f.$,{type:"button",variant:"outline",size:"icon",onClick:()=>{if(!navigator.geolocation)return void Q("Geolocation is not supported by your browser");O(!0),Q(null),navigator.geolocation.getCurrentPosition(async a=>{let{latitude:c,longitude:d}=a.coords;try{let a=await fetch("https://nominatim.openstreetmap.org/reverse?"+new URLSearchParams({lat:c.toString(),lon:d.toString(),format:"json","accept-language":"en"}));if(a.ok){let e=await a.json(),f={latitude:c,longitude:d,display_name:e.display_name||`${c.toFixed(6)}, ${d.toFixed(6)}`,place_id:e.place_id};b(f),G(f.display_name),M(!1)}else{let a={latitude:c,longitude:d,display_name:`${c.toFixed(6)}, ${d.toFixed(6)}`};b(a),G(a.display_name),M(!1)}}catch(e){x.Rm.error("Reverse geocoding failed",{component:"LocationDropdown",action:"reverse-geocode",latitude:c,longitude:d},e);let a={latitude:c,longitude:d,display_name:`${c.toFixed(6)}, ${d.toFixed(6)}`};b(a),G(a.display_name),M(!1)}O(!1)},a=>{let b=y.zc.handle(a,{component:"LocationDropdown",action:"get-current-location",errorCode:a.code}).userMessage;switch(a.code){case a.PERMISSION_DENIED:b="Location access denied. Please enable location permissions.";break;case a.POSITION_UNAVAILABLE:b="Location information unavailable. Please try again.";break;case a.TIMEOUT:b="Location request timed out. Please try again."}Q(b),O(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},disabled:N,title:"Use current location","aria-label":"Use current location",children:N?(0,d.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(p.A,{className:"h-4 w-4"})})]}),P&&(0,d.jsx)("div",{className:"flex items-start gap-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-600",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{children:P}),P.includes("internet connection")&&(0,d.jsx)("button",{onClick:()=>{Q(null),R(0),F.length>=2&&_(F)},className:"mt-1 text-red-700 underline hover:no-underline",children:"Try again"})]})}),a&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-800",children:[(0,d.jsx)(l.A,{className:"h-3 w-3"}),(0,d.jsx)("span",{children:v(a.latitude,a.longitude)})]})]}),L&&(0,d.jsx)(h.Zp,{className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-96 overflow-hidden",children:(0,d.jsxs)(h.Wu,{className:"p-0",children:[F.length>=2&&H.length>0&&(0,d.jsxs)("div",{className:"border-b border-gray-200",children:[(0,d.jsx)("div",{className:"p-3 bg-gray-50 border-b",children:(0,d.jsxs)("h4",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,d.jsx)(m.A,{className:"h-4 w-4"}),"Search Results"]})}),(0,d.jsx)("div",{className:"max-h-48 overflow-y-auto",children:H.map(a=>{var c;return(0,d.jsx)("button",{type:"button",className:"w-full text-left p-3 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0",onClick:()=>(a=>{let c=parseFloat(a.lat),d=parseFloat(a.lon);if(!(t(c,d).isValid&&!(c<-60)&&1))return void Q("Selected location has invalid coordinates. Please choose a different location.");let e={latitude:c,longitude:d,display_name:w(a.display_name),place_id:a.place_id},f=u(e);if(!f.isValid)return void Q(`Invalid location: ${f.errors.join(", ")}`);b(e),G(e.display_name),M(!1),Q(null),X.current?.blur()})(a),children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)(l.A,{className:"h-4 w-4 text-gray-700 mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 line-clamp-1",children:(c=a.display_name).length>60?c.substring(0,60)+"...":c}),(0,d.jsx)("p",{className:"text-sm text-gray-800",children:v(parseFloat(a.lat),parseFloat(a.lon),4)})]})]})},a.place_id)})})]}),E&&(0===F.length||0===H.length)&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"p-3 bg-gray-50 border-b",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("h4",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,d.jsx)(j.A,{className:"h-4 w-4 text-yellow-500"}),"Popular Destinations"]})}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[(0,d.jsx)(f.$,{type:"button",variant:null===U?"default":"outline",size:"sm",onClick:()=>V(null),className:"h-6 text-sm",children:"All"}),D.map(a=>(0,d.jsx)(f.$,{type:"button",variant:U===a?"default":"outline",size:"sm",onClick:()=>V(a),className:"h-6 text-sm",children:a},a))]})]}),(0,d.jsx)("div",{className:"max-h-64 overflow-y-auto",children:(0,d.jsx)("div",{className:"grid grid-cols-1 gap-0",children:aa.map(a=>(0,d.jsx)("button",{type:"button",className:"w-full text-left p-3 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",onClick:()=>(a=>{let c={latitude:a.latitude,longitude:a.longitude,display_name:`${a.name}, ${a.country}`,city_id:a.id},d=u(c);if(!d.isValid)return void Q(`Invalid destination: ${d.errors.join(", ")}`);b(c),G(c.display_name),M(!1),Q(null),X.current?.blur()})(a),children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(a=>{switch(a){case"capital":return(0,d.jsx)(j.A,{className:"h-3 w-3 text-yellow-500"});case"island":return(0,d.jsx)(k.A,{className:"h-3 w-3 text-blue-500"});default:return(0,d.jsx)(l.A,{className:"h-3 w-3 text-gray-800"})}})(a.city_type),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:a.name}),(0,d.jsx)("p",{className:"text-sm text-gray-800",children:a.country})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[a.airport_code&&(0,d.jsxs)(i.E,{variant:"outline",className:"text-sm",children:[(0,d.jsx)(q.A,{className:"h-2 w-2 mr-1"}),a.airport_code]}),(0,d.jsx)(i.E,{variant:"secondary",className:"text-sm",children:a.region})]})]})},a.id))})})]}),F.length>=2&&0===H.length&&!J&&(0,d.jsxs)("div",{className:"p-6 text-center",children:[(0,d.jsx)(l.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-700"}),(0,d.jsxs)("p",{className:"text-gray-800",children:['No locations found for "',F,'"']}),(0,d.jsx)("p",{className:"text-sm text-gray-800 mt-1",children:"Try a different search term or pick from popular destinations"})]})]})})]})}},52647:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},68120:(a,b,c)=>{c.d(b,{J:()=>g});var d=c(21124);c(38301);var e=c(46029),f=c(44943);function g({className:a,...b}){return(0,d.jsx)(e.b,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...b})}},68254:(a,b,c)=>{c.d(b,{T:()=>f});var d=c(21124);c(38301);var e=c(44943);function f({className:a,...b}){return(0,d.jsx)("textarea",{"data-slot":"textarea",className:(0,e.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...b})}},71432:(a,b,c)=>{c.d(b,{Et:()=>g,NC:()=>h,hS:()=>f,zc:()=>e});var d=c(57618);class e{static getErrorType(a){if(a instanceof Error){let b=a.message.toLowerCase();if(b.includes("fetch")||b.includes("network")||b.includes("connection"))return"network";if(b.includes("401")||b.includes("unauthorized")||b.includes("auth"))return"authentication";if(b.includes("403")||b.includes("forbidden"))return"authorization";if(b.includes("400")||b.includes("validation")||b.includes("invalid"))return"validation";if(b.includes("413")||b.includes("file")||b.includes("upload"))return"file_upload";if(b.includes("5")&&(b.includes("500")||b.includes("502")||b.includes("503")))return"database"}return"unknown"}static getUserMessage(a,b){switch(a){case"network":return"Connection failed. Please check your internet connection and try again.";case"authentication":return"Authentication required. Please sign in and try again.";case"authorization":return"You don't have permission to perform this action.";case"validation":return"Invalid data provided. Please check your input and try again.";case"file_upload":if(b.includes("413")||b.includes("large"))return"File is too large. Please choose a smaller file.";if(b.includes("type")||b.includes("format"))return"File type not supported. Please choose a different file.";return"File upload failed. Please try again.";case"database":return"Service temporarily unavailable. Please try again in a moment.";case"external_api":return"External service unavailable. Some features may be temporarily limited.";default:return"Something went wrong. Please try again."}}static isRetryable(a){return["network","database","external_api"].includes(a)}static isRecoverable(a){return["network","validation","file_upload","database","external_api"].includes(a)}static handle(a,b){let c=this.getErrorType(a),e=a instanceof Error?a.message:String(a),f=this.getUserMessage(c,e),g={type:c,message:e,userMessage:f,originalError:a,context:b,recoverable:this.isRecoverable(c),retryable:this.isRetryable(c)};switch(c){case"validation":case"network":case"external_api":d.Rm.warn(e,b,a);break;default:d.Rm.error(e,b,a)}return g}static async handleAsync(a,b,c){try{return{data:await a()}}catch(a){return{error:this.handle(a,b),data:c}}}static handleSync(a,b,c){try{return{data:a()}}catch(a){return{error:this.handle(a,b),data:c}}}}let f=(a,b)=>e.handle(a,{...b,action:`api-${b.action}`}),g=(a,b)=>e.handle(a,{...b,action:`upload-${b.action}`}),h=(a,b)=>e.handle(a,{...b,action:`form-${b.action}`})},99187:(a,b,c)=>{c.d(b,{E:()=>h});var d=c(21124);c(38301);var e=c(26691),f=c(44943);let g=(0,e.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}}};