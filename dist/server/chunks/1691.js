"use strict";exports.id=1691,exports.ids=[1691],exports.modules={3368:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},22842:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},49269:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},49330:(a,b,c)=>{c.d(b,{k:()=>h});var d=c(38301),e=c(70798),f=c(69773),g=c(57618);function h(a){let{user:b}=(0,f.A)(),[c,h]=(0,d.useState)(!1),[i,j]=(0,d.useState)(null),[k,l]=(0,d.useState)({followersCount:0,followingCount:0,pendingRequestsCount:0}),[m,n]=(0,d.useState)("not_following"),[o,p]=(0,d.useState)([]),[q,r]=(0,d.useState)([]),[s,t]=(0,d.useState)([]),u=(0,e.UU)(),v=(0,d.useCallback)(async()=>{if(b?.id)try{let[a,c,d]=await Promise.all([u.from("followers").select("id",{count:"exact"}).eq("following_id",b.id).eq("status","accepted"),u.from("followers").select("id",{count:"exact"}).eq("follower_id",b.id).eq("status","accepted"),u.from("followers").select("id",{count:"exact"}).eq("following_id",b.id).eq("status","pending")]);l({followersCount:a.count||0,followingCount:c.count||0,pendingRequestsCount:d.count||0})}catch(a){g.Rm.error("Error fetching follow stats",{component:"useFollows",action:"refreshStats",userId:b.id},a instanceof Error?a:Error(String(a))),j(a instanceof Error?a.message:"Failed to fetch follow stats")}},[b?.id,u]),w=(0,d.useCallback)(async a=>{if(!b?.id||a===b.id)return"not_following";try{let{data:c,error:d}=await u.from("followers").select("status").eq("follower_id",b.id).eq("following_id",a).single();if(d&&"PGRST116"!==d.code)throw d;if(!c)return"not_following";switch(c.status){case"accepted":return"following";case"pending":return"pending";case"rejected":return"blocked";default:return"not_following"}}catch(c){return g.Rm.error("Error getting follow status",{component:"useFollows",action:"getFollowStatus",userId:a,currentUser:b.id},c instanceof Error?c:Error(String(c))),"not_following"}},[b?.id,u]),x=(0,d.useCallback)(async a=>{if(b?.id&&a!==b.id)try{h(!0),j(null);let{data:c,error:d}=await u.rpc("handle_follow_request",{follower_id_param:b.id,following_id_param:a});if(d)throw d;"accepted"===c?n("following"):"pending"===c&&n("pending"),await v(),g.Rm.info("Follow request processed",{component:"useFollows",action:"follow",targetUserId:a,result:c})}catch(b){g.Rm.error("Error following user",{component:"useFollows",action:"follow",targetUserId:a},b instanceof Error?b:Error(String(b))),j(b instanceof Error?b.message:"Failed to follow user")}finally{h(!1)}},[b?.id,u,v]),y=(0,d.useCallback)(async a=>{if(b?.id)try{h(!0),j(null);let{error:c}=await u.from("followers").delete().eq("follower_id",b.id).eq("following_id",a);if(c)throw c;n("not_following"),await v(),g.Rm.info("User unfollowed",{component:"useFollows",action:"unfollow",targetUserId:a})}catch(b){g.Rm.error("Error unfollowing user",{component:"useFollows",action:"unfollow",targetUserId:a},b instanceof Error?b:Error(String(b))),j(b instanceof Error?b.message:"Failed to unfollow user")}finally{h(!1)}},[b?.id,u,v]),z=(0,d.useCallback)(async a=>{if(b?.id)try{h(!0),j(null);let{error:c}=await u.rpc("accept_follow_request",{follower_id_param:a,following_id_param:b.id});if(c)throw c;await Promise.all([v(),B()]),g.Rm.info("Follow request accepted",{component:"useFollows",action:"acceptFollowRequest",followerUserId:a})}catch(b){g.Rm.error("Error accepting follow request",{component:"useFollows",action:"acceptFollowRequest",followerUserId:a},b instanceof Error?b:Error(String(b))),j(b instanceof Error?b.message:"Failed to accept follow request")}finally{h(!1)}},[b?.id,u,v]),A=(0,d.useCallback)(async a=>{if(b?.id)try{h(!0),j(null);let{error:c}=await u.rpc("reject_follow_request",{follower_id_param:a,following_id_param:b.id});if(c)throw c;await Promise.all([v(),B()]),g.Rm.info("Follow request rejected",{component:"useFollows",action:"rejectFollowRequest",followerUserId:a})}catch(b){g.Rm.error("Error rejecting follow request",{component:"useFollows",action:"rejectFollowRequest",followerUserId:a},b instanceof Error?b:Error(String(b))),j(b instanceof Error?b.message:"Failed to reject follow request")}finally{h(!1)}},[b?.id,u,v]),B=(0,d.useCallback)(async()=>{if(b?.id)try{let[a,c,d]=await Promise.all([u.from("followers").select(`
            *,
            follower:profiles!followers_follower_id_fkey(*)
          `).eq("following_id",b.id).eq("status","accepted"),u.from("followers").select(`
            *,
            following:profiles!followers_following_id_fkey(*)
          `).eq("follower_id",b.id).eq("status","accepted"),u.from("followers").select(`
            *,
            follower:profiles!followers_follower_id_fkey(*)
          `).eq("following_id",b.id).eq("status","pending")]);p(a.data||[]),r(c.data||[]),t(d.data||[])}catch(a){g.Rm.error("Error fetching follow lists",{component:"useFollows",action:"refreshFollowLists",userId:b.id},a instanceof Error?a:Error(String(a))),j(a instanceof Error?a.message:"Failed to fetch follow lists")}},[b?.id,u]);return{stats:k,loading:c,error:i,followStatus:m,follow:x,unfollow:y,acceptFollowRequest:z,rejectFollowRequest:A,followers:o,following:q,pendingRequests:s,getFollowStatus:w,refreshStats:v,refreshFollowLists:B}}},63091:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},65893:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},74331:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},91722:(a,b,c)=>{c.d(b,{lG:()=>aa,Cf:()=>ae,rr:()=>ai,Es:()=>ag,c7:()=>af,L3:()=>ah,zM:()=>ab});var d=c(21124),e=c(38301),f=c(87868),g=c(92808),h=c(2332),i=c(75656),j=c(11720),k=c(7412),l=c(69998),m=c(61611),n=c(29988),o=c(6406),p=c(70904),q=c(10342),r=c(61225),s=c(96425),t="Dialog",[u,v]=(0,h.A)(t),[w,x]=u(t),y=a=>{let{__scopeDialog:b,children:c,open:f,defaultOpen:g,onOpenChange:h,modal:k=!0}=a,l=e.useRef(null),m=e.useRef(null),[n,o]=(0,j.i)({prop:f,defaultProp:g??!1,onChange:h,caller:t});return(0,d.jsx)(w,{scope:b,triggerRef:l,contentRef:m,contentId:(0,i.B)(),titleId:(0,i.B)(),descriptionId:(0,i.B)(),open:n,onOpenChange:o,onOpenToggle:e.useCallback(()=>o(a=>!a),[o]),modal:k,children:c})};y.displayName=t;var z="DialogTrigger",A=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,h=x(z,c),i=(0,g.s)(b,h.triggerRef);return(0,d.jsx)(o.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":U(h.open),...e,ref:i,onClick:(0,f.mK)(a.onClick,h.onOpenToggle)})});A.displayName=z;var B="DialogPortal",[C,D]=u(B,{forceMount:void 0}),E=a=>{let{__scopeDialog:b,forceMount:c,children:f,container:g}=a,h=x(B,b);return(0,d.jsx)(C,{scope:b,forceMount:c,children:e.Children.map(f,a=>(0,d.jsx)(n.C,{present:c||h.open,children:(0,d.jsx)(m.Z,{asChild:!0,container:g,children:a})}))})};E.displayName=B;var F="DialogOverlay",G=e.forwardRef((a,b)=>{let c=D(F,a.__scopeDialog),{forceMount:e=c.forceMount,...f}=a,g=x(F,a.__scopeDialog);return g.modal?(0,d.jsx)(n.C,{present:e||g.open,children:(0,d.jsx)(I,{...f,ref:b})}):null});G.displayName=F;var H=(0,s.TL)("DialogOverlay.RemoveScroll"),I=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=x(F,c);return(0,d.jsx)(q.A,{as:H,allowPinchZoom:!0,shards:[f.contentRef],children:(0,d.jsx)(o.sG.div,{"data-state":U(f.open),...e,ref:b,style:{pointerEvents:"auto",...e.style}})})}),J="DialogContent",K=e.forwardRef((a,b)=>{let c=D(J,a.__scopeDialog),{forceMount:e=c.forceMount,...f}=a,g=x(J,a.__scopeDialog);return(0,d.jsx)(n.C,{present:e||g.open,children:g.modal?(0,d.jsx)(L,{...f,ref:b}):(0,d.jsx)(M,{...f,ref:b})})});K.displayName=J;var L=e.forwardRef((a,b)=>{let c=x(J,a.__scopeDialog),h=e.useRef(null),i=(0,g.s)(b,c.contentRef,h);return e.useEffect(()=>{let a=h.current;if(a)return(0,r.Eq)(a)},[]),(0,d.jsx)(N,{...a,ref:i,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,f.mK)(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:(0,f.mK)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,f.mK)(a.onFocusOutside,a=>a.preventDefault())})}),M=e.forwardRef((a,b)=>{let c=x(J,a.__scopeDialog),f=e.useRef(!1),g=e.useRef(!1);return(0,d.jsx)(N,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||c.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let d=b.target;c.triggerRef.current?.contains(d)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),N=e.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:f,onOpenAutoFocus:h,onCloseAutoFocus:i,...j}=a,m=x(J,c),n=e.useRef(null),o=(0,g.s)(b,n);return(0,p.Oh)(),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.n,{asChild:!0,loop:!0,trapped:f,onMountAutoFocus:h,onUnmountAutoFocus:i,children:(0,d.jsx)(k.qW,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":U(m.open),...j,ref:o,onDismiss:()=>m.onOpenChange(!1)})}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Y,{titleId:m.titleId}),(0,d.jsx)(Z,{contentRef:n,descriptionId:m.descriptionId})]})]})}),O="DialogTitle",P=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=x(O,c);return(0,d.jsx)(o.sG.h2,{id:f.titleId,...e,ref:b})});P.displayName=O;var Q="DialogDescription",R=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,f=x(Q,c);return(0,d.jsx)(o.sG.p,{id:f.descriptionId,...e,ref:b})});R.displayName=Q;var S="DialogClose",T=e.forwardRef((a,b)=>{let{__scopeDialog:c,...e}=a,g=x(S,c);return(0,d.jsx)(o.sG.button,{type:"button",...e,ref:b,onClick:(0,f.mK)(a.onClick,()=>g.onOpenChange(!1))})});function U(a){return a?"open":"closed"}T.displayName=S;var V="DialogTitleWarning",[W,X]=(0,h.q)(V,{contentName:J,titleName:O,docsSlug:"dialog"}),Y=({titleId:a})=>{let b=X(V),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return e.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},Z=({contentRef:a,descriptionId:b})=>{let c=X("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return e.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null},$=c(47089),_=c(44943);function aa({...a}){return(0,d.jsx)(y,{"data-slot":"dialog",...a})}function ab({...a}){return(0,d.jsx)(A,{"data-slot":"dialog-trigger",...a})}function ac({...a}){return(0,d.jsx)(E,{"data-slot":"dialog-portal",...a})}function ad({className:a,...b}){return(0,d.jsx)(G,{"data-slot":"dialog-overlay",className:(0,_.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function ae({className:a,children:b,showCloseButton:c=!0,...e}){return(0,d.jsxs)(ac,{"data-slot":"dialog-portal",children:[(0,d.jsx)(ad,{}),(0,d.jsxs)(K,{"data-slot":"dialog-content",className:(0,_.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...e,children:[b,c&&(0,d.jsxs)(T,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,d.jsx)($.A,{}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function af({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-header",className:(0,_.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function ag({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-footer",className:(0,_.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function ah({className:a,...b}){return(0,d.jsx)(P,{"data-slot":"dialog-title",className:(0,_.cn)("text-lg leading-none font-semibold",a),...b})}function ai({className:a,...b}){return(0,d.jsx)(R,{"data-slot":"dialog-description",className:(0,_.cn)("text-muted-foreground text-sm",a),...b})}},99187:(a,b,c)=>{c.d(b,{E:()=>h});var d=c(21124);c(38301);var e=c(26691),f=c(44943);let g=(0,e.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}}};