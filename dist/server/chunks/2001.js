"use strict";exports.id=2001,exports.ids=[2001],exports.modules={4268:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},32842:(a,b,c)=>{c.d(b,{tU:()=>D,av:()=>G,j7:()=>E,Xi:()=>F});var d=c(21124),e=c(38301),f=c(87868),g=c(2332),h=c(88617),i=c(29988),j=c(6406),k=c(10498),l=c(11720),m=c(75656),n="Tabs",[o,p]=(0,g.A)(n,[h.RG]),q=(0,h.RG)(),[r,s]=o(n),t=e.forwardRef((a,b)=>{let{__scopeTabs:c,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:o="automatic",...p}=a,q=(0,k.jH)(i),[s,t]=(0,l.i)({prop:e,onChange:f,defaultProp:g??"",caller:n});return(0,d.jsx)(r,{scope:c,baseId:(0,m.B)(),value:s,onValueChange:t,orientation:h,dir:q,activationMode:o,children:(0,d.jsx)(j.sG.div,{dir:q,"data-orientation":h,...p,ref:b})})});t.displayName=n;var u="TabsList",v=e.forwardRef((a,b)=>{let{__scopeTabs:c,loop:e=!0,...f}=a,g=s(u,c),i=q(c);return(0,d.jsx)(h.bL,{asChild:!0,...i,orientation:g.orientation,dir:g.dir,loop:e,children:(0,d.jsx)(j.sG.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:b})})});v.displayName=u;var w="TabsTrigger",x=e.forwardRef((a,b)=>{let{__scopeTabs:c,value:e,disabled:g=!1,...i}=a,k=s(w,c),l=q(c),m=A(k.baseId,e),n=B(k.baseId,e),o=e===k.value;return(0,d.jsx)(h.q7,{asChild:!0,...l,focusable:!g,active:o,children:(0,d.jsx)(j.sG.button,{type:"button",role:"tab","aria-selected":o,"aria-controls":n,"data-state":o?"active":"inactive","data-disabled":g?"":void 0,disabled:g,id:m,...i,ref:b,onMouseDown:(0,f.mK)(a.onMouseDown,a=>{g||0!==a.button||!1!==a.ctrlKey?a.preventDefault():k.onValueChange(e)}),onKeyDown:(0,f.mK)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&k.onValueChange(e)}),onFocus:(0,f.mK)(a.onFocus,()=>{let a="manual"!==k.activationMode;o||g||!a||k.onValueChange(e)})})})});x.displayName=w;var y="TabsContent",z=e.forwardRef((a,b)=>{let{__scopeTabs:c,value:f,forceMount:g,children:h,...k}=a,l=s(y,c),m=A(l.baseId,f),n=B(l.baseId,f),o=f===l.value,p=e.useRef(o);return e.useEffect(()=>{let a=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,d.jsx)(i.C,{present:g||o,children:({present:c})=>(0,d.jsx)(j.sG.div,{"data-state":o?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":m,hidden:!c,id:n,tabIndex:0,...k,ref:b,style:{...a.style,animationDuration:p.current?"0s":void 0},children:c&&h})})});function A(a,b){return`${a}-trigger-${b}`}function B(a,b){return`${a}-content-${b}`}z.displayName=y;var C=c(44943);function D({className:a,...b}){return(0,d.jsx)(t,{"data-slot":"tabs",className:(0,C.cn)("flex flex-col gap-2",a),...b})}function E({className:a,...b}){return(0,d.jsx)(v,{"data-slot":"tabs-list",className:(0,C.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...b})}function F({className:a,...b}){return(0,d.jsx)(x,{"data-slot":"tabs-trigger",className:(0,C.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...b})}function G({className:a,...b}){return(0,d.jsx)(z,{"data-slot":"tabs-content",className:(0,C.cn)("flex-1 outline-none",a),...b})}},52463:(a,b,c)=>{c.d(b,{OT:()=>o,c2:()=>n});var d=c(21124),e=c(38301),f=c(55169),g=c(23673),h=c(35284),i=c(99187),j=c(67817),k=c(44943),l=c(42830);function m({targetId:a,targetType:b,metadata:c,variant:m="ghost",size:n="default",showCount:o=!1,showLabel:p=!1,className:q,disabled:r=!1,onToggle:s}){let{isFavorited:t,toggleFavorite:u,getFavoritesCount:v,loading:w,checkOwnership:x}=(0,j.rB)({targetType:b,autoFetch:!0}),[y,z]=(0,e.useState)(!1),[A,B]=(0,e.useState)(!1),C=t(a,b),D=o?v(b):0,E=r||A,F=async()=>{if(!E&&!y){z(!0);try{let d=await u(a,b,c);s?.(d),l.oR.success(d?`Added to ${b} favorites`:`Removed from ${b} favorites`,{duration:2e3,position:"bottom-center"})}catch(a){l.oR.error(a instanceof Error?a.message:`Failed to update ${b} favorite`,{duration:3e3,position:"bottom-center"})}finally{setTimeout(()=>z(!1),300)}}};return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(h.$,{variant:m,size:n,onClick:F,disabled:E||w||y,title:A?"Cannot favorite your own content":void 0,className:(0,k.cn)("relative overflow-hidden transition-colors",C&&"ghost"===m&&"text-red-600 hover:text-red-700 hover:bg-red-50",C&&"outline"===m&&"border-red-300 text-red-600 hover:bg-red-50",C&&"default"===m&&"bg-red-600 hover:bg-red-700 text-white",A&&"opacity-50 cursor-not-allowed",q),"aria-label":A?"Cannot favorite your own content":`${C?"Remove from":"Add to"} ${b} favorites`,children:[(0,d.jsxs)(f.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.2},className:"flex items-center gap-2",children:[(0,d.jsx)(g.A,{className:(0,k.cn)("h-4 w-4 transition-all duration-200",C&&"fill-current",y&&"scale-125")}),p&&(0,d.jsx)("span",{className:"text-sm font-medium",children:(()=>{if(!p)return null;if(A)return"Cannot favorite own content";switch(b){case"photo":return C?"Favorited":"Add to favorites";case"album":return"Favorite album";case"location":return C?"Favorite place":"Add to wishlist";default:return C?"Favorited":"Favorite"}})()})]},C?"filled":"empty"),y&&C&&(0,d.jsx)(f.P.div,{initial:{scale:0,opacity:.7},animate:{scale:2,opacity:0},transition:{duration:.4},className:"absolute inset-0 bg-red-400 rounded-full"})]}),o&&D>0&&(0,d.jsx)(i.E,{variant:"secondary",className:"text-sm bg-gray-100 text-gray-800",children:D})]})}function n(a){return(0,d.jsx)(m,{...a,targetType:"location"})}function o({targetId:a,targetType:b,metadata:c,className:e,...f}){return(0,d.jsx)(m,{targetId:a,targetType:b,metadata:c,variant:"ghost",size:"sm",showCount:!1,showLabel:!1,className:(0,k.cn)("h-8 w-8 p-0",e),...f})}},55705:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(23339).A)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]])},67817:(a,b,c)=>{c.d(b,{rB:()=>h});var d=c(38301),e=c(20814),f=c(69773),g=c(57618);function h(a={}){let{targetType:b,targetId:c,autoFetch:i=!0}=a,{user:j}=(0,f.A)(),[k,l]=(0,d.useState)([]),[m,n]=(0,d.useState)(!1),[o,p]=(0,d.useState)(null),q=(0,e.U)(),r=(0,d.useCallback)(async(a,b)=>{if(!j?.id)return!1;try{let c;switch(b){case"photo":c=q.from("photos").select("user_id").eq("id",a).single();break;case"album":c=q.from("albums").select("user_id").eq("id",a).single();break;default:return!1}let{data:d}=await c;return d?.user_id===j.id}catch(c){return g.Rm.error("Error checking content ownership",{itemId:a,itemType:b,error:c}),!1}},[j?.id,q]),s=(0,d.useCallback)(async()=>{if(!j)return void l([]);n(!0),p(null);try{let a=q.from("favorites").select(`
          id,
          user_id,
          target_id,
          target_type,
          created_at,
          metadata
        `).eq("user_id",j.id).order("created_at",{ascending:!1});b&&(a=a.eq("target_type",b)),c&&(a=a.eq("target_id",c));let{data:d,error:e}=await a;if(e)throw e;l(d||[]),g.Rm.debug("Favorites fetched successfully",{component:"useFavorites",action:"fetchFavorites",count:d?.length||0,targetType:b,targetId:c})}catch(a){p(a instanceof Error?a.message:"Failed to fetch favorites"),g.Rm.error("Failed to fetch favorites",{error:a})}finally{n(!1)}},[j,b,c,q]),t=(0,d.useCallback)((a,b="photo")=>k.some(c=>c.target_id===a&&c.target_type===b),[k]),u=(0,d.useCallback)(async(a,b="photo",c)=>{if(!j)throw Error("Must be logged in to add favorites");if(await r(a,b))throw Error("You cannot favorite your own content");if(!t(a,b))try{let{data:d,error:e}=await q.from("favorites").insert({user_id:j.id,target_id:a,target_type:b,metadata:c||{}}).select().single();if(e)throw e;return l(a=>[d,...a]),g.Rm.info("Added favorite successfully",{component:"useFavorites",action:"addFavorite",targetId:a,targetType:b}),d}catch(a){throw p(a instanceof Error?a.message:"Failed to add favorite"),g.Rm.error("Failed to add favorite",{error:a}),a}},[j,t,q]),v=(0,d.useCallback)(async(a,b="photo")=>{if(!j)throw Error("Must be logged in to remove favorites");try{let{error:c}=await q.from("favorites").delete().eq("user_id",j.id).eq("target_id",a).eq("target_type",b);if(c)throw c;l(c=>c.filter(c=>c.target_id!==a||c.target_type!==b)),g.Rm.info("Removed favorite successfully",{component:"useFavorites",action:"removeFavorite",targetId:a,targetType:b})}catch(a){throw p(a instanceof Error?a.message:"Failed to remove favorite"),g.Rm.error("Failed to remove favorite",{error:a}),a}},[j,q]),w=(0,d.useCallback)(async(a,b="photo",c)=>t(a,b)?(await v(a,b),!1):(await u(a,b,c),!0),[t,v,u]),x=(0,d.useCallback)(a=>a?k.filter(b=>b.target_type===a).length:k.length,[k]),y=(0,d.useCallback)((a=10,b)=>{let c=k;return b&&(c=k.filter(a=>a.target_type===b)),c.slice(0,a)},[k]);return{favorites:k,loading:m,error:o,fetchFavorites:s,isFavorited:t,addFavorite:u,removeFavorite:v,toggleFavorite:w,getFavoritesCount:x,getRecentFavorites:y,checkOwnership:r,photoFavorites:k.filter(a=>"photo"===a.target_type),albumFavorites:k.filter(a=>"album"===a.target_type),locationFavorites:k.filter(a=>"location"===a.target_type)}}},99187:(a,b,c)=>{c.d(b,{E:()=>h});var d=c(21124);c(38301);var e=c(26691),f=c(44943);let g=(0,e.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}}};