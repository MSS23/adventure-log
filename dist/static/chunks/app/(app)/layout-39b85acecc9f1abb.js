(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4944],{3998:(e,a,s)=>{"use strict";s.d(a,{$:()=>d});var t=s(95155);s(12115);var r=s(32467),i=s(83101),n=s(64269);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:a,variant:s,size:i,asChild:d=!1,...o}=e,c=d?r.DX:"button";return(0,t.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:s,size:i,className:a})),...o})}},6259:(e,a,s)=>{"use strict";s.d(a,{SQ:()=>d,_2:()=>o,lp:()=>c,mB:()=>u,rI:()=>n,ty:()=>l});var t=s(95155);s(12115);var r=s(47971),i=s(64269);function n(e){let{...a}=e;return(0,t.jsx)(r.bL,{"data-slot":"dropdown-menu",...a})}function l(e){let{...a}=e;return(0,t.jsx)(r.l9,{"data-slot":"dropdown-menu-trigger",...a})}function d(e){let{className:a,sideOffset:s=4,...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsx)(r.UC,{"data-slot":"dropdown-menu-content",sideOffset:s,className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...n})})}function o(e){let{className:a,inset:s,variant:n="default",...l}=e;return(0,t.jsx)(r.q7,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":n,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...l})}function c(e){let{className:a,inset:s,...n}=e;return(0,t.jsx)(r.JU,{"data-slot":"dropdown-menu-label","data-inset":s,className:(0,i.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",a),...n})}function u(e){let{className:a,...s}=e;return(0,t.jsx)(r.wv,{"data-slot":"dropdown-menu-separator",className:(0,i.cn)("bg-border -mx-1 my-1 h-px",a),...s})}},19149:(e,a,s)=>{Promise.resolve().then(s.bind(s,74916))},62890:(e,a,s)=>{"use strict";s.d(a,{UU:()=>n});var t=s(87559);s(95704);let r="https://jjrqstbzzvqrgaqwdvxw.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpqcnFzdGJ6enZxcmdhcXdkdnh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0ODc4MDcsImV4cCI6MjA3NDA2MzgwN30.aSHFHAA5Tv2EUDu7nxwOWXSFFUxbOUCR65Vi52QkjX4";if(!r||!i)throw Error("Missing Supabase environment variables");function n(){return(0,t.createBrowserClient)(r,i)}},64269:(e,a,s)=>{"use strict";s.d(a,{cn:()=>i});var t=s(2821),r=s(75889);function i(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.QP)((0,t.$)(a))}},65142:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});var t=s(95155);s(12115);var r=s(64269);function i(e){let{className:a,type:s,...i}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}},74916:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>X});var t=s(95155),r=s(43691),i=s(20063),n=s(12115);function l(e){let{children:a,fallback:s}=e,{user:l,authLoading:d}=(0,r.A)(),o=(0,i.useRouter)();return((0,n.useEffect)(()=>{d||l||o.push("/login")},[l,d,o]),d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-800 font-medium",children:"Authenticating..."})]})}):l?(0,t.jsx)(t.Fragment,{children:a}):s||null}var d=s(52619),o=s.n(d),c=s(64269),u=s(3998),m=s(62890),x=s(82466),h=s(65993),g=s(95664),b=s(86651),f=s(50906),v=s(83457),p=s(39347),j=s(39068),y=s(20508),N=s(15870),w=s(65229),k=s(6191);let A=[{name:"Dashboard",href:"/dashboard",icon:h.A},{name:"Albums",href:"/albums",icon:g.A},{name:"Search",href:"/search",icon:b.A},{name:"Feed",href:"/feed",icon:f.A},{name:"Favorites",href:"/favorites",icon:v.A},{name:"Wishlist",href:"/wishlist",icon:p.A},{name:"Globe",href:"/globe",icon:j.A},{name:"Profile",href:"/profile",icon:y.A},{name:"Settings",href:"/settings",icon:N.A}];function _(e){let{open:a,onClose:s}=e,r=(0,i.usePathname)();return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:s}),(0,t.jsxs)("div",{className:(0,c.cn)("fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",a?"translate-x-0":"-translate-x-full"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b border-gray-200",children:[(0,t.jsxs)(o(),{href:"/dashboard",className:"flex items-center",children:[(0,t.jsx)(j.A,{className:"h-8 w-8 text-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Adventure Log"})]}),(0,t.jsx)(u.$,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:s,children:(0,t.jsx)(w.A,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("nav",{className:"flex-1 mt-6 px-3 pb-4 overflow-y-auto",children:[(0,t.jsx)("div",{className:"space-y-1",children:A.map(e=>{let a=r===e.href;return(0,t.jsxs)(o(),{href:e.href,className:(0,c.cn)("group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 ease-in-out",a?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 shadow-sm border-l-4 border-blue-500":"text-gray-700 hover:bg-gradient-to-r hover:from-gray-50 hover:to-blue-50 hover:text-gray-900 hover:shadow-sm"),onClick:s,children:[(0,t.jsx)(e.icon,{className:(0,c.cn)("mr-3 h-5 w-5 flex-shrink-0",a?"text-blue-700":"text-gray-700 group-hover:text-gray-800")}),e.name]},e.name)})}),(0,t.jsx)("div",{className:"mt-8 px-3",children:(0,t.jsx)(o(),{href:"/albums/new",children:(0,t.jsxs)(u.$,{className:"w-full justify-start bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-sm transition-all duration-200",children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"New Album"]})})})]}),(0,t.jsx)(z,{})]})]})]})}function z(){let{user:e}=(0,r.A)(),[a,s]=(0,n.useState)({albums:0,photos:0,countries:0}),[i,l]=(0,n.useState)(!0),d=(0,m.UU)(),o=(0,n.useCallback)(async()=>{try{var a;let[t,r]=await Promise.all([d.from("albums").select("id, country_id").eq("user_id",null==e?void 0:e.id),d.from("photos").select("id").eq("user_id",null==e?void 0:e.id)]),i=t.data||[],n=new Set(i.filter(e=>e.country_id).map(e=>e.country_id));s({albums:i.length,photos:(null==(a=r.data)?void 0:a.length)||0,countries:n.size})}catch(e){x.Rm.error("Error fetching sidebar stats",{error:e})}finally{l(!1)}},[null==e?void 0:e.id,d]);return(0,n.useEffect)(()=>{e&&o()},[e,o]),(0,t.jsx)("div",{className:"flex-shrink-0 p-4 border-t border-gray-200 bg-gray-50",children:(0,t.jsxs)("div",{className:"text-sm text-gray-800",children:[(0,t.jsx)("p",{className:"font-medium mb-2",children:"Quick Stats"}),i?(0,t.jsx)("div",{className:"mt-2 space-y-1",children:[void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-12 animate-pulse"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-6 animate-pulse"})]},a))}):(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Albums"}),(0,t.jsx)("span",{children:a.albums})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Photos"}),(0,t.jsx)("span",{children:a.photos})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Countries"}),(0,t.jsx)("span",{children:a.countries})]})]})]})})}var C=s(9540),S=s(85998),I=s(65142),P=s(85897),F=s(6259),U=s(84926);function q(){let{user:e,profile:a,signOut:s}=(0,r.A)();if(!e||!a)return null;let i=a.display_name?a.display_name.split(" ").map(e=>e[0]).join("").toUpperCase():a.username.substring(0,2).toUpperCase();return(0,t.jsxs)(F.rI,{children:[(0,t.jsx)(F.ty,{asChild:!0,children:(0,t.jsx)(u.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,t.jsxs)(P.eu,{className:"h-10 w-10",children:[(0,t.jsx)(P.BK,{src:a.avatar_url||"",alt:a.username}),(0,t.jsx)(P.q5,{children:i})]})})}),(0,t.jsxs)(F.SQ,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(F.lp,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:a.display_name||a.username}),(0,t.jsx)("p",{className:"text-sm leading-none text-muted-foreground",children:e.email})]})}),(0,t.jsx)(F.mB,{}),(0,t.jsx)(F._2,{asChild:!0,children:(0,t.jsxs)(o(),{href:"/profile",className:"flex items-center",children:[(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Profile"})]})}),(0,t.jsx)(F._2,{asChild:!0,children:(0,t.jsxs)(o(),{href:"/settings",className:"flex items-center",children:[(0,t.jsx)(N.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Settings"})]})}),(0,t.jsx)(F.mB,{}),(0,t.jsxs)(F._2,{className:"cursor-pointer text-red-600",onClick:s,children:[(0,t.jsx)(U.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Log out"})]})]})]})}var O=s(44781),$=s(59427),D=s(37494),E=s(79451),J=s(39926),L=s(24342),Q=s(58415);function B(e){let{variant:a="icon",className:s="",showLabel:r=!1}=e,{theme:i,currentTheme:n,setTheme:l,toggleTheme:d}=(0,O.D)(),o=[{value:"light",label:"Light",icon:$.A,description:"Light mode"},{value:"dark",label:"Dark",icon:D.A,description:"Dark mode"},{value:"system",label:"System",icon:E.A,description:"Follow system preference"}],m=o.find(e=>e.value===i),x=(null==m?void 0:m.icon)||$.A;return"compact"===a?(0,t.jsx)(u.$,{variant:"ghost",size:"sm",onClick:d,className:(0,c.cn)("relative h-9 w-9 rounded-md border border-gray-200 dark:border-gray-700","hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",s),title:"Switch to ".concat("light"===n?"dark":"light"," mode"),children:(0,t.jsx)(L.N,{mode:"wait",children:(0,t.jsx)(Q.P.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.2,ease:"easeInOut"},children:"light"===n?(0,t.jsx)($.A,{className:"h-4 w-4 text-amber-500"}):(0,t.jsx)(D.A,{className:"h-4 w-4 text-blue-400"})},n)})}):"icon"===a?(0,t.jsxs)(F.rI,{children:[(0,t.jsx)(F.ty,{asChild:!0,children:(0,t.jsxs)(u.$,{variant:"ghost",size:"sm",className:(0,c.cn)("relative h-9 w-9 rounded-md border border-gray-200 dark:border-gray-700","hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200","focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",s),title:"Toggle theme",children:[(0,t.jsx)(L.N,{mode:"wait",children:(0,t.jsx)(Q.P.div,{initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},exit:{scale:0,rotate:90},transition:{duration:.3,ease:[.4,0,.2,1],type:"spring",stiffness:300,damping:20},children:(0,t.jsx)(x,{className:(0,c.cn)("h-4 w-4","light"===i&&"text-amber-500","dark"===i&&"text-blue-400","system"===i&&"text-gray-800 dark:text-gray-700")})},i)}),(0,t.jsx)(Q.P.div,{className:"absolute inset-0 rounded-md",animate:{boxShadow:"dark"===n?"0 0 10px rgba(59, 130, 246, 0.3)":"0 0 10px rgba(245, 158, 11, 0.3)"},transition:{duration:.3}})]})}),(0,t.jsx)(F.SQ,{align:"end",className:"w-48 p-2 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border border-gray-200 dark:border-gray-700 shadow-xl",children:o.map(e=>{let a=e.icon,s=i===e.value;return(0,t.jsxs)(F._2,{onClick:()=>l(e.value),className:(0,c.cn)("flex items-center gap-3 px-3 py-2.5 rounded-md cursor-pointer transition-all duration-200","hover:bg-gray-100 dark:hover:bg-gray-800",s&&"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"),children:[(0,t.jsx)(Q.P.div,{animate:{scale:s?1.1:1,rotate:360*!!s},transition:{duration:.3},children:(0,t.jsx)(a,{className:(0,c.cn)("h-4 w-4","light"===e.value&&"text-amber-500","dark"===e.value&&"text-blue-400","system"===e.value&&"text-gray-800 dark:text-gray-700",s&&"drop-shadow-sm")})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:(0,c.cn)("font-medium text-sm",s?"text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300"),children:e.label}),(0,t.jsx)("div",{className:"text-sm text-gray-800 dark:text-gray-700",children:e.description})]}),s&&(0,t.jsx)(Q.P.div,{initial:{scale:0},animate:{scale:1},className:"w-2 h-2 rounded-full bg-blue-500"})]},e.value)})})]}):(0,t.jsxs)(F.rI,{children:[(0,t.jsx)(F.ty,{asChild:!0,children:(0,t.jsxs)(u.$,{variant:"outline",className:(0,c.cn)("gap-2 transition-all duration-200 hover:shadow-md",s),children:[(0,t.jsx)(L.N,{mode:"wait",children:(0,t.jsx)(Q.P.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2},children:(0,t.jsx)(x,{className:"h-4 w-4"})},i)}),r&&(0,t.jsx)("span",{className:"text-sm font-medium",children:null==m?void 0:m.label}),(0,t.jsx)(J.A,{className:"h-3 w-3 opacity-60"})]})}),(0,t.jsx)(F.SQ,{align:"end",className:"w-48",children:o.map(e=>{let a=e.icon,s=i===e.value;return(0,t.jsxs)(F._2,{onClick:()=>l(e.value),className:(0,c.cn)("flex items-center gap-3",s&&"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"),children:[(0,t.jsx)(a,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.label})]},e.value)})})]})}function M(e){let{onMenuClick:a}=e;return(0,t.jsx)("header",{className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-b border-gray-200/50 dark:border-gray-700/50 px-4 sm:px-6 lg:px-8 xl:px-10 py-3 shadow-sm transition-all duration-300",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-12",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(u.$,{variant:"ghost",size:"sm",className:"lg:hidden h-8 w-8 p-0",onClick:a,children:(0,t.jsx)(C.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"relative hidden sm:block",children:[(0,t.jsx)(b.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-700 dark:text-gray-800"}),(0,t.jsx)(I.p,{placeholder:"Search albums, photos...",className:"pl-10 w-72 h-9 bg-gray-50/50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 focus:bg-white dark:focus:bg-gray-800 transition-colors text-sm"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(B,{variant:"icon"}),(0,t.jsxs)(u.$,{variant:"ghost",size:"sm",className:"relative h-8 w-8 p-0",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 text-white text-sm rounded-full flex items-center justify-center text-[10px]",children:"3"})]}),(0,t.jsx)(q,{})]})]})})}function X(e){let{children:a}=e,[s,r]=(0,n.useState)(!1);return(0,t.jsx)(l,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-100/30 dark:from-gray-900 dark:to-blue-900/20 transition-colors duration-300",children:[(0,t.jsx)(_,{open:s,onClose:()=>r(!1)}),(0,t.jsxs)("div",{className:"lg:pl-64",children:[(0,t.jsx)(M,{onMenuClick:()=>r(!0)}),(0,t.jsx)("main",{className:"p-4 sm:p-6 lg:p-8 xl:p-10 max-w-7xl mx-auto",children:a})]})]})})}},85897:(e,a,s)=>{"use strict";s.d(a,{BK:()=>l,eu:()=>n,q5:()=>d});var t=s(95155);s(12115);var r=s(46591),i=s(64269);function n(e){let{className:a,...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"avatar",className:(0,i.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)(r._V,{"data-slot":"avatar-image",className:(0,i.cn)("aspect-square size-full",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)(r.H4,{"data-slot":"avatar-fallback",className:(0,i.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...s})}}},e=>{e.O(0,[4545,7559,2619,8415,306,264,8868,6769,6980,4874,8407,8441,1255,7358],()=>e(e.s=19149)),_N_E=e.O()}]);