(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1708],{31120:(e,s,a)=>{"use strict";a.d(s,{T:()=>l});var r=a(95155);a(12115);var t=a(64269);function l(e){let{className:s,...a}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,t.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}},35299:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},38066:(e,s,a)=>{Promise.resolve().then(a.bind(a,44696))},42529:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},44696:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var r=a(95155),t=a(12115),l=a(22544),i=a(66942),n=a(35299),c=a(42529);let d=(0,a(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=a(3998),m=a(65142),u=a(76444),x=a(31120),h=a(86948),p=a(5366),b=a(72911),y=a(96648);function j(){let{createProfile:e,loading:s,error:a}=(0,p.B)(),[j,v]=(0,t.useState)(null),[f,N]=(0,t.useState)(null),g=(0,y.U)(),{register:w,handleSubmit:k,formState:{errors:I},watch:z}=(0,l.mN)({resolver:(0,i.u)(b.Fk)}),A=z("username");(0,t.useEffect)(()=>{let e=async e=>{if(!e||e.length<3||!/^[a-zA-Z0-9_]+$/.test(e))return void v(null);v("checking");try{let{data:s,error:a}=await g.from("profiles").select("username").eq("username",e).single();a&&"PGRST116"===a.code?v("available"):s?v("taken"):a&&v("error")}catch(e){v("error")}};return f&&(clearTimeout(f),N(null)),A?N(setTimeout(()=>{e(A)},500)):v(null),()=>{}},[A,g]),(0,t.useEffect)(()=>()=>{f&&clearTimeout(f)},[f]);let C=async s=>{"available"===j&&await e(s)},J=()=>{switch(j){case"checking":return"Checking availability...";case"available":return"Username is available!";case"taken":return"Username is already taken";case"error":return"Error checking availability";default:return null}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,r.jsxs)(h.Zp,{className:"w-full max-w-lg",children:[(0,r.jsxs)(h.aR,{className:"space-y-1",children:[(0,r.jsx)(h.ZB,{className:"text-2xl font-bold text-center",children:"Complete your profile"}),(0,r.jsx)(h.BT,{className:"text-center",children:"Set up your profile and start your adventure as a Level 1 Explorer"})]}),(0,r.jsxs)("form",{onSubmit:k(C),children:[(0,r.jsxs)(h.Wu,{className:"space-y-4",children:[a&&(0,r.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:a}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"username",children:"Profile Name *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.p,{id:"username",placeholder:"Choose a unique profile name",...w("username"),className:I.username||"taken"===j?"border-red-500 pr-10":"available"===j?"border-green-500 pr-10":"pr-10"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(()=>{switch(j){case"checking":return(0,r.jsx)(n.A,{className:"h-4 w-4 animate-spin text-blue-500"});case"available":return(0,r.jsx)(c.A,{className:"h-4 w-4 text-green-600"});case"taken":return(0,r.jsx)(d,{className:"h-4 w-4 text-red-600"});case"error":return(0,r.jsx)(d,{className:"h-4 w-4 text-gray-400"});default:return null}})()})]}),I.username&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:I.username.message}),!I.username&&J()&&(0,r.jsx)("p",{className:"text-sm ".concat("available"===j?"text-green-600":"taken"===j?"text-red-600":"text-blue-600"),children:J()}),(0,r.jsx)("p",{className:"text-sm text-gray-800",children:"This will be your unique profile name that others can use to find you."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"display_name",children:"Display Name"}),(0,r.jsx)(m.p,{id:"display_name",placeholder:"Your display name",...w("display_name"),className:I.display_name?"border-red-500":""}),I.display_name&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:I.display_name.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"bio",children:"Bio"}),(0,r.jsx)(x.T,{id:"bio",placeholder:"Tell us about yourself and your travel interests...",rows:3,...w("bio"),className:I.bio?"border-red-500":""}),I.bio&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:I.bio.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"location",children:"Location"}),(0,r.jsx)(m.p,{id:"location",placeholder:"Where are you based?",...w("location"),className:I.location?"border-red-500":""}),I.location&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:I.location.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"website",children:"Website"}),(0,r.jsx)(m.p,{id:"website",type:"url",placeholder:"https://yourwebsite.com",...w("website"),className:I.website?"border-red-500":""}),I.website&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:I.website.message})]})]}),(0,r.jsxs)(h.Wu,{children:[(0,r.jsx)(o.$,{type:"submit",className:"w-full",disabled:s||"available"!==j,children:s?"Creating profile...":"Complete setup"}),"taken"===j&&(0,r.jsx)("p",{className:"text-sm text-red-600 text-center mt-2",children:"Please choose a different profile name to continue"})]})]})]})})}},96648:(e,s,a)=>{"use strict";a.d(s,{U:()=>i});var r=a(87559);let t="https://jjrqstbzzvqrgaqwdvxw.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpqcnFzdGJ6enZxcmdhcXdkdnh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0ODc4MDcsImV4cCI6MjA3NDA2MzgwN30.aSHFHAA5Tv2EUDu7nxwOWXSFFUxbOUCR65Vi52QkjX4";if(!t||!l)throw Error("Missing Supabase environment variables");function i(){return(0,r.createBrowserClient)(t,l)}}},e=>{e.O(0,[4545,7559,2784,3811,8441,1255,7358],()=>e(e.s=38066)),_N_E=e.O()}]);